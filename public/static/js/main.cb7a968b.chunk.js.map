{"version":3,"sources":["redux/store.js","redux/reducers/index.js","net/schema/user.js","utils/storage.js","net/user.js","net/block.js","net/schema/error.js","utils/object.js","net/auth.js","Web.jsx","utils/window.js","components/app-menu/AppMenu.jsx","models/block/block-utils.js","redux/actions/make.js","redux/actions/data.js","net/index.js","models/block/block-handlers.js","components/AddDropdownButton.jsx","components/group/Group.jsx","components/form-utils.js","components/FormWrapper.jsx","components/withSpinner.jsx","components/compute-form/ComputeForm.jsx","utils/descriptor.js","models/block/descriptor.js","utils/trim.js","components/modalWrap.jsx","components/group/EditGroup.jsx","components/task/Priority.jsx","components/task/EditPriority.jsx","components/thumbnail/Thumbnail.jsx","components/task/TaskCollaborator.jsx","components/collaborator/Thumnail.jsx","components/task/AssignTask.jsx","components/task/EditTask.jsx","components/task/MiniTask.jsx","components/project/EditProject.jsx","components/project/ProjectThumbnail.jsx","components/group/RootGroupGenericContainer.jsx","utils/promise.js","components/collaborator/AddCollaboratorForm.jsx","components/collaborator/AddCollaborator.jsx","components/BitSwitch.jsx","components/ExtFormWrapper.jsx","components/collaborator/CollaboratorForm.jsx","components/collaborator/Collaborators.jsx","components/group/RootGroup.jsx","components/group/RootGroupContainer.jsx","components/org/OrgThumbnail.jsx","components/org/EditOrg.jsx","components/org/Orgs.jsx","components/org/OrgsContainer.jsx","components/notification/NotificationBody.jsx","components/notification/NotificationList.jsx","components/notification/NotificationsContainer.jsx","components/signup/Signup.jsx","components/signup/SignupContainer.jsx","components/login/Login.jsx","components/login/LoginContainer.jsx","components/password/ForgotPassword.jsx","components/password/ForgotPsContainer.jsx","components/password/ChangePassword.jsx","components/password/ChangePsWithTokenContainer.jsx","App.js","index.js","net/schema/block.js","models/user/descriptor.js","redux/constants/reducer.js","utils/log.js","net/query.js","net/NetError.js"],"names":["store","createStore","reducer","state","arguments","length","undefined","action","type","MERGE","dotProp","merge","path","data","SET","set","DELETE","delete","MULTIPLE","actions","reduce","accumulator","todo","CLEAR_STATE","window","__REDUX_DEVTOOLS_EXTENSION__","userExistsQuery","updateUserMutation","userLoginFragement","userSignupMutation","concat","userLoginMutation","forgotPasswordMutation","changePasswordMutation","changePasswordWithTokenMutation","getCollaborationRequestsQuery","getUserDataQuery","updateCollaborationRequestMutation","respondToCollaborationRequestMutation","blockFragment","storageAvailable","storage","x","setItem","removeItem","e","DOMException","code","name","appLocalStorage","localStorage","appSessionStorage","sessionStorage","getStorageType","storageType","defaultStorageType","key","storageObject","getItem","tokenStorageName","signup","_x","_signup","apply","this","_callee","user","userFields","result","regenerator_default","a","wrap","_context","prev","next","query","getDataFromObj","sent","token","abrupt","stop","login","_x2","_login","_callee2","prevToken","_context2","email","password","console","log","remember","logout","updateUser","auth","changePassword","_x3","_changePassword","_callee3","_context3","forgotPassword","userExists","updateCollaborationRequest","request","customId","changePasswordWithToken","respondToCollaborationRequest","response","getCollaborationRequests","getUserData","getSavedUserData","_getSavedUserData","_callee4","userToken","_ref","_context4","__webpack_require__","r","__webpack_exports__","d","addBlock","updateBlock","deleteBlock","getBlockChildren","addCollaborators","removeCollaborator","getCollaborators","getCollabRequests","getRoleBlocks","toggleTask","revokeRequest","_auth__WEBPACK_IMPORTED_MODULE_0__","_schema_block__WEBPACK_IMPORTED_MODULE_1__","_utils_object__WEBPACK_IMPORTED_MODULE_2__","blockParamFields","block","addBlockMutation","dataFields","updateBlockMutation","deleteBlockMutation","types","getBlockChildrenQuery","collaborators","body","expiresAt","collaboratorFields","addCollaboratorsMutation","map","c","collaborator","removeCollaboratorMutation","getCollaboratorsQuery","getCollabRequestsQuery","getRoleBlocksQuery","toggleTaskMutation","revokeRequestMutation","module","exports","errorFragment","indexArray","dot_prop_immutable__WEBPACK_IMPORTED_MODULE_0__","dot_prop_immutable__WEBPACK_IMPORTED_MODULE_0___default","n","obj","dataArr","addEmpty","forEach","field","get","defaultIndexer","JSON","stringify","arr","_ref$indexer","indexer","current","queryWithAuth","_x4","_x5","_queryWithAuth","headers","netQuery","variables","process","requestToken","C_Users_yword_Desktop_sk_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","NetError","Object","C_Users_yword_Desktop_sk_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_1__","Authorization","subscribe","getState","connect","props","react_default","createElement","Redirect","to","className","Link","getWindowWidth","innerWidth","document","clientWidth","documentElement","MenuItem","es_menu","Item","AppMenu","_this","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","onToggleMenu","setState","prevState","collapsed","onSelectMenu","event","currentItemKey","menuItems","_this$state","currentItem","find","item","CurrentComponent","component","windowWidth","menuDrawerWidth","style","height","display","flexDirection","drawer","width","onClose","visible","placement","defaultSelectedKeys","onClick","marginTop","icon","theme","iconTheme","label","es_button","React","Component","defaultProps","permittedChildrenTypes","root","org","project","group","task","makeMerge","makeDelete","makeMultiple","mergeDataByPath","setDataByPath","makeSet","clearState","netRoutes","netInterface","_netInterface","route","_len","_key","_args","Array","require","getId","makeBlockHandlers","dispatch","prepareBlockFromEditData","expectedEndAt","valueOf","onAdd","_onAdd","asyncToGenerator","mark","parent","createdAt","Date","now","createdBy","color","randomColor","parents","push","taskCollaborators","onUpdate","onToggle","collaboratorIndex","findIndex","userId","completedAt","onDelete","onAddCollaborators","_ref2","message","statusHistory","status","date","onUpdateCollaborator","objectSpread","orgId","isArray","_getBlockChildren","_ref3","blocks","blockMappedToType","blk","typeMap","_getCollaborators","_ref4","_getCollaborationRequests","_ref5","requests","AddDropdownButton","menu","AddDropdownButton_MenuItem","dropdown","overlay","trigger","Group","fetchingChildren","loadBlockData","prevProps","updateFetchingState","newState","areBlockChildrenLoaded","keys","fetchChildren","blockHandlers","_this$props2","children","onClickAddChild","onEdit","childrenTypes","row","col","span","minHeight","fontWeight","textAlign","marginLeft","simplebar_react_esm","applyErrors","form","errors","formValuesObj","error","fieldName","value","getFieldsValue","setFields","withSpinner","displayName","WithSpinner","_React$Component","_getPrototypeOf2","args","spinning","toggleSpinning","inherits","createClass","forwardedRef","spin","indicator","fontSize","assign","ref","forwardRef","spinnerRef","FormWrapper","handleSubmit","_this$props","onSubmit","preventDefault","validateFieldsAndScroll","t0","Error","stateError","finish","applyFieldErrors","_this$props3","title","formProps","es_form","lineHeight","FormItem","ComputeForm","model","render","FieldComponent","renderedFieldComponent","labelCol","wrapperCol","extra","hasFeedback","noDecorate","getFieldDecorator","rules","validateFirst","initialValue","getValue","valuePropName","computedForm","fields","renderField","components_FormWrapper","renderFields","makeDescriptorFieldsRequired","descriptor","rule","replaceRule","required","makeConfirmValidator","field0","field1","msg","cb","source","value0","getFieldValue","value1","fieldToUpdate","fieldValue","defineProperty","makeNameExistsValidator","existingNames","toLowerCase","nameExists","blockDescriptor","max","transform","trim","pattern","description","taskDescriptor","groupDescriptor","projectDescriptor","orgDescriptor","modalWrap","defaultTitle","ModalWrappedComponent","updateWindowData","modalIsMounted","currentDeviceWidth","throttle","addEventListener","removeEventListener","WrappedComponent","drawerWidth","TextArea","input","EditGroup","self","assertThisInitialized","autoComplete","toConsumableArray","validator","existingGroups","autosize","minRows","maxRows","submit","htmlType","hideRequiredMark","compute_form_ComputeForm","create","priorityToColorMap","not important","important","very important","Priority","level","cover","EditPriority","onChange","backgroundColor","cursor","Thumbnail","renderInfo","colorStyle","colorClassName","colorSpan","hoverable","cSpan","hov","gutter","TaskCollaborator","collaboratorTaskData","onUnassign","es_switch","disabled","checked","marginRight","padding","CollaboratorThumbnail","headerValue","latestStatus","getLatestStatus","Fragment","moment","fromNow","maxWidth","AssignTask","onAddCollaborator","existingTaskCollaboratorsIdMap","assignedAt","assignedBy","setFieldsValue","onUnassignCollaborator","index","collaboratorsIdMap","defaultTaskCollaborators","_this2","options","es_select","Option","Thumnail_CollaboratorThumbnail","placeholder","i","_this3","TaskCollaborator_TaskCollaborator","renderCollaborators","renderSelectCollaborators","EditTask","submittedData","priority","dataType","AssignTask_AssignTask","defaultAssignedTo","date_picker","showTime","format","completeAt","Task","getCollaborator","offset","EditProject","existingProjects","ProjectThumbnail","rootBlock","group_RootGroup","waitForPromises","promises","Promise","resolve","reject","nextPromise","p","then","success","catch","failed","reportPromise","CollaboratorForm","clearHelpers","clearErrors","setError","emailError","messageError","hasError","getError","validate","validationPromises","pValidator","onAddField","onDeleteField","onUpdateField","onUpdateEmail","emailValidator","onUpdateMessage","messageValidator","onUpdateExpiresAt","momentDate","v","emailDescriptor","existingCollaborators","existingCollaborationRequests","messageDescriptor","validateCollaborator","asyncValidator","bind","getFieldError","help","marginBottom","target","disabledDate","subtract","endOf","es_divider","AddCollaborator","formRef","createRef","add","AddCollaboratorForm_CollaboratorForm","BitSwitch","defaultValue","option1Style","option2Style","ExtFormWrapper","labelName","dateFormat","immutable","min","xs","sm","md","editing","option","BitSwitch_BitSwitch","input_number","content","renderForm","components_ExtFormWrapper","Collaborators","showAddCollaboratorForm","showCollaborator","toggleCollaboratorForm","items","renderItem","list","dataSource","grid","lg","alignItems","renderList","collaborationRequests","onBack","collaborator_CollaboratorForm","collaborator_AddCollaborator","tabs","TabPane","tab","renderCollaborationRequests","RootGroup","onSubmitData","formType","toggleForm","setCurrentProject","toggleShowCollaborators","showCollaborators","fetchingCollaborators","fetchingCollaborationRequests","_this$state2","areBlockCollaboratorsLoaded","areBlockCollaborationRequestsLoaded","_this$state3","fetchCollaborators","fetchCollaborationRequests","_this$props4","tasks","_this$props5","taskId","MiniTask","projects","projectId","by","_this4","_this$props6","isFromRoot","_this$state4","isUserRootBlock","Collaborators_Collaborators","bench","RootGroupGenericContainer","parentBlock","project_EditProject","getExistingNames","group_EditGroup","task_EditTask","hasChildren","group_Group","renderTasks","renderProjects","groupId","RootGroupContainer","fetchRootData","ownProps","_fetchRootData","orgs","OrgThumbnail","EditOrg","existingOrgs","Orgs","setCurrentOrg","id","currentOrg","toggleNewOrgForm","showNewOrgForm","onCreateOrg","org_EditOrg","OrgsContainer","org_Orgs","NotificationBody","notification","_possibleUserResponse","possibleUserResponses","onRespond","getUserResponse","from","blockName","toDateString","borderRadius","margin","NotificationListItem","isSelected","readAt","NotificationList","onClickNotication","currentNotification","onClickNotification","notifications","renderType","getRenderType","setRenderType","leading","notification_NotificationBody","notificationId","renderCurrentNotification","renderNotifications","NotificationsContainer","fetchNotifications","notification_NotificationList","_onClickNotification","update","_onRespond","requestIsValid","invalidStatuses","accepted","declined","revoked","_fetchNotifications","notificationsObj","Signup","confirmPasswordValidator","confirmEmailValidator","userDescriptor","confirmEmail","confirmPassword","signup_Signup","_onSubmit","Login","es_checkbox","login_Login","ForgotPassword","es_message","Password","password_ForgotPassword","ChangePassword","password_ChangePassword","MainAppContainer","onLogout","app_menu_AppMenu","renderComponent","ComponentX","justify","App","userIsLoggedIn","history","location","pathname","indexOf","es_notification","Switch","Route","SignupContainer","LoginContainer","ForgotPasswordContainer","ChangePasswordWithTokenContainer","exact","Web","withRouter","rootElement","getElementById","ReactDOM","es","BrowserRouter","src_App","devConsole","devError","serverAddr","_query","hd","resultBody","Content-Type","fetch","method","mode","ok","json","statusText","NetFieldError","C_Users_yword_Desktop_sk_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_4__","C_Users_yword_Desktop_sk_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_0__","C_Users_yword_Desktop_sk_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_1__"],"mappings":"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","file":"static/js/main.cb7a968b.chunk.js","sourcesContent":["import { createStore } from \"redux\";\r\nimport reducer from \"./reducers/index\";\r\n\r\nlet storeData = {};\r\n\r\n// if (process.env.NODE_ENV === \"development\") {\r\n//   let storeDataStr = sessionStorage.getItem(\"store\");\r\n//   try {\r\n//     storeData = storeDataStr ? JSON.parse(storeDataStr) : {};\r\n//   } catch (error) {\r\n//     console.error(error);\r\n//     storeData = {};\r\n//   }\r\n// }\r\n\r\nconst store = createStore(\r\n  reducer,\r\n  storeData,\r\n  window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__()\r\n);\r\n\r\nif (process.env.NODE_ENV === \"development\") {\r\n  // store.subscribe(() => {\r\n  //   console.log(store.getState());\r\n  // });\r\n  // document.addEventListener(\"beforeunload\", () => {\r\n  //   console.log(\"error\");\r\n  //   sessionStorage.setItem(\"store\", JSON.stringify(store));\r\n  // });\r\n  // document.addEventListener(\"error\", () => {\r\n  //   console.log(\"error\");\r\n  //   //sessionStorage.setItem(\"store\", JSON.stringify(store));\r\n  // });\r\n}\r\n\r\nexport default store;\r\n","import {\r\n  MERGE,\r\n  DELETE,\r\n  MULTIPLE,\r\n  SET,\r\n  CLEAR_STATE\r\n} from \"../constants/reducer\";\r\nimport dotProp from \"dot-prop-immutable\";\r\n\r\nexport default function reducer(state = {}, action) {\r\n  switch (action.type) {\r\n    case MERGE:\r\n      return dotProp.merge(state, action.path, action.data);\r\n\r\n    case SET:\r\n      return dotProp.set(state, action.path, action.data);\r\n\r\n    case DELETE:\r\n      return dotProp.delete(state, action.path);\r\n\r\n    case MULTIPLE:\r\n      return action.actions.reduce(\r\n        (accumulator, todo) => reducer(accumulator, todo, true),\r\n        state\r\n      );\r\n\r\n    case CLEAR_STATE:\r\n      return {};\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import { blockFragment } from \"./block\";\r\n\r\nexport const userExistsQuery = `\r\n  query UserExistsQuery (email: String!) {\r\n    user {\r\n      userExists(email: $email) {\r\n        errors {\r\n          field\r\n          message\r\n        }\r\n        userExists\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const updateUserMutation = `\r\n  mutation UpdateUserMutation($data: UpdateUserInput!) {\r\n    user {\r\n      updateUser(user: $user) {\r\n        errors {\r\n          field\r\n          message\r\n        }\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const userLoginFragement = `\r\n  fragment userQueryResult on UserQueryResult {\r\n    errors {\r\n      field\r\n      message\r\n    }\r\n    user {\r\n      name\r\n      email\r\n      customId\r\n      createdAt\r\n      lastNotificationCheckTime\r\n    }\r\n    token\r\n  }\r\n`;\r\n\r\nexport const userSignupMutation = `\r\n  ${userLoginFragement}\r\n  mutation UserSignupMutation ($user: UserSignupInput!) {\r\n    user {\r\n      signup (user: $user) {\r\n        ...userQueryResult\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const userLoginMutation = `\r\n  ${userLoginFragement}\r\n  mutation UserLoginMutation ($email: String!, $password: String!) {\r\n    user {\r\n      login (email: $email, password: $password) {\r\n        ...userQueryResult\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const forgotPasswordMutation = `\r\n  mutation UserForgotPasswordMutation ($email: String!) {\r\n    user {\r\n      forgotPassword {\r\n        errors {\r\n          field\r\n          message\r\n        }\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const changePasswordMutation = `\r\n  ${userLoginFragement}\r\n  mutation UserChangePasswordMutation ($password: String!) {\r\n    user {\r\n      changePassword (password: $password) {\r\n        ...userQueryResult\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const changePasswordWithTokenMutation = `\r\n  ${userLoginFragement}\r\n  mutation UserChangeWithTokenPasswordMutation (\r\n    $password: String!\r\n  ) {\r\n    user {\r\n      changePasswordWithToken(password: $password) {\r\n        ...userQueryResult\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const getCollaborationRequestsQuery = `\r\n  query GetCollaborationRequestsQuery {\r\n    user {\r\n      getCollaborationRequests {\r\n        errors {\r\n          field\r\n          message\r\n        }\r\n        requests {\r\n          customId\r\n          from {\r\n            userId\r\n            name\r\n            blockId\r\n            blockName\r\n            blockType\r\n          }\r\n          createdAt\r\n          body\r\n          readAt\r\n          to {\r\n            email\r\n            userId\r\n          }\r\n          statusHistory {\r\n            status\r\n            date\r\n          }\r\n          sentEmailHistory {\r\n            date\r\n          }\r\n          type\r\n          root\r\n        }\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const getUserDataQuery = `\r\n  ${userLoginFragement}\r\n  query GetUserDataQuery {\r\n    user {\r\n      getUserData {\r\n        ...userQueryResult\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const updateCollaborationRequestMutation = `\r\n  mutation UpdateCollaborationRequestMutation (\r\n    $customId: String!, $data: UpdateCollaborationRequestInput!\r\n  ) {\r\n    user {\r\n      updateCollaborationRequest (customId: $customId, data: $data) {\r\n        errors {\r\n          field\r\n          message\r\n        }\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const respondToCollaborationRequestMutation = `\r\n  ${blockFragment}\r\n  mutation RespondToCollaborationRequestMutation (\r\n    $customId: String!, $response: String!\r\n  ) {\r\n    user {\r\n      respondToCollaborationRequest (customId: $customId, response: $response) {\r\n        errors {\r\n          field\r\n          message\r\n        }\r\n        block {\r\n          ...blockFragment\r\n        }\r\n      }\r\n    }\r\n  }\r\n`;\r\n","export function storageAvailable(type) {\r\n  try {\r\n    var storage = window[type],\r\n      x = \"__storage_test__\";\r\n    storage.setItem(x, x);\r\n    storage.removeItem(x);\r\n    return true;\r\n  } catch (e) {\r\n    return (\r\n      e instanceof DOMException &&\r\n      // everything except Firefox\r\n      (e.code === 22 ||\r\n        // Firefox\r\n        e.code === 1014 ||\r\n        // test name field too, because code might not be present\r\n        // everything except Firefox\r\n        e.name === \"QuotaExceededError\" ||\r\n        // Firefox\r\n        e.name === \"NS_ERROR_DOM_QUOTA_REACHED\") &&\r\n      // acknowledge QuotaExceededError only if there's something already stored\r\n      storage.length !== 0\r\n    );\r\n  }\r\n}\r\n\r\nexport let appLocalStorage = storageAvailable(\"localStorage\")\r\n  ? window.localStorage\r\n  : null;\r\nexport let appSessionStorage = storageAvailable(\"sessionStorage\")\r\n  ? window.sessionStorage\r\n  : null;\r\n\r\nfunction getStorageType(storageType) {\r\n  switch (storageType) {\r\n    case \"local\":\r\n    case \"localStorage\":\r\n      return appLocalStorage;\r\n\r\n    case \"session\":\r\n    case \"sessionStorage\":\r\n    default:\r\n      return appSessionStorage;\r\n  }\r\n}\r\n\r\nconst defaultStorageType = \"local\";\r\n\r\nexport function setItem(key, data, storageType = defaultStorageType) {\r\n  let storageObject = getStorageType(storageType);\r\n\r\n  if (storageObject) {\r\n    storageObject.setItem(key, data);\r\n  }\r\n}\r\n\r\nexport function removeItem(key, storageType = defaultStorageType) {\r\n  let storageObject = getStorageType(storageType);\r\n\r\n  if (storageObject) {\r\n    storageObject.removeItem(key);\r\n  }\r\n}\r\n\r\nexport function getItem(key, storageType = defaultStorageType) {\r\n  let storageObject = getStorageType(storageType);\r\n\r\n  if (storageObject) {\r\n    return storageObject.getItem(key);\r\n  }\r\n}\r\n","import {\r\n  userSignupMutation,\r\n  userLoginMutation,\r\n  updateUserMutation,\r\n  changePasswordMutation,\r\n  forgotPasswordMutation,\r\n  userExistsQuery,\r\n  updateCollaborationRequestMutation,\r\n  changePasswordWithTokenMutation,\r\n  respondToCollaborationRequestMutation,\r\n  getCollaborationRequestsQuery,\r\n  getUserDataQuery\r\n} from \"./schema/user\";\r\nimport query from \"./query\";\r\nimport auth from \"./auth\";\r\nimport { getDataFromObj } from \"../utils/object\";\r\nimport { setItem, getItem, removeItem } from \"../utils/storage\";\r\n\r\nconst tokenStorageName = \"t\";\r\nconst userStorageName = \"user\";\r\n\r\nexport async function signup(user) {\r\n  const userFields = [\"name\", \"password\", \"email\"];\r\n\r\n  let result = await query(\r\n    null,\r\n    userSignupMutation,\r\n    { user: getDataFromObj(user, userFields) },\r\n    \"data.user.signup\"\r\n  );\r\n\r\n  setItem(tokenStorageName, result.token, \"local\");\r\n\r\n  return result;\r\n}\r\n\r\nexport async function login(user) {\r\n  let result = await query(\r\n    null,\r\n    userLoginMutation,\r\n    { email: user.email, password: user.password },\r\n    \"data.user.login\"\r\n  );\r\n\r\n  console.log(result);\r\n  const prevToken = getItem(tokenStorageName);\r\n\r\n  if (user.remember || prevToken) {\r\n    setItem(tokenStorageName, result.token, \"local\");\r\n  }\r\n\r\n  return result;\r\n}\r\n\r\nexport function logout() {\r\n  removeItem(tokenStorageName, \"local\");\r\n}\r\n\r\nexport function updateUser(user) {\r\n  const updateUserFields = [\"name\", \"lastNotificationCheckTime\"];\r\n\r\n  return auth(\r\n    null,\r\n    updateUserMutation,\r\n    { user: getDataFromObj(user, updateUserFields) },\r\n    \"data.user.updateUser\"\r\n  );\r\n}\r\n\r\nexport async function changePassword(password) {\r\n  let result = await auth(\r\n    null,\r\n    changePasswordMutation,\r\n    { password },\r\n    \"data.user.changePassword\"\r\n  );\r\n\r\n  let prevToken = getItem(tokenStorageName);\r\n\r\n  if (prevToken) {\r\n    setItem(tokenStorageName, result.token, \"local\");\r\n  }\r\n\r\n  return result;\r\n}\r\n\r\nexport function forgotPassword(email) {\r\n  return query(\r\n    null,\r\n    forgotPasswordMutation,\r\n    { email },\r\n    \"data.user.forgotPassword\"\r\n  );\r\n}\r\n\r\nexport function userExists(email) {\r\n  return query(null, userExistsQuery, { email }, \"data.user.userExists\");\r\n}\r\n\r\nexport function updateCollaborationRequest(request, data) {\r\n  const updateRequestFields = [\"readAt\"];\r\n\r\n  return auth(\r\n    null,\r\n    updateCollaborationRequestMutation,\r\n    {\r\n      customId: request.customId,\r\n      data: getDataFromObj(data, updateRequestFields)\r\n    },\r\n    \"data.user.updateCollaborationRequest\"\r\n  );\r\n}\r\n\r\nexport function changePasswordWithToken(token) {\r\n  return query(\r\n    null,\r\n    changePasswordWithTokenMutation,\r\n    { password: token },\r\n    \"data.user.changePasswordWithToken\"\r\n  );\r\n}\r\n\r\nexport function respondToCollaborationRequest(request, response) {\r\n  return auth(\r\n    null,\r\n    respondToCollaborationRequestMutation,\r\n    { response, customId: request.customId },\r\n    \"data.user.respondToCollaborationRequest\"\r\n  );\r\n}\r\n\r\nexport function getCollaborationRequests() {\r\n  return auth(\r\n    null,\r\n    getCollaborationRequestsQuery,\r\n    {},\r\n    \"data.user.getCollaborationRequests\"\r\n  );\r\n}\r\n\r\nexport function getUserData(token) {\r\n  return auth(null, getUserDataQuery, {}, \"data.user.getUserData\", token);\r\n}\r\n\r\nexport async function getSavedUserData() {\r\n  let userToken = getItem(tokenStorageName);\r\n\r\n  if (userToken) {\r\n    let { user, token } = await getUserData(userToken);\r\n    setItem(tokenStorageName, token);\r\n    return { user, token };\r\n  }\r\n}\r\n","import auth from \"./auth\";\r\nimport {\r\n  addBlockMutation,\r\n  updateBlockMutation,\r\n  deleteBlockMutation,\r\n  getBlockChildrenQuery,\r\n  addCollaboratorsMutation,\r\n  getCollabRequestsQuery,\r\n  getCollaboratorsQuery,\r\n  getRoleBlocksQuery,\r\n  removeCollaboratorMutation,\r\n  toggleTaskMutation,\r\n  revokeRequestMutation\r\n} from \"./schema/block\";\r\nimport { getDataFromObj } from \"../utils/object\";\r\n\r\nconst blockParamFields = [\"customId\"];\r\n\r\nexport function addBlock(block) {\r\n  const fields = [\r\n    \"name\",\r\n    \"customId\",\r\n    \"description\",\r\n    \"expectedEndAt\",\r\n    \"completedAt\",\r\n    \"color\",\r\n    \"type\",\r\n    \"parents\",\r\n    \"data\",\r\n    \"priority\",\r\n    \"taskCollaborators\"\r\n  ];\r\n  return auth(\r\n    null,\r\n    addBlockMutation,\r\n    { block: getDataFromObj(block, fields) },\r\n    \"data.block.addBlock\"\r\n  );\r\n}\r\n\r\nexport function updateBlock(block, data) {\r\n  const dataFields = [\r\n    \"name\",\r\n    \"description\",\r\n    \"expectedEndAt\",\r\n    \"completedAt\",\r\n    \"color\",\r\n    \"priority\",\r\n    \"data\",\r\n    \"taskCollaborators\"\r\n  ];\r\n\r\n  console.log(data, getDataFromObj(data, dataFields));\r\n\r\n  return auth(\r\n    null,\r\n    updateBlockMutation,\r\n    {\r\n      block: getDataFromObj(block, blockParamFields),\r\n      data: getDataFromObj(data, dataFields)\r\n    },\r\n    \"data.block.updateBlock\"\r\n  );\r\n}\r\n\r\nexport function deleteBlock(block) {\r\n  return auth(\r\n    null,\r\n    deleteBlockMutation,\r\n    { block: getDataFromObj(block, blockParamFields) },\r\n    \"data.block.deleteBlock\"\r\n  );\r\n}\r\n\r\nexport function getBlockChildren(block, types) {\r\n  return auth(\r\n    null,\r\n    getBlockChildrenQuery,\r\n    { types, block: getDataFromObj(block, blockParamFields) },\r\n    \"data.block.getBlockChildren\"\r\n  );\r\n}\r\n\r\nexport function addCollaborators(block, collaborators, body, expiresAt) {\r\n  const collaboratorFields = [\"email\", \"body\", \"expiresAt\", \"customId\"];\r\n  return auth(\r\n    null,\r\n    addCollaboratorsMutation,\r\n    {\r\n      body,\r\n      expiresAt,\r\n      block: getDataFromObj(block, blockParamFields),\r\n      collaborators: collaborators.map(c =>\r\n        getDataFromObj(c, collaboratorFields)\r\n      )\r\n    },\r\n    \"data.block.addCollaborators\"\r\n  );\r\n}\r\n\r\nexport function removeCollaborator(block, collaborator) {\r\n  return auth(\r\n    null,\r\n    removeCollaboratorMutation,\r\n    {\r\n      block: getDataFromObj(block, blockParamFields),\r\n      collaborator: collaborator.customId\r\n    },\r\n    \"data.block.removeCollaborator\"\r\n  );\r\n}\r\n\r\nexport function getCollaborators(block) {\r\n  return auth(\r\n    null,\r\n    getCollaboratorsQuery,\r\n    {\r\n      block: getDataFromObj(block, blockParamFields)\r\n    },\r\n    \"data.block.getCollaborators\"\r\n  );\r\n}\r\n\r\nexport function getCollabRequests(block) {\r\n  return auth(\r\n    null,\r\n    getCollabRequestsQuery,\r\n    {\r\n      block: getDataFromObj(block, blockParamFields)\r\n    },\r\n    \"data.block.getCollabRequests\"\r\n  );\r\n}\r\n\r\nexport function getRoleBlocks() {\r\n  return auth(null, getRoleBlocksQuery, {}, \"data.block.getRoleBlocks\");\r\n}\r\n\r\nexport function toggleTask(block, data) {\r\n  return auth(\r\n    null,\r\n    toggleTaskMutation,\r\n    {\r\n      data,\r\n      block: getDataFromObj(block, blockParamFields)\r\n    },\r\n    \"data.block.toggleTask\"\r\n  );\r\n}\r\n\r\nexport function revokeRequest(block, request) {\r\n  return auth(\r\n    null,\r\n    revokeRequestMutation,\r\n    {\r\n      request: request.customId,\r\n      block: getDataFromObj(block, blockParamFields)\r\n    },\r\n    \"data.block.revokeRequest\"\r\n  );\r\n}\r\n","const errorFragment = `\r\n  fragment errorFragment on Error {\r\n    field\r\n    message\r\n  }\r\n`;\r\n\r\nmodule.exports = {\r\n  errorFragment\r\n};\r\n","import dotProp from \"dot-prop-immutable\";\r\n\r\nexport function getDataFromObj(obj, dataArr, addEmpty) {\r\n  let result = {};\r\n\r\n  dataArr.forEach(field => {\r\n    let data = dotProp.get(obj, field);\r\n\r\n    if (data || addEmpty) {\r\n      result[field] = data;\r\n    }\r\n  });\r\n\r\n  return result;\r\n}\r\n\r\nfunction defaultIndexer(data, path) {\r\n  if (path) {\r\n    return dotProp.get(data, path);\r\n  }\r\n\r\n  return JSON.stringify(data);\r\n}\r\n\r\nexport function indexArray(arr = [], { path, indexer = defaultIndexer } = {}) {\r\n  let result = arr.reduce((accumulator, current) => {\r\n    accumulator[indexer(current, path, arr)] = current;\r\n    return accumulator;\r\n  }, {});\r\n\r\n  return result;\r\n}\r\n","import store from \"../redux/store\";\r\nimport get from \"lodash/get\";\r\nimport query from \"./query\";\r\nimport NetError from \"./NetError\";\r\n\r\nlet user = null;\r\nstore.subscribe(() => {\r\n  const state = store.getState();\r\n  user = get(state, \"user\");\r\n});\r\n\r\nexport default async function queryWithAuth(\r\n  headers,\r\n  netQuery,\r\n  variables,\r\n  process,\r\n  token\r\n) {\r\n  const requestToken = (user && user.token) || token;\r\n\r\n  if (!requestToken) {\r\n    throw new NetError(\"error, please try again\");\r\n  }\r\n\r\n  return await query(\r\n    {\r\n      Authorization: `Bearer ${requestToken}`,\r\n      ...headers\r\n    },\r\n    netQuery,\r\n    variables,\r\n    process\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Redirect, Link } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\nimport \"./web.css\";\r\n\r\nfunction Web(props) {\r\n  const { user } = props;\r\n  if (user) {\r\n    return <Redirect to=\"/app\" />;\r\n  }\r\n\r\n  return (\r\n    <div className=\"web\">\r\n      <Link to=\"/signup\">Signup</Link>\r\n      <Link to=\"/login\">Login</Link>\r\n      {/* <Link to=\"/forgot-password\">Forgot Password</Link>\r\n      <Link to=\"/change-password\">Change Password</Link> */}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    user: state.user\r\n  };\r\n}\r\n\r\nexport default connect(mapStateToProps)(Web);\r\n","export function getWindowWidth() {\r\n  return (\r\n    window.innerWidth ||\r\n    document.body.clientWidth ||\r\n    document.documentElement.clientWidth\r\n  );\r\n}\r\n\r\nexport function getWindowHeight() {\r\n  return (\r\n    window.innerHeight ||\r\n    document.body.clientHeight ||\r\n    document.documentElement.clientHeight\r\n  );\r\n}\r\n","import React from \"react\";\r\n//import throttle from \"lodash/throttle\";\r\nimport { getWindowWidth } from \"../../utils/window\";\r\nimport { Menu, Drawer, Icon, Button } from \"antd\";\r\nimport \"./app-menu.css\";\r\n\r\nconst MenuItem = Menu.Item;\r\nconst appMenuDefaultProps = {\r\n  collapsed: true\r\n};\r\n\r\nclass AppMenu extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    /*this.updateWindowData();\r\n    this.updateWindowData = throttle(this.updateWindowData, 100, {\r\n      leading: true\r\n    });*/\r\n\r\n    this.state = {\r\n      collapsed: props.collapsed,\r\n      currentItemKey: props.currentItemKey\r\n    };\r\n  }\r\n\r\n  onToggleMenu = () => {\r\n    this.setState(prevState => ({ collapsed: !prevState.collapsed }));\r\n  };\r\n\r\n  onSelectMenu = event => {\r\n    const { onSelectMenu } = this.props;\r\n\r\n    this.setState(\r\n      {\r\n        currentItemKey: event.key,\r\n        collapsed: true\r\n      },\r\n      () => {\r\n        if (onSelectMenu) {\r\n          onSelectMenu(event.key);\r\n        }\r\n      }\r\n    );\r\n  };\r\n\r\n  /*componentDidMount() {\r\n    window.addEventListener(\"resize\", this.updateWindowData);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener(\"resize\", this.updateWindowData);\r\n  }\r\n\r\n  updateWindowData() {\r\n    const { windowType, updateWindowData } = this.props;\r\n    const tempWindowType = this.getWindowTypeFromWindow();\r\n    if (!windowType || windowType !== tempWindowType) {\r\n      updateWindowData({ windowType: tempWindowType });\r\n    }\r\n  }\r\n\r\n  getWindowTypeFromWindow() {\r\n    const { maxMobileWidth } = this.props;\r\n    if (getWindowWidth() > maxMobileWidth) {\r\n      return \"desktop\";\r\n    }\r\n\r\n    return \"mobile\";\r\n  }*/\r\n\r\n  render() {\r\n    const { menuItems } = this.props;\r\n    const { currentItemKey, collapsed } = this.state;\r\n    const currentItem = menuItems.find(item => item.key === currentItemKey);\r\n    const CurrentComponent = currentItem.component;\r\n    const windowWidth = getWindowWidth();\r\n    let menuDrawerWidth = windowWidth / (windowWidth < 300 ? 1 : 2);\r\n    // menuDrawerWidth = menuDrawerWidth < 300 ? windowWidth : menuDrawerWidth;\r\n\r\n    return (\r\n      <div style={{ height: \"100%\", display: \"flex\", flexDirection: \"column\" }}>\r\n        <Drawer\r\n          width={menuDrawerWidth}\r\n          onClose={this.onToggleMenu}\r\n          visible={!collapsed}\r\n          placement=\"left\"\r\n        >\r\n          <Menu\r\n            defaultSelectedKeys={[currentItemKey]}\r\n            onClick={this.onSelectMenu}\r\n            style={{ marginTop: \"2em\" }}\r\n          >\r\n            {menuItems.map(item => (\r\n              <MenuItem key={item.key}>\r\n                {item.icon && <Icon type={item.icon} theme={item.iconTheme} />}\r\n                <span>{item.label}</span>\r\n              </MenuItem>\r\n            ))}\r\n          </Menu>\r\n        </Drawer>\r\n        <div className=\"app-menu-header\">\r\n          <Button\r\n            icon={collapsed ? \"menu-unfold\" : \"menu-fold\"}\r\n            onClick={this.onToggleMenu}\r\n          />\r\n        </div>\r\n        <div className=\"app-menu-content\">\r\n          {CurrentComponent && <CurrentComponent {...currentItem.props} />}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nAppMenu.defaultProps = appMenuDefaultProps;\r\n\r\nexport default AppMenu;\r\n","export function assignTask(collaborator, by) {\r\n  return {\r\n    userId: collaborator.customId,\r\n    assignedAt: Date.now(),\r\n    assignedBy: by ? by.customId : null,\r\n    completedAt: null\r\n  };\r\n}\r\n\r\nexport const permittedChildrenTypes = {\r\n  root: [\"project\", \"group\", \"task\"],\r\n  org: [\"project\", \"group\", \"task\"],\r\n  project: [\"group\", \"task\"],\r\n  group: [\"project\", \"task\"],\r\n  task: []\r\n};\r\n","import {\r\n  MERGE,\r\n  DELETE,\r\n  MULTIPLE,\r\n  SET,\r\n  CLEAR_STATE\r\n} from \"../constants/reducer\";\r\n\r\nexport function makeMerge(path, data) {\r\n  return {\r\n    data,\r\n    path,\r\n    type: MERGE\r\n  };\r\n}\r\n\r\nexport function makeDelete(path) {\r\n  return {\r\n    path,\r\n    type: DELETE\r\n  };\r\n}\r\n\r\nexport function makeMultiple(actions) {\r\n  return {\r\n    actions,\r\n    type: MULTIPLE\r\n  };\r\n}\r\n\r\nexport function makeSet(path, data) {\r\n  return {\r\n    path,\r\n    data,\r\n    type: SET\r\n  };\r\n}\r\n\r\nexport function makeClearState() {\r\n  return {\r\n    type: CLEAR_STATE\r\n  };\r\n}\r\n","import {\r\n  makeMultiple,\r\n  makeMerge,\r\n  makeDelete,\r\n  makeSet,\r\n  makeClearState\r\n} from \"./make\";\r\n\r\nexport function updateId(data, newId, prevId) {\r\n  const action1 = makeDelete(data.path);\r\n  data.customId = newId;\r\n  let prevPath = data.path.split(\".\");\r\n  prevPath.pop();\r\n  prevPath.push(newId);\r\n  data.path = prevPath.join(\".\");\r\n  return makeMultiple([action1, makeMerge(data.path, data)]);\r\n}\r\n\r\nexport function mergeDataByPath(path, data) {\r\n  return makeMerge(path, data);\r\n}\r\n\r\nexport function deleteDataByPath(path) {\r\n  return makeDelete(path);\r\n}\r\n\r\nexport function setDataByPath(path, data) {\r\n  return makeSet(path, data);\r\n}\r\n\r\nexport function clearState() {\r\n  return makeClearState();\r\n}\r\n","import get from \"lodash/get\";\r\n\r\nlet netRoutes = null;\r\n// netRoutes = {\r\n//   block: require(\"./dev/block\"),\r\n//   user: require(\"./dev/user\")\r\n// };\r\n\r\nnetRoutes = {\r\n  block: require(\"./block\"),\r\n  user: require(\"./user\")\r\n};\r\n\r\nexport default async function netInterface(path, ...data) {\r\n  let route = get(netRoutes, path);\r\n  if (route) {\r\n    return await route(...data);\r\n  }\r\n\r\n  return null;\r\n}\r\n","import {\r\n  mergeDataByPath,\r\n  deleteDataByPath,\r\n  setDataByPath\r\n} from \"../../redux/actions/data\";\r\nimport netInterface from \"../../net/index\";\r\nimport randomColor from \"randomcolor\";\r\nimport { permittedChildrenTypes } from \"./block-utils\";\r\nimport { getCollaborationRequests } from \"../../net/user\";\r\n\r\nconst getId = require(\"uuid/v4\");\r\n// const getId = require(\"nanoid\");\r\n\r\nexport function makeBlockHandlers({ dispatch, user }) {\r\n  function prepareBlockFromEditData(block) {\r\n    if (block.expectedEndAt) {\r\n      block.expectedEndAt = block.expectedEndAt.valueOf();\r\n    }\r\n\r\n    return block;\r\n  }\r\n\r\n  return {\r\n    async onAdd(block, parent) {\r\n      block.createdAt = Date.now();\r\n      block.createdBy = user.customId;\r\n      block.customId = getId();\r\n      block.color = randomColor();\r\n\r\n      if (parent) {\r\n        block.path = `${parent.path}.${block.type}.${block.customId}`;\r\n        block.parents = [];\r\n        if (parent.parents) {\r\n          block.parents = block.parents.concat(parent.parents);\r\n        }\r\n\r\n        block.parents.push(parent.customId);\r\n      } else {\r\n        block.path = `${block.type}.${block.customId}`;\r\n      }\r\n\r\n      block = prepareBlockFromEditData(block);\r\n\r\n      if (block.type === \"org\") {\r\n        block.collaborators = [user];\r\n        block.path = `orgs.${block.customId}`;\r\n        dispatch(setDataByPath(\"user.user.orgs\", [block.customId]));\r\n      } else if (block.type === \"task\") {\r\n        if (!block.taskCollaborators) {\r\n          block.taskCollaborators = [];\r\n        }\r\n      }\r\n\r\n      if (permittedChildrenTypes[block.type]) {\r\n        permittedChildrenTypes[block.type].forEach(type => {\r\n          block[type] = {};\r\n        });\r\n      }\r\n\r\n      dispatch(setDataByPath(block.path, block));\r\n      netInterface(\"block.addBlock\", block);\r\n    },\r\n\r\n    onUpdate(block, data) {\r\n      data = prepareBlockFromEditData(data);\r\n      dispatch(mergeDataByPath(block.path, data));\r\n      netInterface(\"block.updateBlock\", block, data);\r\n    },\r\n\r\n    onToggle(block) {\r\n      const collaboratorIndex = block.taskCollaborators.findIndex(\r\n        c => c.userId === user.customId\r\n      );\r\n\r\n      const collaborator = block.taskCollaborators[collaboratorIndex];\r\n      const path = `${\r\n        block.path\r\n      }.taskCollaborators.${collaboratorIndex}.completedAt`;\r\n\r\n      dispatch(\r\n        setDataByPath(path, collaborator.completedAt ? null : Date.now())\r\n      );\r\n\r\n      netInterface(\"block.toggleTask\", block, true);\r\n    },\r\n\r\n    onDelete(block) {\r\n      dispatch(deleteDataByPath(block.path));\r\n      netInterface(\"block.deleteBlock\", block);\r\n    },\r\n\r\n    onAddCollaborators(block, { collaborators, message, expiresAt }) {\r\n      collaborators = collaborators.map(c => {\r\n        if (!c.message) {\r\n          c.message = message;\r\n        }\r\n\r\n        if (!c.expiresAt) {\r\n          c.expiresAt = expiresAt;\r\n        } else if (c.expiresAt.valueOf) {\r\n          c.expiresAt = c.expiresAt.valueOf();\r\n        }\r\n\r\n        c.customId = getId();\r\n        c.statusHistory = [{ status: \"pending\", date: Date.now() }];\r\n        return c;\r\n      });\r\n\r\n      dispatch(\r\n        mergeDataByPath(`${block.path}.collaborationRequests`, collaborators)\r\n      );\r\n\r\n      netInterface(\r\n        \"block.addCollaborators\",\r\n        block,\r\n        collaborators,\r\n        message,\r\n        expiresAt\r\n      );\r\n    },\r\n\r\n    onUpdateCollaborator(block, collaborator, data) {\r\n      collaborator = { ...collaborator, ...data };\r\n      let orgId =\r\n        Array.isArray(block.parents) && block.parents.length > 1\r\n          ? block.parents[0]\r\n          : block.customId;\r\n\r\n      dispatch(setDataByPath(`orgs.${orgId}.collaborators`));\r\n    },\r\n\r\n    async getBlockChildren(block) {\r\n      const { blocks } = await netInterface(\"block.getBlockChildren\", block);\r\n      let blockMappedToType = {};\r\n\r\n      if (permittedChildrenTypes[block.type]) {\r\n        permittedChildrenTypes[block.type].forEach(type => {\r\n          blockMappedToType[type] = {};\r\n        });\r\n      }\r\n\r\n      blocks.forEach(blk => {\r\n        blk.path = `${block.path}.${blk.type}.${blk.customId}`;\r\n        let typeMap = blockMappedToType[blk.type] || {};\r\n        typeMap[blk.customId] = blk;\r\n        blockMappedToType[blk.type] = typeMap;\r\n      });\r\n\r\n      dispatch(mergeDataByPath(block.path, blockMappedToType));\r\n    },\r\n\r\n    async getCollaborators(block) {\r\n      const { collaborators } = await netInterface(\r\n        \"block.getCollaborators\",\r\n        block\r\n      );\r\n\r\n      dispatch(mergeDataByPath(`${block.path}.collaborators`, collaborators));\r\n    },\r\n\r\n    async getCollaborationRequests(block) {\r\n      const { requests } = await netInterface(\"block.getCollabRequests\", block);\r\n      dispatch(\r\n        mergeDataByPath(`${block.path}.collaborationRequests`, requests)\r\n      );\r\n    }\r\n  };\r\n}\r\n","import React from \"react\";\r\nimport { Menu, Dropdown, Icon, Button } from \"antd\";\r\n\r\nconst MenuItem = Menu.Item;\r\n\r\nexport default function AddDropdownButton(props) {\r\n  const { types, onClick, label } = props;\r\n  const menu = (\r\n    <Menu onClick={event => onClick(event.key)}>\r\n      {types.map(type => {\r\n        type = typeof type === \"string\" ? { label: type } : type;\r\n        return (\r\n          <MenuItem key={type.label}>\r\n            {type.icon && <Icon type={type.icon} />}\r\n            {type.label}\r\n          </MenuItem>\r\n        );\r\n      })}\r\n    </Menu>\r\n  );\r\n\r\n  return (\r\n    <Dropdown overlay={menu} trigger={[\"click\"]}>\r\n      <Button icon=\"plus\">{label}</Button>\r\n    </Dropdown>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Row, Col, Button } from \"antd\";\r\nimport AddDropdownButton from \"../AddDropdownButton.jsx\";\r\nimport \"./group.css\";\r\nimport SimpleBar from \"simplebar-react\";\r\nimport { permittedChildrenTypes } from \"../../models/block/block-utils\";\r\n\r\nimport \"simplebar/dist/simplebar.min.css\";\r\n\r\nclass Group extends React.Component {\r\n  state = {\r\n    fetchingChildren: true\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.loadBlockData();\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    const { group } = this.props;\r\n\r\n    if (\r\n      group &&\r\n      prevProps.group &&\r\n      group.customId !== prevProps.group.customId\r\n    ) {\r\n      this.loadBlockData();\r\n    } else {\r\n      this.updateFetchingState();\r\n    }\r\n  }\r\n\r\n  updateFetchingState() {\r\n    const { fetchingChildren } = this.state;\r\n    let newState = {};\r\n\r\n    if (this.areBlockChildrenLoaded() && fetchingChildren) {\r\n      newState.fetchingChildren = false;\r\n    }\r\n\r\n    if (Object.keys(newState).length > 0) {\r\n      this.setState(newState);\r\n    }\r\n  }\r\n\r\n  loadBlockData() {\r\n    const { fetchingChildren } = this.state;\r\n    let newState = {};\r\n\r\n    if (!this.areBlockChildrenLoaded()) {\r\n      this.fetchChildren();\r\n    } else if (fetchingChildren) {\r\n      newState.fetchingChildren = false;\r\n    }\r\n\r\n    if (Object.keys(newState).length > 0) {\r\n      this.setState(newState);\r\n    }\r\n  }\r\n\r\n  areBlockChildrenLoaded() {\r\n    const { group } = this.props;\r\n\r\n    if (!group) {\r\n      return true;\r\n    }\r\n\r\n    if (permittedChildrenTypes[group.type]) {\r\n      const typeNotLoaded = permittedChildrenTypes[group.type].find(type => {\r\n        if (!group[type]) {\r\n          return true;\r\n        }\r\n      });\r\n\r\n      if (typeNotLoaded) {\r\n        return false;\r\n      }\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  async fetchChildren() {\r\n    const { group, blockHandlers } = this.props;\r\n    await blockHandlers.getBlockChildren(group);\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      group,\r\n      children,\r\n      blockHandlers,\r\n      onClickAddChild,\r\n      name,\r\n      onEdit\r\n    } = this.props;\r\n    const { fetchingChildren } = this.state;\r\n\r\n    const childrenTypes = group ? permittedChildrenTypes[group.type] : null;\r\n\r\n    return (\r\n      <div className=\"sk-group\">\r\n        <Row className=\"sk-group-head\">\r\n          <Col span={12} style={{ minHeight: \"32px\" }}>\r\n            <span style={{ fontWeight: \"bold\" }}>\r\n              {group ? group.name : name}\r\n            </span>\r\n          </Col>\r\n          {group ? (\r\n            <Col span={12} style={{ textAlign: \"right\" }}>\r\n              {childrenTypes && childrenTypes.length > 0 && (\r\n                <AddDropdownButton\r\n                  types={childrenTypes}\r\n                  onClick={type => onClickAddChild(type, group)}\r\n                />\r\n              )}\r\n              <Button\r\n                icon=\"edit\"\r\n                onClick={() => onEdit(group)}\r\n                style={{ marginLeft: \"2px\" }}\r\n              />\r\n              <Button\r\n                icon=\"delete\"\r\n                type=\"danger\"\r\n                onClick={() => blockHandlers.onDelete(group)}\r\n                style={{ marginLeft: \"2px\" }}\r\n              />\r\n            </Col>\r\n          ) : null}\r\n        </Row>\r\n        {fetchingChildren ? (\r\n          \"Loading\"\r\n        ) : (\r\n          <SimpleBar className=\"sk-group-children\">{children}</SimpleBar>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Group;\r\n","export function makeSubmitHandler(form, onSubmit, onError) {\r\n  return function(event) {\r\n    if (event) {\r\n      event.preventDefault();\r\n    }\r\n\r\n    form.validateFieldsAndScroll(async (errors, data) => {\r\n      if (!errors) {\r\n        try {\r\n          await onSubmit(data);\r\n        } catch (thrownError) {\r\n          if (onError) {\r\n            onError(thrownError);\r\n          } else {\r\n            applyErrors(form, thrownError);\r\n          }\r\n\r\n          if (process.env.NODE_ENV === \"development\") {\r\n            console.error(thrownError);\r\n          }\r\n        }\r\n      }\r\n    });\r\n  };\r\n}\r\n\r\nexport function applyErrors(form, errors) {\r\n  let formValuesObj = {};\r\n  if (Array.isArray(errors)) {\r\n    errors.forEach(error => {\r\n      formValuesObj[error.fieldName] = {\r\n        value: error.value || form.getFieldsValue(error.fieldName),\r\n        errors: error.errors\r\n      };\r\n    });\r\n\r\n    form.setFields(formValuesObj);\r\n  } else if (typeof errors === \"object\") {\r\n    Object.keys(errors).forEach(fieldName => {\r\n      let error = errors[fieldName];\r\n      if (!error.value) {\r\n        error.value = form.getFieldsValue(fieldName);\r\n      }\r\n    });\r\n\r\n    form.setFields(errors);\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport { Form } from \"antd\";\r\nimport { applyErrors } from \"./form-utils\";\r\nimport PropTypes from \"prop-types\";\r\nimport withSpinner from \"./withSpinner.jsx\";\r\n\r\nconst formWrapperPropTypes = {\r\n  onSubmit: PropTypes.func.isRequired,\r\n  form: PropTypes.object.isRequired,\r\n  title: PropTypes.node,\r\n  errors: PropTypes.oneOfType([\r\n    PropTypes.arrayOf(\r\n      PropTypes.shape({\r\n        fieldName: PropTypes.string,\r\n        value: PropTypes.any,\r\n        errors: PropTypes.oneOfType([\r\n          PropTypes.string,\r\n          PropTypes.instanceOf(Error),\r\n          PropTypes.arrayOf(\r\n            PropTypes.oneOfType([PropTypes.string, PropTypes.instanceOf(Error)])\r\n          )\r\n        ])\r\n      })\r\n    ),\r\n    PropTypes.shape({\r\n      fieldName: PropTypes.string,\r\n      value: PropTypes.any,\r\n      errors: PropTypes.oneOfType([\r\n        PropTypes.string,\r\n        PropTypes.instanceOf(Error),\r\n        PropTypes.arrayOf(\r\n          PropTypes.oneOfType([PropTypes.string, PropTypes.instanceOf(Error)])\r\n        )\r\n      ])\r\n    })\r\n  ]),\r\n  children: PropTypes.any,\r\n  // formError: PropTypes.node,\r\n  formProps: PropTypes.object\r\n};\r\n\r\nclass FormWrapper extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      stateError: null\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.applyFieldErrors();\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    this.applyFieldErrors();\r\n  }\r\n\r\n  handleSubmit = event => {\r\n    const { form, onSubmit, toggleSpinning } = this.props;\r\n    if (event) {\r\n      event.preventDefault();\r\n    }\r\n\r\n    form.validateFieldsAndScroll(async (errors, data) => {\r\n      if (!errors) {\r\n        try {\r\n          if (toggleSpinning) {\r\n            toggleSpinning();\r\n          }\r\n\r\n          await onSubmit(data);\r\n        } catch (thrownError) {\r\n          if (thrownError instanceof Error) {\r\n            this.setState({\r\n              stateError: thrownError.message\r\n            });\r\n          } else {\r\n            applyErrors(form, thrownError);\r\n          }\r\n\r\n          if (process.env.NODE_ENV === \"development\") {\r\n            console.error(thrownError);\r\n          }\r\n        } finally {\r\n          if (toggleSpinning) {\r\n            toggleSpinning();\r\n          }\r\n        }\r\n      }\r\n    });\r\n  };\r\n\r\n  applyFieldErrors() {\r\n    const { form, errors } = this.props;\r\n    if (errors) {\r\n      applyErrors(form, errors);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { title, children, formProps } = this.props;\r\n    const { stateError } = this.state;\r\n\r\n    return (\r\n      <Form {...formProps} onSubmit={this.handleSubmit}>\r\n        {title && <Form.Item>{title}</Form.Item>}\r\n        {stateError && (\r\n          <Form.Item style={{ color: \"red\" }}>\r\n            {typeof stateError === \"string\" ? (\r\n              <h3 style={{ color: \"red\", lineHeight: \"1.25em\" }}>\r\n                {stateError}\r\n              </h3>\r\n            ) : (\r\n              stateError\r\n            )}\r\n          </Form.Item>\r\n        )}\r\n        {children}\r\n      </Form>\r\n    );\r\n  }\r\n}\r\n\r\nFormWrapper.propTypes = formWrapperPropTypes;\r\n\r\nexport default withSpinner(FormWrapper);\r\n","import React from \"react\";\r\nimport { Spin, Icon } from \"antd\";\r\n\r\nexport default function withSpinner(component) {\r\n  const Component = component;\r\n  const displayName = `withSpinner(${component.displayName ||\r\n    component.name ||\r\n    \"Component\"})`;\r\n\r\n  class WithSpinner extends React.Component {\r\n    visible = null;\r\n    state = {\r\n      spinning: false\r\n    };\r\n\r\n    componentDidMount() {\r\n      this.visible = true;\r\n    }\r\n\r\n    componentDidUpdate() {\r\n      this.visible = true;\r\n    }\r\n\r\n    componentWillUnmount() {\r\n      this.visible = false;\r\n    }\r\n\r\n    toggleSpinning = () => {\r\n      if (this.visible) {\r\n        this.setState(state => {\r\n          return {\r\n            spinning: !state.spinning\r\n          };\r\n        });\r\n      }\r\n    };\r\n\r\n    render() {\r\n      const { spinning } = this.state;\r\n      const { forwardedRef } = this.props;\r\n\r\n      return (\r\n        <Spin\r\n          spinning={spinning}\r\n          indicator={<Icon type=\"loading\" style={{ fontSize: \"2em\" }} />}\r\n        >\r\n          <Component\r\n            {...this.props}\r\n            toggleSpinning={this.toggleSpinning}\r\n            ref={forwardedRef}\r\n          />\r\n        </Spin>\r\n      );\r\n    }\r\n  }\r\n\r\n  function forwardRef(props, ref) {\r\n    return <WithSpinner {...props} forwardedRef={ref} ref={props.spinnerRef} />;\r\n  }\r\n\r\n  WithSpinner.displayName = displayName;\r\n  forwardRef.displayName = displayName;\r\n  return React.forwardRef(forwardRef);\r\n}\r\n","import React from \"react\";\r\nimport { Form } from \"antd\";\r\nimport get from \"lodash/get\";\r\nimport FormWrapper from \"../FormWrapper\";\r\n\r\nconst FormItem = Form.Item;\r\n\r\nclass ComputeForm extends React.Component {\r\n  static defaultProps = {\r\n    data: {}\r\n  };\r\n\r\n  onSubmit = async data => {\r\n    const { form, model } = this.props;\r\n\r\n    if (model.onSubmit) {\r\n      return model.onSubmit(data, form);\r\n    }\r\n  };\r\n\r\n  renderField(field, key, form, data) {\r\n    if (field.render) {\r\n      return field.render(form, data, key, field);\r\n    } else if (field.component) {\r\n      const FieldComponent = field.component;\r\n      const renderedFieldComponent = <FieldComponent {...field.props} />;\r\n      return (\r\n        <FormItem\r\n          key={key}\r\n          label={field.label}\r\n          labelCol={field.labelCol}\r\n          wrapperCol={field.wrapperCol}\r\n          extra={field.extra}\r\n          hasFeedback={field.hasFeedback}\r\n        >\r\n          {field.noDecorate\r\n            ? renderedFieldComponent\r\n            : form.getFieldDecorator(key, {\r\n                rules: field.rules,\r\n                validateFirst: true,\r\n                initialValue: field.getValue\r\n                  ? field.getValue(data, key, field)\r\n                  : get(data, key) || field.initialValue,\r\n                valuePropName: field.valuePropName || \"value\"\r\n              })(renderedFieldComponent)}\r\n        </FormItem>\r\n      );\r\n    }\r\n  }\r\n\r\n  renderFields() {\r\n    const { form, model, data } = this.props;\r\n    let computedForm = [];\r\n    for (const key in model.fields) {\r\n      const field = model.fields[key];\r\n      computedForm.push(this.renderField(field, key, form, data));\r\n    }\r\n\r\n    return computedForm;\r\n  }\r\n\r\n  render() {\r\n    const { children, form } = this.props;\r\n\r\n    return (\r\n      <FormWrapper form={form} onSubmit={this.onSubmit}>\r\n        {this.renderFields()}\r\n        {children}\r\n      </FormWrapper>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ComputeForm;\r\n","export function makeDescriptorFieldsRequired(descriptor, fields = []) {\r\n  descriptor = { ...descriptor };\r\n  fields.forEach(field => {\r\n    let rule = descriptor[field];\r\n\r\n    if (rule) {\r\n      let replaceRule = [{ required: true, message: `${field} is required` }];\r\n\r\n      if (Array.isArray(rule)) {\r\n        replaceRule = replaceRule.concat(rule);\r\n      } else {\r\n        replaceRule.push(rule);\r\n      }\r\n\r\n      descriptor[field] = replaceRule;\r\n    }\r\n  });\r\n\r\n  return descriptor;\r\n}\r\n\r\nexport function makeConfirmValidator(\r\n  field0,\r\n  field1,\r\n  form,\r\n  msg = \"values do not match\"\r\n) {\r\n  return function validatePassword(rule, value, cb, source) {\r\n    const value0 = form.getFieldValue(field0);\r\n    const value1 = form.getFieldValue(field1);\r\n    let fieldToUpdate = null;\r\n    let fieldValue = null;\r\n    let error = null;\r\n\r\n    if (value0 && value1 && value0 === value1) {\r\n      cb();\r\n    } else {\r\n      cb(msg);\r\n      error = msg;\r\n    }\r\n\r\n    if (rule.field === field0) {\r\n      fieldToUpdate = field1;\r\n      fieldValue = value1;\r\n    } else {\r\n      fieldToUpdate = field0;\r\n      fieldValue = value0;\r\n    }\r\n\r\n    form.setFields({ [fieldToUpdate]: { error, value: fieldValue } });\r\n  };\r\n}\r\n\r\nexport function makeNameExistsValidator(\r\n  existingNames,\r\n  msg = \"name already exist\"\r\n) {\r\n  return function validatePassword(rule, value, cb, source) {\r\n    value = value.toLowerCase();\r\n    if (existingNames.find(name => nameExists(name))) {\r\n      cb(msg);\r\n    }\r\n\r\n    cb();\r\n\r\n    function nameExists(name) {\r\n      return name.toLowerCase() === value.toLowerCase();\r\n    }\r\n  };\r\n}\r\n\r\nexport function promisifyAsyncValidator(v) {\r\n  return function(data) {\r\n    return new Promise(function(success, reject) {\r\n      v(data, function(errors, fields) {\r\n        if (errors) {\r\n          reject({ errors, fields });\r\n        } else {\r\n          success(fields);\r\n        }\r\n      });\r\n    });\r\n  };\r\n}\r\n","import { makeDescriptorFieldsRequired } from \"../../utils/descriptor\";\r\nimport trim from \"../../utils/trim\";\r\n\r\nconst textPattern = {\r\n  pattern: /\\w+/,\r\n  message: \"only alphanumeric characters allowed\"\r\n};\r\n\r\nexport const blockDescriptor = {\r\n  name: [\r\n    {\r\n      type: \"string\",\r\n      max: 50,\r\n      transform: trim\r\n    },\r\n    textPattern\r\n  ],\r\n  description: [\r\n    {\r\n      type: \"string\",\r\n      max: 250\r\n    },\r\n    {\r\n      pattern: /[\\w\\s]+/,\r\n      message: \"only alphanumeric characters allowed\"\r\n    }\r\n  ],\r\n  expectedEndAt: [\r\n    {\r\n      type: \"number\"\r\n    }\r\n  ],\r\n  completedAt: [\r\n    {\r\n      type: \"number\"\r\n    }\r\n  ]\r\n};\r\n\r\nconst requiredTaskFields = [\"description\"];\r\nexport const taskDescriptor = makeDescriptorFieldsRequired(\r\n  blockDescriptor,\r\n  requiredTaskFields\r\n);\r\n\r\nconst requiredGroupFields = [\"name\"];\r\nexport const groupDescriptor = makeDescriptorFieldsRequired(\r\n  blockDescriptor,\r\n  requiredGroupFields\r\n);\r\n\r\nconst requiredProjectFields = [\"name\"];\r\nexport const projectDescriptor = makeDescriptorFieldsRequired(\r\n  blockDescriptor,\r\n  requiredProjectFields\r\n);\r\n\r\nconst requiredOrgFields = [\"name\"];\r\n\r\nexport const orgDescriptor = makeDescriptorFieldsRequired(\r\n  blockDescriptor,\r\n  requiredOrgFields\r\n);\r\n","export default function trim(value) {\r\n  if (value && value.trim) {\r\n    return value.trim();\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport { Drawer } from \"antd\";\r\nimport { getWindowWidth } from \"../utils/window\";\r\nimport throttle from \"lodash/throttle\";\r\n\r\nexport default function modalWrap(component, defaultTitle) {\r\n  class ModalWrappedComponent extends React.Component {\r\n    constructor(props) {\r\n      super(props);\r\n      this.updateWindowData();\r\n      this.updateWindowData = throttle(this.updateWindowData, 300);\r\n\r\n      this.state = {\r\n        currentDeviceWidth: getWindowWidth()\r\n      };\r\n    }\r\n\r\n    componentDidMount() {\r\n      window.addEventListener(\"resize\", this.updateWindowData);\r\n      this.modalIsMounted = true;\r\n    }\r\n\r\n    componentWillUnmount() {\r\n      window.removeEventListener(\"resize\", this.updateWindowData);\r\n      this.modalIsMounted = false;\r\n    }\r\n\r\n    updateWindowData = () => {\r\n      if (this.modalIsMounted) {\r\n        this.setState({ currentDeviceWidth: getWindowWidth() });\r\n      }\r\n    };\r\n\r\n    render() {\r\n      const WrappedComponent = component;\r\n      const { visible, onClose, title } = this.props;\r\n      const { currentDeviceWidth } = this.state;\r\n      // const windowWidth = getWindowWidth();\r\n      const windowWidth = currentDeviceWidth;\r\n      const divider = windowWidth <= 500 ? 1 : windowWidth <= 700 ? 3 / 2 : 2;\r\n      // : windowWidth <= 1020\r\n      // ? 2\r\n      // : 3;\r\n      let drawerWidth = windowWidth / divider;\r\n\r\n      if (!visible) {\r\n        return null;\r\n      }\r\n\r\n      return (\r\n        <Drawer\r\n          visible={visible}\r\n          onClose={onClose}\r\n          width={drawerWidth}\r\n          title={title || defaultTitle}\r\n        >\r\n          <WrappedComponent {...this.props} />\r\n        </Drawer>\r\n      );\r\n    }\r\n  }\r\n\r\n  ModalWrappedComponent.displayName = `modalWrap(${component.displayName ||\r\n    component.name ||\r\n    \"Component\"})`;\r\n\r\n  return ModalWrappedComponent;\r\n}\r\n","import React from \"react\";\r\nimport ComputeForm from \"../compute-form/ComputeForm.jsx\";\r\nimport { Input, Button, Form } from \"antd\";\r\nimport { groupDescriptor as blockDescriptor } from \"../../models/block/descriptor\";\r\nimport { makeNameExistsValidator } from \"../../utils/descriptor\";\r\nimport modalWrap from \"../modalWrap.jsx\";\r\n\r\nconst TextArea = Input.TextArea;\r\n\r\nclass EditGroup extends React.Component {\r\n  static defaultProps = {\r\n    data: {}\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    const data = props.data || {};\r\n    const self = this;\r\n    this.model = {\r\n      fields: {\r\n        name: {\r\n          component: Input,\r\n          props: { autoComplete: \"off\" },\r\n          label: \"Name\",\r\n          labelCol: null,\r\n          wrapperCol: null,\r\n          rules: [\r\n            ...blockDescriptor.name,\r\n            {\r\n              validator: makeNameExistsValidator(\r\n                props.existingGroups,\r\n                \"group exists\"\r\n              )\r\n            }\r\n          ],\r\n          initialValue: data.name\r\n        },\r\n        description: {\r\n          component: TextArea,\r\n          props: { autosize: { minRows: 2, maxRows: 6 } },\r\n          label: \"Description\",\r\n          labelCol: null,\r\n          wrapperCol: null,\r\n          rules: blockDescriptor.description,\r\n          initialValue: data.description\r\n        },\r\n        submit: {\r\n          component: Button,\r\n          props: {\r\n            type: \"primary\",\r\n            children: \"Submit\",\r\n            block: true,\r\n            htmlType: \"submit\"\r\n          },\r\n          labelCol: null,\r\n          wrapperCol: null,\r\n          noDecorate: true\r\n        }\r\n      },\r\n      formProps: {\r\n        hideRequiredMark: true\r\n      },\r\n      onSubmit: self.onSubmit\r\n    };\r\n  }\r\n\r\n  onSubmit = data => {\r\n    data.type = \"group\";\r\n    return this.props.onSubmit(data);\r\n  };\r\n\r\n  render() {\r\n    return <ComputeForm model={this.model} form={this.props.form} />;\r\n  }\r\n}\r\n\r\nexport default modalWrap(Form.create()(EditGroup), \"Group\");\r\n","import React from \"react\";\r\nimport \"./priority.css\";\r\n\r\nexport const priorityToColorMap = {\r\n  \"not important\": \"#EACA2C\",\r\n  important: \"#7ED321\",\r\n  \"very important\": \"#EB5424\"\r\n};\r\n\r\nexport default function Priority(props) {\r\n  const { level, cover } = props;\r\n  const style = {\r\n    [cover ? \"backgroundColor\" : \"color\"]: priorityToColorMap[level]\r\n  };\r\n\r\n  return (\r\n    <span className=\"sk-priority\" style={style}>\r\n      {level}\r\n    </span>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Dropdown, Menu } from \"antd\";\r\nimport Priority, { priorityToColorMap } from \"./Priority.jsx\";\r\n\r\nexport default class EditPriority extends React.Component {\r\n  render() {\r\n    const { value, onChange } = this.props;\r\n    const menu = (\r\n      <Menu onClick={({ key }) => onChange(key)}>\r\n        <Menu.Item key=\"not important\">\r\n          <Priority level=\"not important\" cover />\r\n        </Menu.Item>\r\n        <Menu.Item key=\"important\">\r\n          <Priority level=\"important\" cover />\r\n        </Menu.Item>\r\n        <Menu.Item key=\"very important\">\r\n          <Priority level=\"very important\" cover />\r\n        </Menu.Item>\r\n      </Menu>\r\n    );\r\n\r\n    return (\r\n      <Dropdown overlay={menu} trigger={[\"click\"]}>\r\n        <span\r\n          className=\"sk-priority\"\r\n          style={{\r\n            backgroundColor: priorityToColorMap[value],\r\n            cursor: \"pointer\"\r\n          }}\r\n        >\r\n          {value}\r\n        </span>\r\n      </Dropdown>\r\n    );\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport { Row, Col } from \"antd\";\r\nimport \"./thumbnail.css\";\r\n\r\nexport default function Thumbnail(props) {\r\n  const {\r\n    data,\r\n    renderInfo,\r\n    onClick,\r\n    className,\r\n    style,\r\n    colorStyle,\r\n    colorClassName,\r\n    colorSpan,\r\n    hoverable\r\n  } = props;\r\n  const cSpan = colorSpan;\r\n  const hov = typeof hoverable !== \"boolean\" ? true : hoverable;\r\n\r\n  return (\r\n    <div\r\n      className={\r\n        \"sk-thumbnail \" +\r\n        (hov ? \"sk-thumbnail-hoverable \" : \"\") +\r\n        (className || \"\")\r\n      }\r\n      style={style}\r\n      onClick={onClick}\r\n    >\r\n      <Row gutter={16} style={{ height: \"100%\" }}>\r\n        <Col span={cSpan} style={{ height: \"100%\" }}>\r\n          <span\r\n            style={{ backgroundColor: data.color, ...colorStyle }}\r\n            className={\"sk-thumbnail-color \" + colorClassName}\r\n          />\r\n        </Col>\r\n        <Col span={24 - cSpan} style={{ height: \"100%\" }}>\r\n          {renderInfo(data, props)}\r\n        </Col>\r\n      </Row>\r\n    </div>\r\n  );\r\n}\r\n\r\nThumbnail.defaultProps = {\r\n  className: \"\",\r\n  colorSpan: 8,\r\n  colorClassName: \"\"\r\n};\r\n","import React from \"react\";\r\nimport { Row, Col, Switch, Button } from \"antd\";\r\nimport Thumbnail from \"../thumbnail/Thumbnail.jsx\";\r\n\r\nexport default class TaskCollaborator extends React.Component {\r\n  render() {\r\n    const { collaborator, collaboratorTaskData, onUnassign } = this.props;\r\n\r\n    return (\r\n      <Thumbnail\r\n        data={collaborator}\r\n        colorSpan={4}\r\n        renderInfo={() => {\r\n          return (\r\n            <Row>\r\n              <Col span={14}>{collaborator.name}</Col>\r\n              <Col span={10} style={{ textAlign: \"right\" }}>\r\n                <Switch\r\n                  disabled={true}\r\n                  checked={collaboratorTaskData.data}\r\n                  onChange={null}\r\n                  style={{ marginRight: \"16px\" }}\r\n                />\r\n                <Button type=\"danger\" icon=\"close\" onClick={onUnassign} />\r\n              </Col>\r\n            </Row>\r\n          );\r\n        }}\r\n        style={{\r\n          height: \"60px\",\r\n          padding: \"4px\",\r\n          cursor: \"inherit\"\r\n        }}\r\n        hoverable={false}\r\n      />\r\n    );\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport Thumbnail from \"../thumbnail/Thumbnail.jsx\";\r\nimport moment from \"moment\";\r\n\r\nexport default class CollaboratorThumbnail extends React.Component {\r\n  getLatestStatus(statusHistory = []) {\r\n    return statusHistory[statusHistory.length - 1];\r\n  }\r\n\r\n  render() {\r\n    const { collaborator, style, onClick } = this.props;\r\n    let headerValue = collaborator.name || collaborator.email;\r\n    let latestStatus = this.getLatestStatus(collaborator.statusHistory);\r\n\r\n    return (\r\n      <Thumbnail\r\n        data={collaborator}\r\n        onClick={onClick}\r\n        renderInfo={() => {\r\n          return (\r\n            <React.Fragment>\r\n              <h5>{headerValue}</h5>\r\n              {collaborator.name && (\r\n                <span className=\"sk-gl-thumbnail-text\">\r\n                  {collaborator.email}\r\n                </span>\r\n              )}\r\n              {collaborator.expiresAt && (\r\n                <span className=\"sk-gl-thumbnail-text\">\r\n                  expires {moment(collaborator.expiresAt).fromNow()}\r\n                </span>\r\n              )}\r\n              {latestStatus && (\r\n                <span className=\"sk-gl-thumbnail-text\">\r\n                  {latestStatus.status}\r\n                </span>\r\n              )}\r\n            </React.Fragment>\r\n          );\r\n        }}\r\n        style={{\r\n          padding: \"4px\",\r\n          maxWidth: \"300px\",\r\n          height: \"80px\",\r\n          ...style\r\n        }}\r\n        colorSpan={collaborator.color ? 4 : 0}\r\n        hoverable={!!onClick}\r\n      />\r\n    );\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport TaskCollaborator from \"./TaskCollaborator.jsx\";\r\nimport { Form, Select } from \"antd\";\r\nimport dotProp from \"dot-prop-immutable\";\r\nimport CollaboratorThumbnail from \"../collaborator/Thumnail.jsx\";\r\n\r\nexport default class AssignTask extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.existingTaskCollaboratorsIdMap = {};\r\n    this.collaboratorsIdMap = {};\r\n    const defaultTaskCollaborators = props.defaultTaskCollaborators || [];\r\n    defaultTaskCollaborators.forEach(c => {\r\n      this.existingTaskCollaboratorsIdMap[c.userId] = c;\r\n    });\r\n\r\n    const collaborators = props.collaborators || [];\r\n    collaborators.forEach(c => {\r\n      this.collaboratorsIdMap[c.customId] = c;\r\n    });\r\n\r\n    this.error = null;\r\n  }\r\n\r\n  onAddCollaborator = collaborator => {\r\n    const { form, user } = this.props;\r\n    if (this.existingTaskCollaboratorsIdMap[collaborator.customId]) {\r\n      this.error = \"collaborator is already assigned\";\r\n      return;\r\n    }\r\n\r\n    let collaborators = form.getFieldValue(\"taskCollaborators\");\r\n    collaborators.push({\r\n      userId: collaborator.customId,\r\n      assignedAt: Date.now(),\r\n      completedAt: 0,\r\n      assignedBy: user.customId\r\n    });\r\n\r\n    this.error = null;\r\n    this.existingTaskCollaboratorsIdMap[collaborator.customId] = collaborator;\r\n    form.setFieldsValue({ taskCollaborators: collaborators });\r\n  };\r\n\r\n  onUnassignCollaborator = (collaborator, index) => {\r\n    const { form } = this.props;\r\n\r\n    if (!this.existingTaskCollaboratorsIdMap[collaborator.userId]) {\r\n      this.error = \"collaborator is not assigned\";\r\n      return;\r\n    }\r\n\r\n    let collaborators = form.getFieldValue(\"taskCollaborators\");\r\n    collaborators = dotProp.delete(collaborators, `${index}`);\r\n    this.error = null;\r\n    delete this.existingTaskCollaboratorsIdMap[collaborator.userId];\r\n    form.setFieldsValue({ taskCollaborators: collaborators });\r\n  };\r\n\r\n  renderSelectCollaborators(collaborators) {\r\n    let options = [];\r\n\r\n    collaborators.forEach((c, index) => {\r\n      if (!this.existingTaskCollaboratorsIdMap[c.customId]) {\r\n        options.push(\r\n          <Select.Option value={index} key={c.customId}>\r\n            <CollaboratorThumbnail collaborator={c} />\r\n          </Select.Option>\r\n        );\r\n      }\r\n    });\r\n\r\n    return options.length > 0 ? (\r\n      <Form.Item>\r\n        <Select\r\n          placeholder=\"Assign collaborator\"\r\n          onChange={i => {\r\n            this.onAddCollaborator(collaborators[i]);\r\n          }}\r\n        >\r\n          {options}\r\n        </Select>\r\n      </Form.Item>\r\n    ) : null;\r\n  }\r\n\r\n  renderCollaborators(taskCollaborators) {\r\n    return taskCollaborators.map((c, i) => {\r\n      return (\r\n        <TaskCollaborator\r\n          key={c.userId}\r\n          collaborator={this.collaboratorsIdMap[c.userId]}\r\n          collaboratorTaskData={c}\r\n          onToggle={null}\r\n          onUnassign={() => this.onUnassignCollaborator(c, i)}\r\n        />\r\n      );\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const { form, collaborators, defaultTaskCollaborators } = this.props;\r\n\r\n    form.getFieldDecorator(\"taskCollaborators\", {\r\n      initialValue: defaultTaskCollaborators || []\r\n    });\r\n\r\n    const taskCollaborators = form.getFieldValue(\"taskCollaborators\");\r\n    return (\r\n      <div>\r\n        {this.renderCollaborators(taskCollaborators)}\r\n        {this.renderSelectCollaborators(collaborators)}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport EditPriority from \"./EditPriority.jsx\";\r\nimport ComputeForm from \"../compute-form/ComputeForm.jsx\";\r\nimport { Input, Button, DatePicker, Form } from \"antd\";\r\nimport { taskDescriptor as blockDescriptor } from \"../../models/block/descriptor\";\r\nimport modalWrap from \"../modalWrap.jsx\";\r\nimport AssignTask from \"./AssignTask.jsx\";\r\n\r\nconst TextArea = Input.TextArea;\r\n\r\nclass EditTask extends React.Component {\r\n  static defaultProps = {\r\n    data: {}\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    const self = this;\r\n    const data = props.data || {};\r\n\r\n    this.model = {\r\n      fields: {\r\n        description: {\r\n          component: TextArea,\r\n          props: { autosize: { minRows: 2, maxRows: 6 } },\r\n          label: \"Description\",\r\n          labelCol: null,\r\n          wrapperCol: null,\r\n          rules: blockDescriptor.description,\r\n          initialValue: data.description\r\n        },\r\n        priority: {\r\n          component: EditPriority,\r\n          props: {},\r\n          label: \"Priority\",\r\n          labelCol: null,\r\n          wrapperCol: null,\r\n          initialValue: data.data\r\n            ? data.data.find(d => d.dataType === \"priority\")\r\n            : \"not important\"\r\n        },\r\n        taskCollaborators: {\r\n          render(form) {\r\n            return (\r\n              <Form.Item label=\"Collaborators\" key=\"taskCollaborators\">\r\n                <AssignTask\r\n                  key=\"assignTasks\"\r\n                  form={form}\r\n                  collaborators={props.collaborators}\r\n                  defaultTaskCollaborators={\r\n                    data.taskCollaborators || props.defaultAssignedTo\r\n                  }\r\n                  user={props.user}\r\n                />\r\n              </Form.Item>\r\n            );\r\n          }\r\n        },\r\n        expectedEndAt: {\r\n          component: DatePicker,\r\n          props: {\r\n            showTime: true,\r\n            format: \"YYYY-MM-DD HH:mm:ss\",\r\n            placeholder: \"Complete At\"\r\n          },\r\n          label: \"Complete At\",\r\n          labelCol: null,\r\n          wrapperCol: null,\r\n          initialValue: data.completeAt\r\n        },\r\n        submit: {\r\n          component: Button,\r\n          props: {\r\n            type: \"primary\",\r\n            children: \"Submit\",\r\n            block: true,\r\n            htmlType: \"submit\"\r\n          },\r\n          labelCol: null,\r\n          wrapperCol: null,\r\n          noDecorate: true\r\n        }\r\n      },\r\n      formProps: {\r\n        hideRequiredMark: true\r\n      },\r\n      onSubmit: self.onSubmit\r\n    };\r\n  }\r\n\r\n  onSubmit = submittedData => {\r\n    submittedData.type = \"task\";\r\n    return this.props.onSubmit(submittedData);\r\n  };\r\n\r\n  render() {\r\n    return <ComputeForm model={this.model} form={this.props.form} />;\r\n  }\r\n}\r\n\r\nexport default modalWrap(Form.create()(EditTask), \"Task\");\r\n","import React from \"react\";\r\nimport { Button, Switch, Row, Col } from \"antd\";\r\nimport Priority from \"./Priority.jsx\";\r\nimport \"./minitask.css\";\r\n\r\nclass Task extends React.Component {\r\n  getCollaborator() {\r\n    const { task, user } = this.props;\r\n    if (task.taskCollaborators) {\r\n      return task.taskCollaborators.find(\r\n        collaborator => collaborator.userId === user.customId\r\n      );\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { task, blockHandlers, onEdit } = this.props;\r\n    const collaborator = this.getCollaborator();\r\n\r\n    return (\r\n      <div className=\"sk-minitask\">\r\n        <Row>\r\n          <Col span={4}>\r\n            <Switch\r\n              checked={collaborator && !!collaborator.completedAt}\r\n              onChange={() => blockHandlers.onToggle(task)}\r\n              disabled={collaborator ? false : true}\r\n              title={collaborator ? \"toggle task\" : \"task is not yet assigned\"}\r\n            />\r\n          </Col>\r\n          <Col span={16} className=\"sk-minitask-priority\">\r\n            <Priority level={task.priority} cover />\r\n          </Col>\r\n          <Col span={4} className=\"sk-minitask-top-extra\">\r\n            <Button\r\n              icon=\"delete\"\r\n              type=\"danger\"\r\n              className=\"sk-minitask-close\"\r\n              onClick={() => blockHandlers.onDelete(task)}\r\n              title=\"delete task\"\r\n            />\r\n          </Col>\r\n        </Row>\r\n        <Row className=\"sk-minitask-desc\">\r\n          <Col span={16} offset={4}>\r\n            <p>{task.description}</p>\r\n          </Col>\r\n        </Row>\r\n        <Row>\r\n          <Col span={24} className=\"sk-minitask-footer-right\">\r\n            <Button\r\n              icon=\"edit\"\r\n              onClick={() => onEdit(task)}\r\n              title=\"edit task\"\r\n            />\r\n          </Col>\r\n        </Row>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Task;\r\n","import React from \"react\";\r\nimport ComputeForm from \"../compute-form/ComputeForm.jsx\";\r\nimport { Input, Button, Form } from \"antd\";\r\nimport { projectDescriptor as blockDescriptor } from \"../../models/block/descriptor\";\r\nimport { makeNameExistsValidator } from \"../../utils/descriptor\";\r\nimport modalWrap from \"../modalWrap.jsx\";\r\n\r\nconst TextArea = Input.TextArea;\r\n\r\nclass EditProject extends React.Component {\r\n  static defaultProps = {\r\n    data: {}\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    const self = this;\r\n    const data = props.data || {};\r\n\r\n    this.model = {\r\n      fields: {\r\n        name: {\r\n          component: Input,\r\n          props: { autoComplete: \"off\" },\r\n          label: \"Name\",\r\n          labelCol: null,\r\n          wrapperCol: null,\r\n          rules: [\r\n            ...blockDescriptor.name,\r\n            {\r\n              validator: makeNameExistsValidator(\r\n                props.existingProjects,\r\n                \"project exists\"\r\n              )\r\n            }\r\n          ],\r\n          initialValue: data.name\r\n        },\r\n        description: {\r\n          component: TextArea,\r\n          props: { autosize: { minRows: 2, maxRows: 6 } },\r\n          label: \"Description\",\r\n          labelCol: null,\r\n          wrapperCol: null,\r\n          rules: blockDescriptor.description,\r\n          initialValue: data.description\r\n        },\r\n        submit: {\r\n          component: Button,\r\n          props: {\r\n            type: \"primary\",\r\n            children: \"Submit\",\r\n            block: true,\r\n            htmlType: \"submit\"\r\n          },\r\n          labelCol: null,\r\n          wrapperCol: null,\r\n          noDecorate: true\r\n        }\r\n      },\r\n      formProps: {\r\n        hideRequiredMark: true\r\n      },\r\n      onSubmit: self.onSubmit\r\n    };\r\n  }\r\n\r\n  onSubmit = data => {\r\n    data.type = \"project\";\r\n    return this.props.onSubmit(data);\r\n  };\r\n\r\n  render() {\r\n    return <ComputeForm model={this.model} form={this.props.form} />;\r\n  }\r\n}\r\n\r\nexport default modalWrap(Form.create()(EditProject), \"Project\");\r\n","import React from \"react\";\r\nimport Thumbnail from \"../thumbnail/Thumbnail.jsx\";\r\nimport \"./project-thumbnail.css\";\r\n\r\nexport default function ProjectThumbnail(props) {\r\n  const { project, onClick, className, style } = props;\r\n  return (\r\n    <Thumbnail\r\n      data={project}\r\n      onClick={onClick}\r\n      renderInfo={() => {\r\n        return <h3>{project.name}</h3>;\r\n      }}\r\n      className={className}\r\n      style={{\r\n        height: \"70px\",\r\n        padding: \"4px\",\r\n        ...style\r\n      }}\r\n      colorSpan={5}\r\n    />\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport dotProp from \"dot-prop-immutable\";\r\nimport RootGroup from \"./RootGroup.jsx\";\r\n\r\nfunction mapStateToProps(state, props) {\r\n  return {\r\n    ...props,\r\n    rootBlock: dotProp.get(state, props.path) || props.rootBlock\r\n  };\r\n}\r\n\r\nfunction G(props) {\r\n  return <RootGroup {...props} />;\r\n}\r\n\r\nexport default connect(mapStateToProps)(G);\r\n","export function waitForPromises(promises) {\r\n  return new Promise(function(resolve, reject) {\r\n    function reportPromise(p) {\r\n      p.then(data => {\r\n        result.push({ data, success: true });\r\n        nextPromise();\r\n      }).catch(error => {\r\n        result.push({ error, failed: true });\r\n        nextPromise();\r\n      });\r\n    }\r\n\r\n    function nextPromise() {\r\n      if (index === promises.length) {\r\n        resolve(result);\r\n      } else {\r\n        let p = promises[index];\r\n        index += 1;\r\n        reportPromise(p);\r\n      }\r\n    }\r\n\r\n    let result = [];\r\n    let index = 0;\r\n    nextPromise();\r\n  });\r\n}\r\n","import React from \"react\";\r\nimport { DatePicker, Input, Form, Button, Divider, Row, Col } from \"antd\";\r\nimport dotProp from \"dot-prop-immutable\";\r\nimport asyncValidator from \"async-validator\";\r\nimport {\r\n  promisifyAsyncValidator,\r\n  makeNameExistsValidator\r\n} from \"../../utils/descriptor\";\r\nimport { waitForPromises } from \"../../utils/promise\";\r\nimport { indexArray } from \"../../utils/object\";\r\nimport moment from \"moment\";\r\n\r\nexport default class CollaboratorForm extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.errors = {};\r\n    let existingEmailAddrs = Object.keys({\r\n      ...indexArray(props.existingCollaborators, { path: \"email\" }),\r\n      ...indexArray(props.existingCollaborationRequests, { path: \"email\" })\r\n    });\r\n\r\n    const emailDescriptor = [\r\n      {\r\n        type: \"email\",\r\n        required: true,\r\n        validator: makeNameExistsValidator(\r\n          existingEmailAddrs,\r\n          \"collaborator already exists, or has been previously sent a request\"\r\n        )\r\n      }\r\n    ];\r\n    const messageDescriptor = [{ type: \"string\", max: 250 }];\r\n    const descriptor = {\r\n      email: emailDescriptor,\r\n      message: messageDescriptor\r\n    };\r\n\r\n    this.validateCollaborator = new asyncValidator(descriptor);\r\n    this.emailValidator = new asyncValidator({ email: emailDescriptor });\r\n    this.messageValidator = new asyncValidator({ message: messageDescriptor });\r\n    this.pValidator = promisifyAsyncValidator(\r\n      this.validateCollaborator.validate.bind(this.validateCollaborator)\r\n    );\r\n  }\r\n\r\n  clearHelpers = (index, type) => {\r\n    if (type) {\r\n      if (this.errors[index]) {\r\n        this.errors[index][type] = null;\r\n      }\r\n    } else {\r\n      delete this.errors[index];\r\n    }\r\n  };\r\n\r\n  clearErrors = () => {\r\n    this.errors = {};\r\n  };\r\n\r\n  setError = (index, emailError, messageError) => {\r\n    this.errors[index] = { email: emailError, message: messageError };\r\n  };\r\n\r\n  hasError = () => {\r\n    return !!Object.keys(this.errors).length;\r\n  };\r\n\r\n  getError = (index, type = \"email\") => {\r\n    return dotProp.get(this.errors, `${index}.${type}`);\r\n  };\r\n\r\n  validate = async () => {\r\n    const { form } = this.props;\r\n    this.clearErrors();\r\n    let collaborators = form.getFieldValue(\"collaborators\");\r\n    let validationPromises = [];\r\n    collaborators.forEach(c => {\r\n      validationPromises.push(this.pValidator(c));\r\n    });\r\n\r\n    let result = await waitForPromises(validationPromises);\r\n    result.forEach((r, index) => {\r\n      if (r.failed) {\r\n        this.setError(\r\n          index,\r\n          dotProp.get(r.error.fields, `email.0.message`),\r\n          dotProp.get(r.error.fields, `message.0.message`)\r\n        );\r\n      }\r\n    });\r\n\r\n    const hasError = this.hasError();\r\n\r\n    // to force the form to re-render\r\n    if (hasError) {\r\n      form.setFieldsValue({ collaborators });\r\n    }\r\n\r\n    return !hasError;\r\n  };\r\n\r\n  onAddField = () => {\r\n    const { form } = this.props;\r\n    let collaborators = form.getFieldValue(\"collaborators\");\r\n    collaborators = collaborators.concat([{ email: \"\", expiresAt: null }]);\r\n    form.setFieldsValue({ collaborators });\r\n  };\r\n\r\n  onDeleteField = index => {\r\n    const { form } = this.props;\r\n    let collaborators = form.getFieldValue(\"collaborators\");\r\n    collaborators = dotProp.delete(collaborators, index);\r\n    this.clearHelpers(index);\r\n    form.setFieldsValue({ collaborators });\r\n  };\r\n\r\n  onUpdateField = (index, field, data, validator) => {\r\n    const { form } = this.props;\r\n    let collaborators = form.getFieldValue(\"collaborators\");\r\n    validator.validate({ [field]: data }, errors => {\r\n      if (errors) {\r\n        this.setError(index, errors[0].message);\r\n      } else {\r\n        this.clearHelpers(index, field);\r\n      }\r\n\r\n      collaborators = dotProp.set(collaborators, `${index}.${field}`, data);\r\n      form.setFieldsValue({ collaborators });\r\n    });\r\n  };\r\n\r\n  onUpdateEmail = (index, email) => {\r\n    this.onUpdateField(index, \"email\", email, this.emailValidator);\r\n  };\r\n\r\n  onUpdateMessage = (index, message) => {\r\n    this.onUpdateField(index, \"message\", message, this.messageValidator);\r\n  };\r\n\r\n  onUpdateExpiresAt = (index, momentDate) => {\r\n    const { form } = this.props;\r\n    let collaborators = form.getFieldValue(\"collaborators\");\r\n    collaborators = dotProp.set(\r\n      collaborators,\r\n      `${index}.expiresAt`,\r\n      momentDate\r\n    );\r\n    form.setFieldsValue({ collaborators });\r\n  };\r\n\r\n  render() {\r\n    const { form } = this.props;\r\n    form.getFieldDecorator(\"collaborators\", {\r\n      initialValue: [],\r\n      rules: [\r\n        {\r\n          type: \"array\",\r\n          required: true,\r\n          message: \"collaborators are required\"\r\n        }\r\n      ]\r\n    });\r\n\r\n    const collaborators = form.getFieldValue(\"collaborators\");\r\n    const error = form.getFieldError(\"collaborators\");\r\n    const dateFormat = \"MMM DD, YYYY\";\r\n\r\n    return (\r\n      <div>\r\n        {collaborators.map((c, index) => {\r\n          return (\r\n            <div key={index}>\r\n              <Row gutter={16}>\r\n                <Col span={20}>\r\n                  <Form.Item\r\n                    label=\"Email address\"\r\n                    help={\r\n                      <span style={{ color: \"red\" }}>\r\n                        {this.getError(index, \"email\")}\r\n                      </span>\r\n                    }\r\n                    style={{ marginBottom: \"4px\" }}\r\n                  >\r\n                    <Input\r\n                      value={c.email}\r\n                      onChange={event => {\r\n                        this.onUpdateEmail(index, event.target.value);\r\n                      }}\r\n                      autoComplete=\"email\"\r\n                    />\r\n                  </Form.Item>\r\n                  <Form.Item\r\n                    label=\"Message\"\r\n                    help={\r\n                      <span style={{ color: \"red\" }}>\r\n                        {this.getError(index, \"message\")}\r\n                      </span>\r\n                    }\r\n                  >\r\n                    <Input.TextArea\r\n                      autosize\r\n                      autoComplete=\"off\"\r\n                      value={c.message}\r\n                      onChange={event => {\r\n                        this.onUpdateMessage(index, event.target.value);\r\n                      }}\r\n                    />\r\n                  </Form.Item>\r\n                  <Form.Item\r\n                    label=\"Expires at\"\r\n                    help={\r\n                      <span style={{ color: \"red\" }}>\r\n                        {this.getError(index, \"expiresAt\")}\r\n                      </span>\r\n                    }\r\n                  >\r\n                    <DatePicker\r\n                      format={dateFormat}\r\n                      disabledDate={current => {\r\n                        return (\r\n                          current &&\r\n                          current <\r\n                            moment()\r\n                              .subtract(1, \"day\")\r\n                              .endOf(\"day\")\r\n                        );\r\n                      }}\r\n                      onChange={(...args) => {\r\n                        this.onUpdateExpiresAt(index, ...args);\r\n                      }}\r\n                      value={c.expiresAt && moment(c.expiresAt, dateFormat)}\r\n                    />\r\n                  </Form.Item>\r\n                </Col>\r\n                <Col span={4}>\r\n                  <Button\r\n                    icon=\"close\"\r\n                    onClick={() => this.onDeleteField(index)}\r\n                    type=\"danger\"\r\n                  />\r\n                </Col>\r\n              </Row>\r\n              {index !== collaborators.length - 1 && <Divider />}\r\n            </div>\r\n          );\r\n        })}\r\n        <span style={{ color: \"red\" }}>{error}</span>\r\n        <Button block icon=\"plus\" onClick={this.onAddField}>\r\n          Add Collaborator\r\n        </Button>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport ComputeForm from \"../compute-form/ComputeForm.jsx\";\r\nimport { Button, Form } from \"antd\";\r\nimport modalWrap from \"../modalWrap.jsx\";\r\nimport CollaboratorForm from \"./AddCollaboratorForm.jsx\";\r\nimport moment from \"moment\";\r\n\r\nclass AddCollaborator extends React.Component {\r\n  static defaultProps = {\r\n    data: {}\r\n  };\r\n\r\n  formRef = React.createRef();\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    const self = this;\r\n\r\n    this.model = {\r\n      fields: {\r\n        collaborators: {\r\n          render(form) {\r\n            return (\r\n              <div key=\"add-collaborator\">\r\n                <p>\r\n                  If request expiration date is not provided, the default\r\n                  expiration duration is 1 month.\r\n                </p>\r\n                <Form.Item>\r\n                  <CollaboratorForm\r\n                    ref={self.formRef}\r\n                    form={form}\r\n                    existingCollaborators={props.existingCollaborators}\r\n                    existingCollaborationRequests={\r\n                      props.existingCollaborationRequests\r\n                    }\r\n                  />\r\n                </Form.Item>\r\n              </div>\r\n            );\r\n          }\r\n        },\r\n        submit: {\r\n          component: Button,\r\n          props: {\r\n            type: \"primary\",\r\n            children: \"Submit\",\r\n            block: true,\r\n            htmlType: \"submit\"\r\n          },\r\n          labelCol: null,\r\n          wrapperCol: null,\r\n          noDecorate: true\r\n        }\r\n      },\r\n      formProps: {\r\n        hideRequiredMark: true\r\n      },\r\n      onSubmit: self.onSubmit\r\n    };\r\n  }\r\n\r\n  onSubmit = async submittedData => {\r\n    if (this.formRef.current) {\r\n      let success = await this.formRef.current.validate();\r\n\r\n      if (success) {\r\n        submittedData.message = null;\r\n        submittedData.expiresAt = moment()\r\n          .add(1, \"months\")\r\n          .valueOf();\r\n\r\n        this.props.onSubmit(submittedData);\r\n      }\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return <ComputeForm model={this.model} form={this.props.form} />;\r\n  }\r\n}\r\n\r\nexport default modalWrap(\r\n  Form.create()(AddCollaborator),\r\n  \"Collaboration Request\"\r\n);\r\n","import React from \"react\";\r\nimport { Switch } from \"antd\";\r\n\r\nexport default class BitSwitch extends React.Component {\r\n  static defaultProps = {\r\n    options: [\"No\", \"Yes\"]\r\n  };\r\n\r\n  render() {\r\n    const { onChange, disabled, options, defaultValue } = this.props;\r\n    let value =\r\n      this.props.value !== undefined ? this.props.value : defaultValue;\r\n    let option1Style = {\r\n      marginRight: \"8px\",\r\n      fontWeight: !value ? \"bold\" : \"500\"\r\n    };\r\n\r\n    let option2Style = {\r\n      marginLeft: \"8px\",\r\n      fontWeight: value ? \"bold\" : \"500\"\r\n    };\r\n\r\n    return (\r\n      <span>\r\n        <span style={option1Style}>{options[0]}</span>\r\n        <Switch checked={!!value} onChange={onChange} disabled={disabled} />\r\n        <span style={option2Style}>{options[1]}</span>\r\n      </span>\r\n    );\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport { Col, Form, Input, Select, DatePicker, InputNumber } from \"antd\";\r\nimport FormWrapper from \"./FormWrapper.jsx\";\r\nimport BitSwitch from \"./BitSwitch\";\r\nimport moment from \"moment\";\r\n\r\nclass ExtFormWrapper extends React.Component {\r\n  renderField = ({\r\n    fieldName,\r\n    labelName,\r\n    type,\r\n    value,\r\n    options,\r\n    placeholder,\r\n    dateFormat,\r\n    immutable,\r\n    min,\r\n    max,\r\n    block,\r\n    rule,\r\n    props\r\n  }) => {\r\n    const { form, editing } = this.props;\r\n    let field = null;\r\n    let span = block\r\n      ? {\r\n          xs: 24,\r\n          sm: 24,\r\n          md: 24\r\n        }\r\n      : {\r\n          xs: 24,\r\n          sm: 24,\r\n          md: 12\r\n        };\r\n\r\n    if (editing && !immutable) {\r\n      if (type === \"text\") {\r\n        field = <Input {...props} placeholder={placeholder} />;\r\n      } else if (type === \"textarea\") {\r\n        field = <Input.TextArea {...props} placeholder={placeholder} />;\r\n      } else if (type === \"select\") {\r\n        field = (\r\n          <Select {...props} placeholder={placeholder}>\r\n            {options.map(option => {\r\n              return <Select.Option key={option}>{option}</Select.Option>;\r\n            })}\r\n          </Select>\r\n        );\r\n      } else if (type === \"datepicker\") {\r\n        field = (\r\n          <DatePicker\r\n            {...props}\r\n            format={dateFormat}\r\n            placeholder={placeholder}\r\n          />\r\n        );\r\n        value = moment(value);\r\n      } else if (type === \"switch\") {\r\n        field = <BitSwitch {...props} options={options} />;\r\n      } else if (type === \"number\") {\r\n        field = (\r\n          <InputNumber\r\n            {...props}\r\n            min={min}\r\n            max={max}\r\n            placeholder={placeholder}\r\n          />\r\n        );\r\n      } else {\r\n        field = <Input {...props} placeholder={placeholder} />;\r\n      }\r\n\r\n      field = (\r\n        <Form.Item label={labelName || fieldName}>\r\n          {form.getFieldDecorator(fieldName, { rule, initialValue: value })(\r\n            field\r\n          )}\r\n        </Form.Item>\r\n      );\r\n    } else {\r\n      if (type === \"switch\") {\r\n        value = <BitSwitch disabled options={options} defaultValue={value} />;\r\n      }\r\n\r\n      field = <Form.Item label={labelName}>{value}</Form.Item>;\r\n    }\r\n\r\n    if (type === \"textarea\") {\r\n      span.md = 24;\r\n    }\r\n\r\n    return <Col {...span}>{field}</Col>;\r\n  };\r\n\r\n  renderForm() {\r\n    const { form, render, editing, onSubmit } = this.props;\r\n    let data = form.getFieldsValue();\r\n    let content = render({ renderField: this.renderField, data, editing });\r\n\r\n    if (editing) {\r\n      content = (\r\n        <FormWrapper form={form} onSubmit={onSubmit}>\r\n          {content}\r\n        </FormWrapper>\r\n      );\r\n    }\r\n\r\n    return content;\r\n  }\r\n\r\n  render() {\r\n    return this.renderForm();\r\n  }\r\n}\r\n\r\nexport default Form.create()(ExtFormWrapper);\r\n","import React from \"react\";\r\nimport ExtFormWrapper from \"../ExtFormWrapper\";\r\nimport { Form } from \"antd\";\r\nimport modalWrap from \"../modalWrap\";\r\n\r\nclass CollaboratorForm extends React.Component {\r\n  renderForm = ({ renderField, data }) => {\r\n    const { collaborator } = this.props;\r\n\r\n    return (\r\n      <React.Fragment>\r\n        {renderField({\r\n          fieldName: \"name\",\r\n          labelName: \"Name\",\r\n          type: \"input\",\r\n          value: collaborator.name,\r\n          immutable: true,\r\n          block: true\r\n        })}\r\n        {renderField({\r\n          fieldName: \"email\",\r\n          labelName: \"Email address\",\r\n          type: \"input\",\r\n          value: collaborator.email,\r\n          immutable: true,\r\n          block: true\r\n        })}\r\n      </React.Fragment>\r\n    );\r\n  };\r\n\r\n  render() {\r\n    const { form, onSubmit } = this.props;\r\n\r\n    return (\r\n      <ExtFormWrapper\r\n        editing\r\n        render={this.renderForm}\r\n        onSubmit={onSubmit}\r\n        form={form}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\n// TODO: change \"Collaborator to collaborator name\"\r\nexport default modalWrap(Form.create()(CollaboratorForm), \"Collaborator\");\r\n","import React from \"react\";\r\nimport CollaboratorThumbnail from \"./Thumnail.jsx\";\r\nimport { List, Button, Tabs } from \"antd\";\r\nimport AddCollaborator from \"./AddCollaborator.jsx\";\r\nimport CollaboratorForm from \"./CollaboratorForm\";\r\nimport \"./collaborators.css\";\r\n\r\nexport default class Collaborators extends React.Component {\r\n  state = {\r\n    showAddCollaboratorForm: false,\r\n    showCollaborator: null\r\n  };\r\n\r\n  toggleCollaboratorForm = () => {\r\n    this.setState(prevState => {\r\n      return {\r\n        showAddCollaboratorForm: !prevState.showAddCollaboratorForm\r\n      };\r\n    });\r\n  };\r\n\r\n  renderList(items, renderItem) {\r\n    return (\r\n      <List\r\n        dataSource={items}\r\n        renderItem={renderItem}\r\n        grid={{\r\n          gutter: 16,\r\n          xs: 1,\r\n          sm: 2,\r\n          md: 3,\r\n          lg: 4\r\n        }}\r\n        style={{ alignItems: \"flex-start\" }}\r\n      />\r\n    );\r\n  }\r\n\r\n  renderCollaborators(collaborators = []) {\r\n    return this.renderList(collaborators, c => {\r\n      return (\r\n        <List.Item key={c.customId}>\r\n          <CollaboratorThumbnail\r\n            collaborator={c}\r\n            onClick={() => {\r\n              this.setState({ showCollaborator: c });\r\n            }}\r\n          />\r\n        </List.Item>\r\n      );\r\n    });\r\n  }\r\n\r\n  renderCollaborationRequests(collaborationRequests = []) {\r\n    return this.renderList(collaborationRequests, c => {\r\n      return (\r\n        <List.Item key={c.customId}>\r\n          <CollaboratorThumbnail collaborator={c} />\r\n        </List.Item>\r\n      );\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      collaborators,\r\n      onBack,\r\n      onAddCollaborators,\r\n      collaborationRequests,\r\n      block,\r\n      onUpdateCollaborator\r\n    } = this.props;\r\n    const { showAddCollaboratorForm, showCollaborator } = this.state;\r\n\r\n    return (\r\n      <div className=\"sk-collaborators\">\r\n        <CollaboratorForm\r\n          visible={!!showCollaborator}\r\n          onClose={() => this.setState({ showCollaborator: null })}\r\n          collaborator={showCollaborator}\r\n          onSubmit={data => {\r\n            onUpdateCollaborator(showCollaborator, data);\r\n            this.setState({ showCollaborator: null });\r\n          }}\r\n          block={block}\r\n        />\r\n        <AddCollaborator\r\n          onSubmit={data => {\r\n            onAddCollaborators(data);\r\n            this.toggleCollaboratorForm();\r\n          }}\r\n          visible={showAddCollaboratorForm}\r\n          onClose={this.toggleCollaboratorForm}\r\n          existingCollaborators={collaborators}\r\n          existingCollaborationRequests={collaborationRequests}\r\n        />\r\n        <div className=\"sk-collaborators-header\">\r\n          <Button icon=\"arrow-left\" onClick={onBack} />\r\n          <Button\r\n            icon=\"plus\"\r\n            onClick={this.toggleCollaboratorForm}\r\n            style={{ marginLeft: \"1em\" }}\r\n          >\r\n            Add collaborator\r\n          </Button>\r\n          <span className=\"sk-gl-block-name\">{block.name}</span>\r\n        </div>\r\n        <div className=\"sk-collaborators-content\">\r\n          <Tabs>\r\n            <Tabs.TabPane tab=\"Collaborators\" key=\"collaborators\">\r\n              {this.renderCollaborators(collaborators)}\r\n            </Tabs.TabPane>\r\n            <Tabs.TabPane\r\n              tab=\"Collaboration Requests\"\r\n              key=\"collaboration-requests\"\r\n            >\r\n              {this.renderCollaborationRequests(collaborationRequests)}\r\n            </Tabs.TabPane>\r\n          </Tabs>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport Group from \"./Group.jsx\";\r\nimport EditGroup from \"./EditGroup.jsx\";\r\nimport EditTask from \"../task/EditTask.jsx\";\r\nimport MiniTask from \"../task/MiniTask.jsx\";\r\nimport EditProject from \"../project/EditProject.jsx\";\r\nimport AddDropdownButton from \"../AddDropdownButton.jsx\";\r\nimport ProjectThumbnail from \"../project/ProjectThumbnail.jsx\";\r\nimport { Button } from \"antd\";\r\nimport {\r\n  assignTask,\r\n  permittedChildrenTypes\r\n} from \"../../models/block/block-utils\";\r\nimport RootGroupGenericContainer from \"./RootGroupGenericContainer.jsx\";\r\nimport Collaborators from \"../collaborator/Collaborators.jsx\";\r\nimport \"./root-group.css\";\r\n\r\nclass RootGroup extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      form: {\r\n        task: false,\r\n        project: false,\r\n        group: false\r\n      },\r\n      project: null,\r\n      block: null,\r\n      parent: null,\r\n      showCollaborators: false,\r\n      fetchingChildren: true,\r\n      fetchingCollaborators: true,\r\n      fetchingCollaborationRequests: true\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.loadBlockData();\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (this.props.rootBlock.customId !== prevProps.rootBlock.customId) {\r\n      this.loadBlockData();\r\n    } else {\r\n      this.updateFetchingState();\r\n    }\r\n  }\r\n\r\n  updateFetchingState() {\r\n    const {\r\n      fetchingChildren,\r\n      fetchingCollaborators,\r\n      fetchingCollaborationRequests\r\n    } = this.state;\r\n    let newState = {};\r\n\r\n    if (this.areBlockChildrenLoaded() && fetchingChildren) {\r\n      newState.fetchingChildren = false;\r\n    }\r\n\r\n    if (this.areBlockCollaboratorsLoaded() && fetchingCollaborators) {\r\n      newState.fetchingCollaborators = false;\r\n    }\r\n\r\n    if (\r\n      this.areBlockCollaborationRequestsLoaded() &&\r\n      fetchingCollaborationRequests\r\n    ) {\r\n      newState.fetchingCollaborationRequests = false;\r\n    }\r\n\r\n    if (Object.keys(newState).length > 0) {\r\n      this.setState(newState);\r\n    }\r\n  }\r\n\r\n  loadBlockData() {\r\n    const {\r\n      fetchingChildren,\r\n      fetchingCollaborators,\r\n      fetchingCollaborationRequests\r\n    } = this.state;\r\n    let newState = {};\r\n\r\n    if (!this.areBlockChildrenLoaded()) {\r\n      this.fetchChildren();\r\n    } else if (fetchingChildren) {\r\n      newState.fetchingChildren = false;\r\n    }\r\n\r\n    if (!this.areBlockCollaboratorsLoaded()) {\r\n      this.fetchCollaborators();\r\n    } else if (fetchingCollaborators) {\r\n      newState.fetchingCollaborators = false;\r\n    }\r\n\r\n    if (!this.areBlockCollaborationRequestsLoaded()) {\r\n      this.fetchCollaborationRequests();\r\n    } else if (fetchingCollaborationRequests) {\r\n      newState.fetchingCollaborationRequests = false;\r\n    }\r\n\r\n    if (Object.keys(newState).length > 0) {\r\n      this.setState(newState);\r\n    }\r\n  }\r\n\r\n  areBlockChildrenLoaded() {\r\n    const { rootBlock } = this.props;\r\n\r\n    if (permittedChildrenTypes[rootBlock.type]) {\r\n      const typeNotLoaded = permittedChildrenTypes[rootBlock.type].find(\r\n        type => {\r\n          if (!rootBlock[type]) {\r\n            return true;\r\n          }\r\n        }\r\n      );\r\n\r\n      if (typeNotLoaded) {\r\n        return false;\r\n      }\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  areBlockCollaboratorsLoaded() {\r\n    const { rootBlock } = this.props;\r\n    if (rootBlock.type === \"org\" && !rootBlock.collaborators) {\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  areBlockCollaborationRequestsLoaded() {\r\n    const { rootBlock } = this.props;\r\n    if (rootBlock.type === \"org\" && !rootBlock.collaborationRequests) {\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  async fetchChildren() {\r\n    const { rootBlock, blockHandlers } = this.props;\r\n    await blockHandlers.getBlockChildren(rootBlock);\r\n  }\r\n\r\n  async fetchCollaborators() {\r\n    const { rootBlock, blockHandlers } = this.props;\r\n    await blockHandlers.getCollaborators(rootBlock);\r\n  }\r\n\r\n  async fetchCollaborationRequests() {\r\n    const { rootBlock, blockHandlers } = this.props;\r\n    await blockHandlers.getCollaborationRequests(rootBlock);\r\n  }\r\n\r\n  onSubmitData = (data, formType) => {\r\n    const { parent, block } = this.state;\r\n\r\n    if (block) {\r\n      this.props.blockHandlers.onUpdate(block, data);\r\n    } else {\r\n      this.props.blockHandlers.onAdd(data, parent);\r\n    }\r\n\r\n    this.toggleForm(formType);\r\n  };\r\n\r\n  toggleForm = (type, parent = null, block = null) => {\r\n    this.setState(prevState => {\r\n      return {\r\n        parent: parent,\r\n        block: block,\r\n        form: { ...prevState.form, [type]: !prevState.form[type] }\r\n      };\r\n    });\r\n  };\r\n\r\n  setCurrentProject = project => {\r\n    this.setState({ project });\r\n  };\r\n\r\n  toggleShowCollaborators = () => {\r\n    this.setState(prevState => {\r\n      return {\r\n        showCollaborators: !prevState.showCollaborators\r\n      };\r\n    });\r\n  };\r\n\r\n  hasChildren(obj) {\r\n    if (obj && typeof obj === \"object\") {\r\n      return Object.keys(obj).length > 0;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  getCollaborators() {\r\n    const { user, rootBlock, collaborators } = this.props;\r\n    return rootBlock.collaborators || collaborators || [user];\r\n  }\r\n\r\n  getExistingNames(blocks = {}) {\r\n    return Object.keys(blocks).map(customId => blocks[customId].name);\r\n  }\r\n\r\n  renderTasks(tasks = {}, parent) {\r\n    const { blockHandlers, user, rootBlock } = this.props;\r\n    const collaborators = this.getCollaborators();\r\n    return Object.keys(tasks).map(taskId => {\r\n      const task = tasks[taskId];\r\n      return (\r\n        <MiniTask\r\n          user={user}\r\n          key={task.customId}\r\n          task={task}\r\n          collaborators={collaborators}\r\n          blockHandlers={blockHandlers}\r\n          onEdit={task => this.toggleForm(\"task\", parent || rootBlock, task)}\r\n        />\r\n      );\r\n    });\r\n  }\r\n\r\n  renderProjects(projects = {}) {\r\n    return Object.keys(projects).map(projectId => {\r\n      const project = projects[projectId];\r\n      return (\r\n        <ProjectThumbnail\r\n          key={project.customId}\r\n          project={project}\r\n          onClick={() => this.setCurrentProject(project)}\r\n          className=\"sk-root-group-thumbnail\"\r\n        />\r\n      );\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const { rootBlock, blockHandlers, user, onBack, isFromRoot } = this.props;\r\n    const {\r\n      form,\r\n      project,\r\n      block,\r\n      showCollaborators,\r\n      parent,\r\n      fetchingChildren,\r\n      fetchingCollaborators,\r\n      fetchingCollaborationRequests\r\n    } = this.state;\r\n    const collaborators = this.getCollaborators();\r\n    const childrenTypes = permittedChildrenTypes[rootBlock.type];\r\n    const isUserRootBlock =\r\n      isFromRoot !== undefined\r\n        ? isFromRoot\r\n        : rootBlock.type === \"root\"\r\n        ? true\r\n        : false;\r\n\r\n    if (showCollaborators) {\r\n      return (\r\n        <Collaborators\r\n          block={rootBlock}\r\n          onBack={this.toggleShowCollaborators}\r\n          collaborators={rootBlock.collaborators}\r\n          onAddCollaborators={data => {\r\n            blockHandlers.onAddCollaborators(rootBlock, data);\r\n          }}\r\n          collaborationRequests={rootBlock.collaborationRequests}\r\n          bench={rootBlock.bench}\r\n          onUpdateCollaborator={(collaborator, data) => {\r\n            blockHandlers.onUpdateCollaborator(rootBlock, collaborator, data);\r\n          }}\r\n        />\r\n      );\r\n    }\r\n\r\n    if (project) {\r\n      return (\r\n        <RootGroupGenericContainer\r\n          path={project.path}\r\n          collaborators={collaborators}\r\n          user={user}\r\n          onBack={() => this.setCurrentProject(null)}\r\n          blockHandlers={blockHandlers}\r\n          parentBlock={rootBlock}\r\n          isFromRoot={isUserRootBlock || isFromRoot}\r\n        />\r\n      );\r\n    }\r\n\r\n    return (\r\n      <div className=\"sk-root-group\">\r\n        <EditProject\r\n          visible={form.project}\r\n          onSubmit={data => this.onSubmitData(data, \"project\")}\r\n          onClose={() => this.toggleForm(\"project\")}\r\n          data={block}\r\n          existingProjects={\r\n            form.project && this.getExistingNames(parent.project)\r\n          }\r\n        />\r\n        <EditGroup\r\n          visible={form.group}\r\n          onSubmit={data => this.onSubmitData(data, \"group\")}\r\n          onClose={() => this.toggleForm(\"group\")}\r\n          data={block}\r\n          existingGroups={form.group && this.getExistingNames(parent.group)}\r\n        />\r\n        <EditTask\r\n          defaultAssignedTo={isFromRoot && [assignTask(user)]}\r\n          collaborators={collaborators}\r\n          visible={form.task}\r\n          onSubmit={data => this.onSubmitData(data, \"task\")}\r\n          onClose={() => this.toggleForm(\"task\")}\r\n          data={block}\r\n          user={user}\r\n        />\r\n        <div className=\"sk-root-group-header\">\r\n          {onBack && (\r\n            <Button\r\n              onClick={onBack}\r\n              icon=\"arrow-left\"\r\n              style={{ marginRight: \"1em\" }}\r\n            />\r\n          )}\r\n          {childrenTypes.length > 0 && (\r\n            <AddDropdownButton\r\n              types={childrenTypes}\r\n              label=\"Create\"\r\n              onClick={type => this.toggleForm(type, rootBlock)}\r\n            />\r\n          )}\r\n          {rootBlock.type === \"org\" &&\r\n            (fetchingCollaborators && fetchingCollaborationRequests ? (\r\n              \"Loading\"\r\n            ) : (\r\n              <Button\r\n                style={{ marginLeft: \"1em\" }}\r\n                onClick={this.toggleShowCollaborators}\r\n              >\r\n                Collaborators\r\n              </Button>\r\n            ))}\r\n          <span className=\"sk-root-group-name\">\r\n            {isUserRootBlock ? \"Root\" : rootBlock.name}\r\n          </span>\r\n        </div>\r\n        <div className=\"sk-root-group-content\">\r\n          <div className=\"sk-root-group-content-inner\">\r\n            {fetchingChildren && \"Loading\"}\r\n            {(this.hasChildren(rootBlock.task) ||\r\n              this.hasChildren(rootBlock.project)) && (\r\n              <div className=\"sk-root-group-content-group\" key=\"ungrouped\">\r\n                <Group name=\"Ungrouped\" user={user}>\r\n                  {this.renderTasks(rootBlock.task, rootBlock)}\r\n                  {this.renderProjects(rootBlock.project)}\r\n                </Group>\r\n              </div>\r\n            )}\r\n            {this.hasChildren(rootBlock.group) &&\r\n              Object.keys(rootBlock.group).map(groupId => {\r\n                let group = rootBlock.group[groupId];\r\n                return (\r\n                  <div className=\"sk-root-group-content-group\" key={groupId}>\r\n                    <Group\r\n                      group={group}\r\n                      onClickAddChild={this.toggleForm}\r\n                      blockHandlers={blockHandlers}\r\n                      onEdit={group =>\r\n                        this.toggleForm(\"group\", rootBlock, group)\r\n                      }\r\n                      user={user}\r\n                    >\r\n                      {this.renderTasks(group.task, group)}\r\n                      {this.renderProjects(group.project)}\r\n                    </Group>\r\n                  </div>\r\n                );\r\n              })}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default RootGroup;\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { sortBlocks } from \"../../models/block/block-utils\";\r\nimport { makeBlockHandlers } from \"../../models/block/block-handlers\";\r\nimport RootGroup from \"./RootGroup.jsx\";\r\nimport netInterface from \"../../net\";\r\nimport { makeMultiple } from \"../../redux/actions/make\";\r\nimport { mergeDataByPath } from \"../../redux/actions/data\";\r\nimport get from \"lodash/get\";\r\n\r\nclass RootGroupContainer extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      error: null\r\n    };\r\n  }\r\n\r\n  async componentDidMount() {\r\n    if (!this.props.rootBlock) {\r\n      try {\r\n        await this.props.fetchRootData();\r\n      } catch (error) {\r\n        this.setState({ error });\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { rootBlock, blockHandlers, user } = this.props;\r\n    const { error } = this.state;\r\n\r\n    if (!rootBlock) {\r\n      return \"Loading\";\r\n    } else if (error) {\r\n      return \"An error occurred\";\r\n    }\r\n\r\n    return (\r\n      <RootGroup\r\n        rootBlock={rootBlock}\r\n        blockHandlers={blockHandlers}\r\n        user={user}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return { state };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n  return { dispatch };\r\n}\r\n\r\nfunction mergeProps({ state }, { dispatch }, ownProps) {\r\n  const user = state.user.user;\r\n  const blockHandlers = makeBlockHandlers({\r\n    dispatch,\r\n    user,\r\n    parent: state.rootBlock\r\n  });\r\n\r\n  return {\r\n    blockHandlers,\r\n    user,\r\n    rootBlock: state.rootBlock,\r\n    async fetchRootData() {\r\n      const { blocks } = await netInterface(\"block.getRoleBlocks\");\r\n\r\n      let rootBlock = null;\r\n      let orgs = {};\r\n      blocks.forEach(blk => {\r\n        if (blk.type === \"root\") {\r\n          rootBlock = blk;\r\n          rootBlock.path = `rootBlock`;\r\n        } else if (blk.type === \"orgs\") {\r\n          orgs[blk.customId] = blk;\r\n          blk.path = `orgs.${blk.customId}`;\r\n        }\r\n      });\r\n\r\n      let actions = [\r\n        mergeDataByPath(rootBlock.path, rootBlock),\r\n        mergeDataByPath(\"orgs\", orgs)\r\n      ];\r\n\r\n      dispatch(makeMultiple(actions));\r\n    }\r\n  };\r\n}\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps,\r\n  mergeProps\r\n)(RootGroupContainer);\r\n","import React from \"react\";\r\nimport Thumbnail from \"../thumbnail/Thumbnail.jsx\";\r\n\r\nexport default function OrgThumbnail(props) {\r\n  const { org, className, style, onClick } = props;\r\n  return (\r\n    <Thumbnail\r\n      className={className}\r\n      data={org}\r\n      onClick={onClick}\r\n      renderInfo={() => {\r\n        return <h3>{org.name}</h3>;\r\n      }}\r\n      style={{\r\n        height: \"70px\",\r\n        padding: \"4px\",\r\n        ...style\r\n      }}\r\n      colorSpan={5}\r\n    />\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport ComputeForm from \"../compute-form/ComputeForm.jsx\";\r\nimport { Input, Button, Form } from \"antd\";\r\nimport { orgDescriptor as blockDescriptor } from \"../../models/block/descriptor\";\r\nimport { makeNameExistsValidator } from \"../../utils/descriptor\";\r\nimport modalWrap from \"../modalWrap.jsx\";\r\n\r\nconst TextArea = Input.TextArea;\r\n\r\nclass EditOrg extends React.Component {\r\n  static defaultProps = {\r\n    data: {}\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    const self = this;\r\n    const data = props.data || {};\r\n\r\n    this.model = {\r\n      fields: {\r\n        name: {\r\n          component: Input,\r\n          props: { autoComplete: \"off\" },\r\n          label: \"Name\",\r\n          labelCol: null,\r\n          wrapperCol: null,\r\n          rules: [\r\n            ...blockDescriptor.name,\r\n            {\r\n              validator: makeNameExistsValidator(\r\n                props.existingOrgs,\r\n                \"orgs exist\"\r\n              )\r\n            }\r\n          ],\r\n          initialValue: data.name\r\n        },\r\n        description: {\r\n          component: TextArea,\r\n          props: { autosize: { minRows: 2, maxRows: 6 } },\r\n          label: \"Description\",\r\n          rules: blockDescriptor.description,\r\n          initialValue: data.description\r\n        },\r\n        submit: {\r\n          component: Button,\r\n          props: {\r\n            type: \"primary\",\r\n            children: \"Submit\",\r\n            block: true,\r\n            htmlType: \"submit\"\r\n          },\r\n          labelCol: null,\r\n          wrapperCol: null,\r\n          noDecorate: true\r\n        }\r\n      },\r\n      formProps: {\r\n        hideRequiredMark: true\r\n      },\r\n      onSubmit: self.onSubmit\r\n    };\r\n  }\r\n\r\n  onSubmit = data => {\r\n    data.type = \"org\";\r\n    return this.props.onSubmit(data);\r\n  };\r\n\r\n  render() {\r\n    return <ComputeForm model={this.model} form={this.props.form} />;\r\n  }\r\n}\r\n\r\nexport default modalWrap(Form.create()(EditOrg), \"Org\");\r\n","import React from \"react\";\r\nimport OrgThumbnail from \"./OrgThumbnail.jsx\";\r\nimport RootGroup from \"../group/RootGroup.jsx\";\r\nimport EditOrg from \"./EditOrg.jsx\";\r\nimport { Button } from \"antd\";\r\nimport \"./orgs.css\";\r\n\r\nclass Orgs extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      currentOrg: null,\r\n      showNewOrgForm: false\r\n    };\r\n  }\r\n\r\n  setCurrentOrg = id => {\r\n    this.setState({ currentOrg: id });\r\n  };\r\n\r\n  toggleNewOrgForm = () => {\r\n    this.setState(prevState => {\r\n      return {\r\n        showNewOrgForm: !prevState.showNewOrgForm\r\n      };\r\n    });\r\n  };\r\n\r\n  onCreateOrg = org => {\r\n    this.props.blockHandlers.onAdd(org);\r\n    this.toggleNewOrgForm();\r\n  };\r\n\r\n  render() {\r\n    const { orgs, blockHandlers, user } = this.props;\r\n    const { currentOrg, showNewOrgForm } = this.state;\r\n\r\n    if (currentOrg) {\r\n      return (\r\n        <RootGroup\r\n          rootBlock={orgs[currentOrg]}\r\n          onBack={() => this.setCurrentOrg(null)}\r\n          blockHandlers={blockHandlers}\r\n          user={user}\r\n        />\r\n      );\r\n    }\r\n\r\n    return (\r\n      <div className=\"sk-orgs\">\r\n        <EditOrg\r\n          visible={showNewOrgForm}\r\n          onSubmit={this.onCreateOrg}\r\n          onClose={this.toggleNewOrgForm}\r\n          existingOrgs={Object.keys(orgs).map(orgId => orgs[orgId].name)}\r\n        />\r\n        <div className=\"sk-orgs-header\">\r\n          <Button onClick={this.toggleNewOrgForm} icon=\"plus\">\r\n            Create Org\r\n          </Button>\r\n        </div>\r\n        <div className=\"sk-orgs-content\">\r\n          {Object.keys(orgs).map(orgId => {\r\n            const org = orgs[orgId];\r\n            return (\r\n              <OrgThumbnail\r\n                key={org.customId}\r\n                org={org}\r\n                onClick={() => this.setCurrentOrg(orgId)}\r\n                className=\"sk-orgs-thumbnail\"\r\n              />\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Orgs;\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { makeBlockHandlers } from \"../../models/block/block-handlers\";\r\nimport Orgs from \"./Orgs.jsx\";\r\nimport netInterface from \"../../net\";\r\nimport { mergeDataByPath } from \"../../redux/actions/data\";\r\nimport { makeMultiple } from \"../../redux/actions/make\";\r\n\r\nclass OrgsContainer extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      error: null\r\n    };\r\n  }\r\n\r\n  async componentDidMount() {\r\n    if (!this.props.rootBlock) {\r\n      try {\r\n        await this.props.fetchRootData();\r\n      } catch (error) {\r\n        this.setState({ error });\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { orgs } = this.props;\r\n    const { error } = this.state;\r\n\r\n    if (!orgs) {\r\n      return \"Loading\";\r\n    } else if (error) {\r\n      return \"An error occurred\";\r\n    }\r\n\r\n    return <Orgs {...this.props} />;\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return { state };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n  return { dispatch };\r\n}\r\n\r\nfunction mergeProps({ state }, { dispatch }) {\r\n  const blockHandlers = makeBlockHandlers({\r\n    dispatch,\r\n    user: state.user.user\r\n  });\r\n\r\n  return {\r\n    blockHandlers,\r\n    rootBlock: state.rootBlock,\r\n    user: state.user.user,\r\n    orgs: state.orgs,\r\n    async fetchRootData() {\r\n      const { blocks } = await netInterface(\"block.getRoleBlocks\");\r\n\r\n      let rootBlock = null;\r\n      let orgs = {};\r\n      blocks.forEach(blk => {\r\n        if (blk.type === \"root\") {\r\n          rootBlock = blk;\r\n          rootBlock.path = `rootBlock`;\r\n        } else if (blk.type === \"org\") {\r\n          orgs[blk.customId] = blk;\r\n          blk.path = `orgs.${blk.customId}`;\r\n        }\r\n      });\r\n\r\n      let actions = [\r\n        mergeDataByPath(rootBlock.path, rootBlock),\r\n        mergeDataByPath(\"orgs\", orgs)\r\n      ];\r\n\r\n      dispatch(makeMultiple(actions));\r\n    }\r\n  };\r\n}\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps,\r\n  mergeProps\r\n)(OrgsContainer);\r\n","import React from \"react\";\r\nimport { Button } from \"antd\";\r\nimport \"./notification-body.css\";\r\n\r\nconst accepted = \"accepted\";\r\nconst declined = \"declined\";\r\n\r\nclass NotificationBody extends React.Component {\r\n  getUserResponse(notification) {\r\n    if (Array.isArray(notification.statusHistory)) {\r\n      const possibleUserResponses = {\r\n        [accepted]: true,\r\n        [declined]: true\r\n      };\r\n\r\n      return notification.statusHistory.find(({ status }) => {\r\n        return possibleUserResponses[status];\r\n      });\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  render() {\r\n    const { notification, onRespond } = this.props;\r\n    const response = this.getUserResponse(notification);\r\n\r\n    return (\r\n      <div className=\"notification-body\">\r\n        <div className=\"notification-body-head\">\r\n          <h4>Collaboration Request From {notification.from.blockName}</h4>\r\n          <span>{new Date(notification.createdAt).toDateString()}</span>\r\n        </div>\r\n        <p className=\"notification-body-body\">{notification.body}</p>\r\n        <div className=\"notification-body-btns\">\r\n          {!response ? (\r\n            <>\r\n              <Button\r\n                type=\"primary\"\r\n                onClick={() => onRespond(notification, accepted)}\r\n              >\r\n                Accept\r\n              </Button>\r\n              <Button\r\n                type=\"danger\"\r\n                onClick={() => onRespond(notification, accepted)}\r\n                style={{ margin: \"0 1em\" }}\r\n              >\r\n                Decline\r\n              </Button>\r\n            </>\r\n          ) : (\r\n            <p>\r\n              You -{\" \"}\r\n              <span\r\n                style={{\r\n                  backgroundColor: \"#ccc\",\r\n                  padding: \"8px\",\r\n                  borderRadius: \"4px\"\r\n                }}\r\n              >\r\n                {response.status}\r\n              </span>\r\n            </p>\r\n          )}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default NotificationBody;\r\n","import React from \"react\";\r\nimport { getWindowWidth } from \"../../utils/window\";\r\nimport throttle from \"lodash/throttle\";\r\nimport { Row, Col } from \"antd\";\r\nimport NotificationBody from \"./NotificationBody.jsx\";\r\nimport \"./notification-list.css\";\r\n\r\nfunction NotificationListItem(props) {\r\n  const { notification, isSelected, onClick } = props;\r\n  const style = isSelected\r\n    ? {\r\n        backgroundColor: \"rgb(66,133,244)\",\r\n        color: \"white\"\r\n      }\r\n    : notification.readAt > 0\r\n    ? {\r\n        color: \"grey\"\r\n      }\r\n    : null;\r\n\r\n  return (\r\n    <div onClick={onClick} className=\"notifications-list-item\" style={style}>\r\n      <h5>Collaboration Request From {notification.from.blockName}</h5>\r\n      <span>{new Date(notification.createdAt).toDateString()}</span>\r\n    </div>\r\n  );\r\n}\r\n\r\nclass NotificationList extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      renderType: this.getRenderType(),\r\n      currentNotification: null\r\n    };\r\n\r\n    this.setRenderType = throttle(this.setRenderType, 100, { leading: true });\r\n  }\r\n\r\n  componentDidMount() {\r\n    window.addEventListener(\"resize\", this.setRenderType);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener(\"resize\", this.setRenderType);\r\n  }\r\n\r\n  onClickNotication = id => {\r\n    if (this.state.currentNotification !== id) {\r\n      this.setState({ currentNotification: id });\r\n      this.props.onClickNotification(this.props.notifications[id]);\r\n    }\r\n  };\r\n\r\n  setRenderType() {\r\n    const renderType = this.getRenderType();\r\n    if (this.state.renderType !== renderType) {\r\n      this.setRenderType({ renderType });\r\n    }\r\n  }\r\n\r\n  getRenderType() {\r\n    return getWindowWidth() > 500 ? \"desktop\" : \"mobile\";\r\n  }\r\n\r\n  renderCurrentNotification() {\r\n    const { notifications, onRespond } = this.props;\r\n    const { currentNotification } = this.state;\r\n\r\n    return (\r\n      <NotificationBody\r\n        notification={notifications[currentNotification]}\r\n        onRespond={onRespond}\r\n      />\r\n    );\r\n  }\r\n\r\n  renderNotifications() {\r\n    const { notifications } = this.props;\r\n    const { currentNotification } = this.state;\r\n    return (\r\n      <div className=\"notifications-list-list\">\r\n        {Object.keys(notifications).map(notificationId => {\r\n          const notification = notifications[notificationId];\r\n          return (\r\n            <NotificationListItem\r\n              key={notificationId}\r\n              notification={notification}\r\n              onClick={() => this.onClickNotication(notification.customId)}\r\n              isSelected={\r\n                currentNotification === notification.customId ? true : false\r\n              }\r\n            />\r\n          );\r\n        })}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const { renderType, currentNotification } = this.state;\r\n\r\n    if (renderType === \"mobile\") {\r\n      if (currentNotification) {\r\n        return this.renderCurrentNotification();\r\n      }\r\n\r\n      return this.renderNotifications();\r\n    }\r\n\r\n    return (\r\n      <Row style={{ height: \"100%\" }}>\r\n        <Col style={{ height: \"100%\" }} span={8}>\r\n          {this.renderNotifications()}\r\n        </Col>\r\n        <Col style={{ height: \"100%\" }} span={16}>\r\n          {currentNotification ? this.renderCurrentNotification() : null}\r\n        </Col>\r\n      </Row>\r\n    );\r\n  }\r\n}\r\n\r\nexport default NotificationList;\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport netInterface from \"../../net\";\r\nimport { setDataByPath, mergeDataByPath } from \"../../redux/actions/data\";\r\nimport { makeMultiple } from \"../../redux/actions/make\";\r\nimport NotificationList from \"./NotificationList.jsx\";\r\n\r\nclass NotificationsContainer extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      error: null\r\n    };\r\n  }\r\n\r\n  async componentDidMount() {\r\n    if (!this.props.notifications) {\r\n      try {\r\n        await this.props.fetchNotifications();\r\n      } catch (error) {\r\n        this.setState({ error });\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { notifications, onRespond, onClickNotification } = this.props;\r\n    const { error } = this.state;\r\n\r\n    if (!notifications) {\r\n      return \"Loading\";\r\n    } else if (error) {\r\n      return error.message || \"An error occurred\";\r\n    }\r\n\r\n    return (\r\n      <NotificationList\r\n        notifications={notifications}\r\n        onRespond={onRespond}\r\n        onClickNotification={onClickNotification}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return { state };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n  return { dispatch };\r\n}\r\n\r\nfunction mergeProps({ state }, { dispatch }, ownProps) {\r\n  return {\r\n    notifications: state.notifications,\r\n    async onClickNotification(notification) {\r\n      if (!notification.readAt) {\r\n        let update = { readAt: Date.now() };\r\n        dispatch(\r\n          mergeDataByPath(`notifications.${notification.customId}`, update)\r\n        );\r\n        netInterface(\"user.updateCollaborationRequest\", notification, update);\r\n      }\r\n    },\r\n\r\n    async onRespond(notification, response) {\r\n      function requestIsValid(statusHistory) {\r\n        const invalidStatuses = {\r\n          accepted: true,\r\n          declined: true,\r\n          revoked: true\r\n        };\r\n\r\n        if (Array.isArray(statusHistory)) {\r\n          return !!!statusHistory.find(({ status }) => {\r\n            return invalidStatuses[status];\r\n          });\r\n        }\r\n\r\n        return false;\r\n      }\r\n\r\n      let statusHistory = notification.statusHistory;\r\n\r\n      if (requestIsValid(statusHistory)) {\r\n        statusHistory.push({\r\n          status: response,\r\n          date: Date.now()\r\n        });\r\n\r\n        let update = { statusHistory };\r\n        dispatch(\r\n          mergeDataByPath(`notifications.${notification.customId}`, update)\r\n        );\r\n\r\n        let result = await netInterface(\r\n          \"user.respondToCollaborationRequest\",\r\n          notification,\r\n          response\r\n        );\r\n\r\n        if (response === \"accepted\" && result && result.block) {\r\n          const { block } = result;\r\n          block.path = `orgs.${block.customId}`;\r\n          dispatch(\r\n            makeMultiple([\r\n              setDataByPath(block.path, block),\r\n              mergeDataByPath(`user.user.orgs`, [block.customId])\r\n            ])\r\n          );\r\n        }\r\n      }\r\n    },\r\n\r\n    async fetchNotifications() {\r\n      let result = await netInterface(\"user.getCollaborationRequests\");\r\n      let { requests: notifications } = result;\r\n      notifications = notifications || [];\r\n      let notificationsObj = {};\r\n      notifications.forEach(notification => {\r\n        notificationsObj[notification.customId] = notification;\r\n      });\r\n\r\n      dispatch(mergeDataByPath(\"notifications\", notificationsObj));\r\n    }\r\n  };\r\n}\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps,\r\n  mergeProps\r\n)(NotificationsContainer);\r\n","import React from \"react\";\r\nimport ComputeForm from \"../compute-form/ComputeForm.jsx\";\r\nimport { Input, Button, Form } from \"antd\";\r\nimport { userDescriptor } from \"../../models/user/descriptor\";\r\nimport { makeConfirmValidator } from \"../../utils/descriptor\";\r\n\r\nclass Signup extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    const confirmPasswordValidator = makeConfirmValidator(\r\n      \"password\",\r\n      \"confirmPassword\",\r\n      props.form,\r\n      \"password do not match\"\r\n    );\r\n\r\n    const confirmEmailValidator = makeConfirmValidator(\r\n      \"email\",\r\n      \"confirmEmail\",\r\n      props.form,\r\n      \"email does not match\"\r\n    );\r\n\r\n    this.model = {\r\n      fields: {\r\n        name: {\r\n          component: Input,\r\n          label: \"Name\",\r\n          props: { autoComplete: \"name\" },\r\n          labelCol: null,\r\n          wrapperCol: null,\r\n          rules: userDescriptor.name\r\n        },\r\n        email: {\r\n          component: Input,\r\n          label: \"Email\",\r\n          props: { autoComplete: \"email\" },\r\n          labelCol: null,\r\n          wrapperCol: null,\r\n          rules: userDescriptor.email\r\n        },\r\n        confirmEmail: {\r\n          component: Input,\r\n          label: \"Confirm Email\",\r\n          props: { autoComplete: \"email\" },\r\n          labelCol: null,\r\n          wrapperCol: null,\r\n          rules: [\r\n            { required: true, type: \"string\", validator: confirmEmailValidator }\r\n          ]\r\n        },\r\n        password: {\r\n          hasFeedback: true,\r\n          component: Input,\r\n          props: { type: \"password\", autoComplete: \"new-password\" },\r\n          label: \"Password\",\r\n          labelCol: null,\r\n          wrapperCol: null,\r\n          rules: [\r\n            ...userDescriptor.password,\r\n            {\r\n              required: true,\r\n              type: \"string\",\r\n              validator: confirmPasswordValidator\r\n            }\r\n          ],\r\n          extra: \"min of 5 chars including an alphabet, a number, and a symbol\"\r\n        },\r\n        confirmPassword: {\r\n          hasFeedback: true,\r\n          component: Input,\r\n          props: { type: \"password\", autoComplete: \"new-password\" },\r\n          label: \"Confirm Password\",\r\n          labelCol: null,\r\n          wrapperCol: null,\r\n          rules: [\r\n            {\r\n              required: true,\r\n              type: \"string\",\r\n              validator: confirmPasswordValidator\r\n            }\r\n          ]\r\n        },\r\n        submit: {\r\n          component: Button,\r\n          props: {\r\n            type: \"primary\",\r\n            children: \"Signup\",\r\n            block: true,\r\n            htmlType: \"submit\"\r\n          },\r\n          labelCol: null,\r\n          wrapperCol: null,\r\n          noDecorate: true\r\n        }\r\n      },\r\n      formProps: {\r\n        hideRequiredMark: true\r\n      },\r\n      onSubmit: this.onSubmit\r\n    };\r\n  }\r\n\r\n  onSubmit = async data => {\r\n    return this.props.onSubmit(data);\r\n  };\r\n\r\n  render() {\r\n    return <ComputeForm model={this.model} form={this.props.form} />;\r\n  }\r\n}\r\n\r\nexport default Form.create()(Signup);\r\n","import netInterface from \"../../net\";\r\nimport { mergeDataByPath } from \"../../redux/actions/data\";\r\nimport { connect } from \"react-redux\";\r\nimport Signup from \"./Signup\";\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n  return {\r\n    onSubmit: async data => {\r\n      let result = await netInterface(\"user.signup\", data);\r\n\r\n      if (result.user && result.token) {\r\n        dispatch(mergeDataByPath(\"user\", result));\r\n      } else {\r\n        throw new Error(\"an error occurred\");\r\n      }\r\n    }\r\n  };\r\n}\r\n\r\nexport default connect(\r\n  null,\r\n  mapDispatchToProps\r\n)(Signup);\r\n","import React from \"react\";\r\nimport ComputeForm from \"../compute-form/ComputeForm.jsx\";\r\nimport { Input, Button, Checkbox, Form } from \"antd\";\r\nimport { userDescriptor } from \"../../models/user/descriptor\";\r\n\r\nclass Login extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    const self = this;\r\n    this.model = {\r\n      fields: {\r\n        email: {\r\n          component: Input,\r\n          props: { autoComplete: \"email\" },\r\n          label: \"Email\",\r\n          labelCol: null,\r\n          wrapperCol: null,\r\n          rules: userDescriptor.email\r\n        },\r\n        password: {\r\n          component: Input,\r\n          props: { type: \"password\", autoComplete: \"current-password\" },\r\n          label: \"Password\",\r\n          labelCol: null,\r\n          wrapperCol: null,\r\n          rules: userDescriptor.password\r\n        },\r\n        remember: {\r\n          component: Checkbox,\r\n          valuePropName: \"checked\",\r\n          props: { children: \"Remember me\" },\r\n          initialValue: true\r\n        },\r\n        submit: {\r\n          component: Button,\r\n          props: {\r\n            type: \"primary\",\r\n            children: \"Login\",\r\n            block: true,\r\n            htmlType: \"submit\"\r\n          },\r\n          labelCol: null,\r\n          wrapperCol: null,\r\n          noDecorate: true\r\n        }\r\n      },\r\n      formProps: {\r\n        hideRequiredMark: true\r\n      },\r\n      onSubmit: self.onSubmit\r\n    };\r\n  }\r\n\r\n  onSubmit = async data => {\r\n    return this.props.onSubmit(data);\r\n  };\r\n\r\n  render() {\r\n    return <ComputeForm model={this.model} form={this.props.form} />;\r\n  }\r\n}\r\n\r\nexport default Form.create()(Login);\r\n","import netInterface from \"../../net\";\r\nimport { mergeDataByPath } from \"../../redux/actions/data\";\r\nimport { connect } from \"react-redux\";\r\nimport Login from \"./Login\";\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n  return {\r\n    onSubmit: async data => {\r\n      let result = await netInterface(\"user.login\", data);\r\n\r\n      if (result && result.user && result.token) {\r\n        dispatch(mergeDataByPath(\"user\", result));\r\n      } else {\r\n        throw new Error(\"an error occurred\");\r\n      }\r\n    }\r\n  };\r\n}\r\n\r\nexport default connect(\r\n  null,\r\n  mapDispatchToProps\r\n)(Login);\r\n","import React from \"react\";\r\nimport ComputeForm from \"../compute-form/ComputeForm.jsx\";\r\nimport { Input, Button, Form, message } from \"antd\";\r\nimport { userDescriptor } from \"../../models/user/descriptor\";\r\nimport { makeConfirmValidator } from \"../../utils/descriptor\";\r\n\r\nclass ForgotPassword extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    const confirmEmailValidator = makeConfirmValidator(\r\n      \"email\",\r\n      \"confirmEmail\",\r\n      props.form,\r\n      \"email does not match\"\r\n    );\r\n\r\n    this.model = {\r\n      fields: {\r\n        email: {\r\n          component: Input.Password,\r\n          label: \"Email\",\r\n          labelCol: null,\r\n          wrapperCol: null,\r\n          rules: [...userDescriptor.email, { validator: confirmEmailValidator }]\r\n        },\r\n        confirmEmail: {\r\n          component: Input,\r\n          label: \"Confirm Email\",\r\n          labelCol: null,\r\n          wrapperCol: null,\r\n          rules: [...userDescriptor.email, { validator: confirmEmailValidator }]\r\n        },\r\n        submit: {\r\n          component: Button,\r\n          props: {\r\n            type: \"primary\",\r\n            children: \"Submit\",\r\n            block: true,\r\n            htmlType: \"submit\"\r\n          },\r\n          labelCol: null,\r\n          wrapperCol: null,\r\n          noDecorate: true\r\n        }\r\n      },\r\n      formProps: {\r\n        hideRequiredMark: true\r\n      },\r\n      onSubmit: this.onSubmit\r\n    };\r\n  }\r\n\r\n  onSubmit = async data => {\r\n    await this.props.onSubmit(data);\r\n    message.success(\"request successful\");\r\n  };\r\n\r\n  render() {\r\n    return <ComputeForm model={this.model} form={this.props.form} />;\r\n  }\r\n}\r\n\r\nexport default Form.create()(ForgotPassword);\r\n","import netInterface from \"../../net\";\r\nimport { connect } from \"react-redux\";\r\nimport ForgotPassword from \"./ForgotPassword\";\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n  return {\r\n    onSubmit: async data => {\r\n      await netInterface(\"user.forgotPassword\", data);\r\n    }\r\n  };\r\n}\r\n\r\nexport default connect(\r\n  null,\r\n  mapDispatchToProps\r\n)(ForgotPassword);\r\n","import React from \"react\";\r\nimport ComputeForm from \"../compute-form/ComputeForm.jsx\";\r\nimport { Input, Button, Form, message } from \"antd\";\r\nimport { userDescriptor } from \"../../models/user/descriptor\";\r\nimport { makeConfirmValidator } from \"../../utils/descriptor\";\r\n\r\nclass ChangePassword extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    const confirmPasswordValidator = makeConfirmValidator(\r\n      \"password\",\r\n      \"confirmPassword\",\r\n      props.form,\r\n      \"password do not match\"\r\n    );\r\n\r\n    this.model = {\r\n      fields: {\r\n        password: {\r\n          component: Input.Password,\r\n          props: { type: \"password\" },\r\n          label: \"Password\",\r\n          labelCol: null,\r\n          wrapperCol: null,\r\n          rules: [\r\n            ...userDescriptor.password,\r\n            { validator: confirmPasswordValidator }\r\n          ]\r\n        },\r\n        confirmPassword: {\r\n          component: Input.Password,\r\n          props: { type: \"password\" },\r\n          label: \"Confirm Password\",\r\n          labelCol: null,\r\n          wrapperCol: null,\r\n          rules: [\r\n            ...userDescriptor.password,\r\n            { validator: confirmPasswordValidator }\r\n          ]\r\n        },\r\n        submit: {\r\n          component: Button,\r\n          props: {\r\n            type: \"primary\",\r\n            children: \"Submit\",\r\n            block: true,\r\n            htmlType: \"submit\"\r\n          },\r\n          labelCol: null,\r\n          wrapperCol: null,\r\n          noDecorate: true\r\n        }\r\n      },\r\n      formProps: {\r\n        hideRequiredMark: true\r\n      },\r\n      onSubmit: this.onSubmit\r\n    };\r\n  }\r\n\r\n  onSubmit = async data => {\r\n    await this.props.onSubmit(data);\r\n    message.success(\"change password succeeded\");\r\n  };\r\n\r\n  render() {\r\n    return <ComputeForm model={this.model} form={this.props.form} />;\r\n  }\r\n}\r\n\r\nexport default Form.create()(ChangePassword);\r\n","import netInterface from \"../../net\";\r\nimport { mergeDataByPath } from \"../../redux/actions/data\";\r\nimport { connect } from \"react-redux\";\r\nimport ChangePassword from \"./ChangePassword\";\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n  return {\r\n    onSubmit: async data => {\r\n      let result = await netInterface(\"user.changePasswordWithToken\", data);\r\n\r\n      if (result.user && result.token) {\r\n        dispatch(mergeDataByPath(\"user\", result));\r\n      } else {\r\n        throw new Error(\"an error occurred\");\r\n      }\r\n    }\r\n  };\r\n}\r\n\r\nexport default connect(\r\n  null,\r\n  mapDispatchToProps\r\n)(ChangePassword);\r\n","import React from \"react\";\r\nimport { Switch, Route, withRouter, Redirect } from \"react-router-dom\";\r\nimport Web from \"./Web.jsx\";\r\nimport AppMenu from \"./components/app-menu/AppMenu.jsx\";\r\nimport RootGroupContainer from \"./components/group/RootGroupContainer.jsx\";\r\nimport OrgsContainer from \"./components/org/OrgsContainer.jsx\";\r\nimport NotificationsContainer from \"./components/notification/NotificationsContainer.jsx\";\r\nimport SignupContainer from \"./components/signup/SignupContainer.jsx\";\r\nimport LoginContainer from \"./components/login/LoginContainer.jsx\";\r\nimport ForgotPasswordContainer from \"./components/password/ForgotPsContainer.jsx\";\r\nimport ChangePasswordWithTokenContainer from \"./components/password/ChangePsWithTokenContainer.jsx\";\r\nimport { Col, Row, notification } from \"antd\";\r\nimport { connect } from \"react-redux\";\r\nimport { mergeDataByPath, clearState } from \"./redux/actions/data\";\r\nimport netInterface from \"./net/index\";\r\n\r\nfunction MainApp(props) {\r\n  const { onLogout } = props;\r\n\r\n  return (\r\n    <AppMenu\r\n      currentItemKey=\"orgs\"\r\n      menuItems={[\r\n        {\r\n          key: \"notifications\",\r\n          label: \"Notifications\",\r\n          component: NotificationsContainer\r\n        },\r\n        {\r\n          key: \"personal\",\r\n          label: \"Personal\",\r\n          component: RootGroupContainer\r\n        },\r\n        {\r\n          key: \"orgs\",\r\n          label: \"Orgs\",\r\n          component: OrgsContainer\r\n        },\r\n        {\r\n          key: \"logout\",\r\n          label: \"Logout\",\r\n          component: null\r\n        }\r\n      ]}\r\n      onSelectMenu={key => {\r\n        if (key === \"logout\" && onLogout) {\r\n          onLogout();\r\n        }\r\n      }}\r\n    />\r\n  );\r\n}\r\n\r\nfunction mainAppMapStateToProps(state, props) {\r\n  return {\r\n    ...props\r\n  };\r\n}\r\n\r\nfunction mainAppMapDispatchToProps(dispatch) {\r\n  return {\r\n    onLogout() {\r\n      dispatch(clearState());\r\n      netInterface(\"user.logout\");\r\n    }\r\n  };\r\n}\r\n\r\nconst MainAppContainer = connect(\r\n  mainAppMapStateToProps,\r\n  mainAppMapDispatchToProps\r\n)(MainApp);\r\n\r\nfunction renderComponent(component) {\r\n  return function() {\r\n    const ComponentX = component;\r\n    return (\r\n      <Row type=\"flex\" justify=\"center\">\r\n        <Col sm={24} md={12} lg={8} style={{ padding: \"1em\" }}>\r\n          <ComponentX />\r\n        </Col>\r\n      </Row>\r\n    );\r\n  };\r\n}\r\n\r\nclass App extends React.Component {\r\n  async componentDidMount() {\r\n    const { userIsLoggedIn, history, getSavedUserData } = this.props;\r\n\r\n    if (!userIsLoggedIn) {\r\n      if (window.location.pathname.indexOf(\"app\") !== -1) {\r\n        console.log(\"/\");\r\n        history.push(\"/\");\r\n      }\r\n\r\n      getSavedUserData();\r\n    } else {\r\n      if (window.location.pathname === \"/\") {\r\n        history.push(\"/app\");\r\n      }\r\n    }\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    const { userIsLoggedIn, history } = this.props;\r\n\r\n    if (userIsLoggedIn) {\r\n      if (window.location.pathname.indexOf(\"app\") === -1) {\r\n        history.push(\"/app\");\r\n      }\r\n    }\r\n  }\r\n\r\n  componentDidCatch(error) {\r\n    notification.error({\r\n      title: \"Error\",\r\n      message: \"An error ocurred\"\r\n    });\r\n\r\n    if (process.env.NODE_ENV !== \"production\") {\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { userIsLoggedIn } = this.props;\r\n\r\n    if (!userIsLoggedIn && window.location.pathname.indexOf(\"app\") !== -1) {\r\n      return <Redirect to=\"/\" />;\r\n    }\r\n\r\n    return (\r\n      <div style={{ height: \"100%\" }} className=\"app\">\r\n        <Switch>\r\n          <Route path=\"/signup\" render={renderComponent(SignupContainer)} />\r\n          <Route path=\"/login\" render={renderComponent(LoginContainer)} />\r\n          <Route\r\n            path=\"/forgot-password\"\r\n            render={renderComponent(ForgotPasswordContainer)}\r\n          />\r\n          <Route\r\n            path=\"/change-password\"\r\n            render={renderComponent(ChangePasswordWithTokenContainer)}\r\n          />\r\n          <Route path=\"/app\" component={MainAppContainer} />\r\n          <Route path=\"/\" exact component={Web} />\r\n        </Switch>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state, props) {\r\n  return {\r\n    ...props,\r\n    userIsLoggedIn: state.user && !!state.user.token\r\n  };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n  return {\r\n    async getSavedUserData() {\r\n      let result = await netInterface(\"user.getSavedUserData\");\r\n\r\n      if (result) {\r\n        dispatch(mergeDataByPath(\"user\", result));\r\n      }\r\n    }\r\n  };\r\n}\r\n\r\nexport default withRouter(\r\n  connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n  )(App)\r\n);\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport store from \"./redux/store\";\r\nimport { Provider } from \"react-redux\";\r\nimport App from \"./App\";\r\nimport { BrowserRouter } from \"react-router-dom\";\r\nimport \"./styles.css\";\r\nimport \"./sk-global.css\";\r\n\r\nif (process.env.NODE_ENV === \"development\") {\r\n  require(\"antd/dist/antd.css\");\r\n}\r\n\r\nconst rootElement = document.getElementById(\"root\");\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <BrowserRouter>\r\n      <App />\r\n    </BrowserRouter>\r\n  </Provider>,\r\n  rootElement\r\n);\r\n","const { errorFragment } = require(\"./error\");\r\n\r\nconst blockFragment = `\r\n  fragment blockFragment on Block {\r\n    customId\r\n    name\r\n    description\r\n    priority\r\n    expectedEndAt\r\n    createdAt\r\n    color\r\n    updatedAt\r\n    type\r\n    parents\r\n    createdBy\r\n    taskCollaborators {\r\n      userId\r\n      assignedAt\r\n      assignedBy\r\n      completedAt\r\n    }\r\n  }\r\n`;\r\n\r\nconst addBlockMutation = `\r\n  mutation AddBlockMutation ($block: AddBlockInput!) {\r\n    block {\r\n      addBlock (block: $block) {\r\n        errors {\r\n          field\r\n          message\r\n        }\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nconst updateBlockMutation = `\r\n  mutation UpdateBlockMutation ($block: BlockParamInput!, $data: UpdateBlockInput!) {\r\n    block {\r\n      updateBlock (block: $block, data: $data) {\r\n        errors {\r\n          field\r\n          message\r\n        }\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nconst deleteBlockMutation = `\r\n  mutation DeleteBlockMutation ($block: BlockParamInput!) {\r\n    block {\r\n      deleteBlock (block: $block) {\r\n        errors {\r\n          field\r\n          message\r\n        }\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nconst getRoleBlocksQuery = `\r\n  ${blockFragment}\r\n  ${errorFragment}\r\n  query GetRoleBlocksQuery {\r\n    block {\r\n      getRoleBlocks {\r\n        errors {\r\n          ...errorFragment\r\n        }\r\n        blocks {\r\n          ...blockFragment\r\n        }\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nconst getBlockChildrenQuery = `\r\n  ${blockFragment}\r\n  ${errorFragment}\r\n  query GetBlockChildrenQuery ($block: BlockParamInput!, $types: [String!]) {\r\n    block {\r\n      getBlockChildren (block: $block, types: $types) {\r\n        errors {\r\n          ...errorFragment\r\n        }\r\n        blocks {\r\n          ...blockFragment\r\n        }\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nconst addCollaboratorsMutation = `\r\n  mutation AddCollaborators (\r\n    $block: BlockParamInput!, \r\n    $collaborators: [AddCollaboratorInput!]!,\r\n    $body: String,\r\n    $expiresAt: Float\r\n  ) {\r\n    block {\r\n      addCollaborators (block: $block, collaborators: $collaborators, body: $body, expiresAt: $expiresAt) {\r\n        errors {\r\n          field\r\n          message\r\n        }\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nconst getCollaboratorsQuery = `\r\n  ${errorFragment}\r\n  query GetCollaboratorsQuery ($block: BlockParamInput!) {\r\n    block {\r\n      getCollaborators (block: $block) {\r\n        errors {\r\n          ...errorFragment\r\n        }\r\n        collaborators {\r\n          name\r\n          email\r\n          customId\r\n        }\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nconst getCollabRequestsQuery = `\r\n  ${errorFragment}\r\n  query GetCollabRequestsQuery ($block: BlockParamInput!) {\r\n    block {\r\n      getCollabRequests (block: $block) {\r\n        errors {\r\n          ...errorFragment\r\n        }\r\n        requests {\r\n          customId\r\n          from {\r\n            userId\r\n            name\r\n            blockId\r\n            blockName\r\n            blockType\r\n          }\r\n          createdAt\r\n          body\r\n          readAt\r\n          to {\r\n            email\r\n            userId\r\n          }\r\n          statusHistory {\r\n            status\r\n            date\r\n          }\r\n          sentEmailHistory {\r\n            date\r\n          }\r\n          type\r\n          root\r\n        }\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nconst removeCollaboratorMutation = `\r\n  ${errorFragment}\r\n  mutation RemoveCollaboratorsMutation ($block: BlockParamInput!, $collaborator: String!) {\r\n    block {\r\n      removeCollaborator (block: $block, collaborator: $collaborator) {\r\n        errors {\r\n          ...errorFragment\r\n        }\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nconst toggleTaskMutation = `\r\n  ${errorFragment}\r\n  mutation ToggleTaskMutation ($block: BlockParamInput!,  $data: Boolean!) {\r\n    block {\r\n       toggleTask (block: $block, data: $data) {\r\n        errors {\r\n          ...errorFragment\r\n        }\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nconst revokeRequestMutation = `\r\n  ${errorFragment}\r\n  mutation RevokeRequestMutation ($block: BlockParamInput!, $request: String!) {\r\n    block {\r\n       revokeRequest (block: $block, request: $request) {\r\n        errors {\r\n          ...errorFragment\r\n        }\r\n      }\r\n    }\r\n  }\r\n  `;\r\n\r\nmodule.exports = {\r\n  addBlockMutation,\r\n  updateBlockMutation,\r\n  deleteBlockMutation,\r\n  getBlockChildrenQuery,\r\n  blockFragment,\r\n  addCollaboratorsMutation,\r\n  getCollabRequestsQuery,\r\n  getCollaboratorsQuery,\r\n  getRoleBlocksQuery,\r\n  removeCollaboratorMutation,\r\n  toggleTaskMutation,\r\n  revokeRequestMutation\r\n};\r\n","function trim(value) {\r\n  if (value.trim) {\r\n    return value.trim();\r\n  }\r\n}\r\n\r\nconst textPattern = {\r\n  pattern: /\\w+/,\r\n  message: \"only alphanumeric characters allowed\"\r\n};\r\n\r\n// const passwordPattern = /^(?=.*[A-Za-z])(?=.*\\d)(?=.*[$@$!%*#?&])[A-Za-z\\d$@$!%*#?&]{5,}$/;\r\nconst passwordPattern = /^[A-Za-z\\d$@$!%*#?&]$/;\r\nconst userDescriptor = {\r\n  name: [\r\n    { type: \"string\", required: true, max: 50, transform: trim },\r\n    textPattern\r\n  ],\r\n  email: [{ type: \"email\", required: true, max: 250, transform: trim }],\r\n  password: [\r\n    {\r\n      required: true,\r\n      type: \"string\"\r\n    },\r\n    {\r\n      max: 50,\r\n      message: \"password is too long\"\r\n    },\r\n    {\r\n      pattern: passwordPattern,\r\n      message: \"password is invalid\"\r\n    }\r\n  ]\r\n};\r\n\r\nmodule.exports = {\r\n  userDescriptor\r\n};\r\n","export const MERGE = \"MERGE\";\r\nexport const DELETE = \"DELETE\";\r\nexport const MULTIPLE = \"MULTIPLE\";\r\nexport const SET = \"SET\";\r\nexport const CLEAR_STATE = \"CLEAR_STATE\";\r\n","export function devConsole(type, location = \"--\") {\r\n  return function(...args) {\r\n    if (process.env.NODE_ENV === \"development\") {\r\n      console.log(`-- ${location} --`);\r\n      console[type](...args);\r\n    }\r\n  };\r\n}\r\n\r\nexport function devLog(...args) {\r\n  devConsole(\"log\")(...args);\r\n}\r\n\r\nexport function devError(...args) {\r\n  devConsole(\"error\")(...args);\r\n}\r\n","import NetError from \"./NetError\";\r\nimport get from \"lodash/get\";\r\nimport { devError } from \"../utils/log\";\r\n// import dotProp from \"dot-prop-immutable\";\r\n\r\nconst serverAddr =\r\n  process.env.NODE_ENV === \"development\"\r\n    ? `http://localhost:5000/graphql`\r\n    : \"/graphql\";\r\n\r\n// function getDataFromResult(result, path) {\r\n//   return dotProp.get(result, path);\r\n// }\r\n\r\nexport default async function query(headers, netQuery, variables, process) {\r\n  try {\r\n    let hd = {\r\n      \"Content-Type\": \"application/json\",\r\n      ...headers\r\n    };\r\n\r\n    const result = await fetch(serverAddr, {\r\n      headers: hd,\r\n      body: JSON.stringify({\r\n        query: netQuery,\r\n        variables\r\n      }),\r\n      method: \"POST\",\r\n      mode: \"cors\"\r\n    });\r\n\r\n    if (result.ok) {\r\n      let resultBody = await result.json();\r\n\r\n      resultBody =\r\n        typeof process === \"string\"\r\n          ? get(resultBody, process)\r\n          : process(resultBody);\r\n\r\n      if (resultBody && resultBody.errors) {\r\n        throw new NetError(resultBody.errors);\r\n      }\r\n\r\n      return resultBody;\r\n    }\r\n\r\n    throw new NetError(result.statusText || \"an error occurred\");\r\n  } catch (error) {\r\n    devError(error);\r\n\r\n    if (error.name === \"NetError\") {\r\n      throw error;\r\n    }\r\n\r\n    throw new NetError(\"an error occurred\");\r\n  }\r\n}\r\n","class NetFieldError {\r\n  constructor(field, errors) {\r\n    this.field = field;\r\n    this.errors = Array.isArray(errors) ? errors : [JSON.stringify(errors)];\r\n    this.name = \"NetFieldError\";\r\n  }\r\n}\r\n\r\nexport default class NetError extends Error {\r\n  constructor(errors) {\r\n    super();\r\n    this.name = \"NetError\";\r\n    this.errors = [];\r\n    if (Array.isArray(errors)) {\r\n      this.errors = errors.map(\r\n        error => new NetFieldError(error.field, error.errors)\r\n      );\r\n    } else if (typeof errors === \"object\") {\r\n      this.errors.push(new NetFieldError(errors.field, errors.errors));\r\n    } else {\r\n      this.errors.push(new NetFieldError(\"error\", errors));\r\n    }\r\n  }\r\n}\r\n"],"sourceRoot":""}