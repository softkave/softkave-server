{"version":3,"sources":["net/schema/user.js","utils/storage.js","net/user.js","utils/object.js","net/block.js","net/schema/error.js","net/auth.js","Web.jsx","utils/window.js","components/app-menu/AppMenu.jsx","models/block/block-utils.js","redux/actions/make.js","redux/actions/data.js","net/index.js","models/block/block-handlers.js","components/AddDropdownButton.jsx","components/group/Group.jsx","components/form-utils.js","components/FormWrapper.jsx","components/withSpinner.jsx","components/compute-form/ComputeForm.jsx","utils/descriptor.js","models/block/descriptor.js","utils/trim.js","components/modalWrap.jsx","components/group/EditGroup.jsx","components/task/Priority.jsx","components/task/EditPriority.jsx","components/thumbnail/Thumbnail.jsx","components/task/TaskCollaborator.jsx","components/collaborator/Thumnail.jsx","components/task/AssignTask.jsx","components/task/EditTask.jsx","components/task/MiniTask.jsx","components/project/EditProject.jsx","components/project/ProjectThumbnail.jsx","components/group/RootGroupGenericContainer.jsx","utils/promise.js","components/collaborator/AddCollaboratorForm.jsx","components/collaborator/AddCollaborator.jsx","components/BitSwitch.jsx","components/ExtFormWrapper.jsx","components/collaborator/CollaboratorForm.jsx","components/collaborator/Collaborators.jsx","components/group/RootGroup.jsx","components/group/RootGroupContainer.jsx","components/org/OrgThumbnail.jsx","components/org/EditOrg.jsx","components/org/Orgs.jsx","components/org/OrgsContainer.jsx","components/notification/NotificationBody.jsx","components/notification/NotificationList.jsx","components/notification/NotificationsContainer.jsx","components/signup/Signup.jsx","components/signup/SignupContainer.jsx","components/login/Login.jsx","components/login/LoginContainer.jsx","components/password/ForgotPassword.jsx","components/password/ForgotPsContainer.jsx","components/password/ChangePassword.jsx","components/password/ChangePsWithTokenContainer.jsx","App.js","index.js","net/schema/block.js","models/user/descriptor.js","redux/constants/reducer.js","utils/log.js","net/query.js","net/NetError.js","redux/store.js","redux/reducers/index.js"],"names":["userExistsQuery","updateUserMutation","userLoginFragement","userSignupMutation","concat","userLoginMutation","forgotPasswordMutation","changePasswordMutation","changePasswordWithTokenMutation","getCollaborationRequestsQuery","getUserDataQuery","updateCollaborationRequestMutation","respondToCollaborationRequestMutation","blockFragment","storageAvailable","type","storage","window","x","setItem","removeItem","e","DOMException","code","name","length","appLocalStorage","localStorage","appSessionStorage","sessionStorage","getStorageType","storageType","defaultStorageType","key","data","storageObject","arguments","undefined","getItem","tokenStorageName","signup","_x","_signup","apply","this","_callee","user","userFields","result","regenerator_default","a","wrap","_context","prev","next","query","getDataFromObj","sent","token","abrupt","stop","login","_x2","_login","_callee2","prevToken","_context2","email","password","console","log","remember","logout","updateUser","auth","changePassword","_x3","_changePassword","_callee3","_context3","forgotPassword","userExists","updateCollaborationRequest","request","customId","changePasswordWithToken","respondToCollaborationRequest","response","getCollaborationRequests","getUserData","getSavedUserData","_getSavedUserData","_callee4","userToken","_ref","_context4","__webpack_require__","d","__webpack_exports__","indexArray","dot_prop_immutable__WEBPACK_IMPORTED_MODULE_0__","dot_prop_immutable__WEBPACK_IMPORTED_MODULE_0___default","n","obj","dataArr","addEmpty","forEach","field","dotProp","get","defaultIndexer","path","JSON","stringify","arr","_ref$indexer","indexer","reduce","accumulator","current","r","addBlock","updateBlock","deleteBlock","getBlockChildren","addCollaborators","removeCollaborator","getCollaborators","getCollabRequests","getRoleBlocks","toggleTask","revokeRequest","_auth__WEBPACK_IMPORTED_MODULE_0__","_schema_block__WEBPACK_IMPORTED_MODULE_1__","_utils_object__WEBPACK_IMPORTED_MODULE_2__","blockParamFields","block","addBlockMutation","dataFields","updateBlockMutation","deleteBlockMutation","types","getBlockChildrenQuery","collaborators","body","expiresAt","collaboratorFields","addCollaboratorsMutation","map","c","collaborator","removeCollaboratorMutation","getCollaboratorsQuery","getCollabRequestsQuery","getRoleBlocksQuery","toggleTaskMutation","revokeRequestMutation","module","exports","errorFragment","queryWithAuth","_x4","_x5","_queryWithAuth","headers","netQuery","variables","process","requestToken","C_Users_yword_Desktop_sk_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","NetError","Object","C_Users_yword_Desktop_sk_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_1__","Authorization","store","subscribe","state","getState","connect","props","react_default","createElement","Redirect","to","className","Link","getWindowWidth","innerWidth","document","clientWidth","documentElement","MenuItem","Menu","Item","AppMenu","_this","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","onToggleMenu","setState","prevState","collapsed","onSelectMenu","event","currentItemKey","menuItems","_this$state","currentItem","find","item","CurrentComponent","component","windowWidth","menuDrawerWidth","style","height","display","flexDirection","drawer","width","onClose","visible","placement","es_menu","defaultSelectedKeys","onClick","marginTop","icon","theme","iconTheme","label","es_button","React","Component","defaultProps","permittedChildrenTypes","root","org","project","group","task","makeMerge","MERGE","makeDelete","DELETE","makeMultiple","actions","MULTIPLE","mergeDataByPath","setDataByPath","SET","makeSet","clearState","CLEAR_STATE","netRoutes","netInterface","_netInterface","route","_len","_key","_args","Array","require","getId","makeBlockHandlers","dispatch","prepareBlockFromEditData","expectedEndAt","valueOf","onAdd","_onAdd","asyncToGenerator","mark","parent","createdAt","Date","now","createdBy","color","randomColor","parents","push","taskCollaborators","onUpdate","onToggle","collaboratorIndex","findIndex","userId","completedAt","onDelete","onAddCollaborators","_ref2","message","statusHistory","status","date","onUpdateCollaborator","objectSpread","orgId","isArray","_getBlockChildren","_ref3","blocks","blockMappedToType","blk","typeMap","_getCollaborators","_ref4","_getCollaborationRequests","_ref5","requests","AddDropdownButton","menu","AddDropdownButton_MenuItem","dropdown","overlay","trigger","Group","fetchingChildren","loadBlockData","prevProps","updateFetchingState","newState","areBlockChildrenLoaded","keys","fetchChildren","blockHandlers","_this$props2","children","onClickAddChild","onEdit","childrenTypes","row","col","span","minHeight","fontWeight","textAlign","marginLeft","simplebar_react_esm","applyErrors","form","errors","formValuesObj","error","fieldName","value","getFieldsValue","setFields","withSpinner","displayName","WithSpinner","_React$Component","_getPrototypeOf2","args","spinning","toggleSpinning","inherits","createClass","forwardedRef","spin","indicator","fontSize","assign","ref","forwardRef","spinnerRef","FormWrapper","handleSubmit","_this$props","onSubmit","preventDefault","validateFieldsAndScroll","t0","Error","stateError","finish","applyFieldErrors","_this$props3","title","formProps","es_form","lineHeight","FormItem","Form","ComputeForm","model","render","FieldComponent","renderedFieldComponent","labelCol","wrapperCol","extra","hasFeedback","noDecorate","getFieldDecorator","rules","validateFirst","initialValue","getValue","valuePropName","computedForm","fields","renderField","components_FormWrapper","renderFields","makeDescriptorFieldsRequired","descriptor","rule","replaceRule","required","makeConfirmValidator","field0","field1","msg","cb","source","value0","getFieldValue","value1","fieldToUpdate","fieldValue","defineProperty","makeNameExistsValidator","existingNames","toLowerCase","nameExists","blockDescriptor","max","transform","trim","pattern","description","taskDescriptor","groupDescriptor","projectDescriptor","orgDescriptor","modalWrap","defaultTitle","ModalWrappedComponent","updateWindowData","modalIsMounted","currentDeviceWidth","throttle","addEventListener","removeEventListener","WrappedComponent","drawerWidth","TextArea","Input","EditGroup","self","assertThisInitialized","autoComplete","toConsumableArray","validator","existingGroups","autosize","minRows","maxRows","submit","Button","htmlType","hideRequiredMark","compute_form_ComputeForm","create","priorityToColorMap","not important","important","very important","Priority","level","cover","EditPriority","onChange","backgroundColor","cursor","Thumbnail","renderInfo","colorStyle","colorClassName","colorSpan","hoverable","cSpan","hov","gutter","TaskCollaborator","collaboratorTaskData","onUnassign","es_switch","disabled","checked","marginRight","padding","CollaboratorThumbnail","headerValue","latestStatus","getLatestStatus","Fragment","moment","fromNow","maxWidth","AssignTask","onAddCollaborator","existingTaskCollaboratorsIdMap","assignedAt","assignedBy","setFieldsValue","onUnassignCollaborator","index","delete","collaboratorsIdMap","defaultTaskCollaborators","_this2","options","es_select","Option","Thumnail_CollaboratorThumbnail","placeholder","i","_this3","TaskCollaborator_TaskCollaborator","renderCollaborators","renderSelectCollaborators","EditTask","submittedData","priority","dataType","AssignTask_AssignTask","defaultAssignedTo","DatePicker","showTime","format","completeAt","Task","getCollaborator","offset","EditProject","existingProjects","ProjectThumbnail","rootBlock","group_RootGroup","waitForPromises","promises","Promise","resolve","reject","nextPromise","p","then","success","catch","failed","reportPromise","CollaboratorForm","clearHelpers","clearErrors","setError","emailError","messageError","hasError","getError","validate","validationPromises","pValidator","onAddField","onDeleteField","onUpdateField","set","onUpdateEmail","emailValidator","onUpdateMessage","messageValidator","onUpdateExpiresAt","momentDate","v","emailDescriptor","existingCollaborators","existingCollaborationRequests","messageDescriptor","validateCollaborator","asyncValidator","bind","getFieldError","help","marginBottom","input","target","date_picker","disabledDate","subtract","endOf","es_divider","AddCollaborator","formRef","createRef","add","AddCollaboratorForm_CollaboratorForm","BitSwitch","defaultValue","option1Style","option2Style","ExtFormWrapper","labelName","dateFormat","immutable","min","xs","sm","md","editing","option","BitSwitch_BitSwitch","input_number","content","renderForm","components_ExtFormWrapper","Collaborators","showAddCollaboratorForm","showCollaborator","toggleCollaboratorForm","items","renderItem","list","dataSource","grid","lg","alignItems","renderList","collaborationRequests","onBack","collaborator_CollaboratorForm","collaborator_AddCollaborator","tabs","TabPane","tab","renderCollaborationRequests","RootGroup","onSubmitData","formType","toggleForm","setCurrentProject","toggleShowCollaborators","showCollaborators","fetchingCollaborators","fetchingCollaborationRequests","_this$state2","areBlockCollaboratorsLoaded","areBlockCollaborationRequestsLoaded","_this$state3","fetchCollaborators","fetchCollaborationRequests","_this$props4","tasks","_this$props5","taskId","MiniTask","projects","projectId","by","_this4","_this$props6","isFromRoot","_this$state4","isUserRootBlock","Collaborators_Collaborators","bench","RootGroupGenericContainer","parentBlock","project_EditProject","getExistingNames","group_EditGroup","task_EditTask","hasChildren","group_Group","renderTasks","renderProjects","groupId","RootGroupContainer","fetchRootData","ownProps","_fetchRootData","orgs","OrgThumbnail","EditOrg","existingOrgs","Orgs","setCurrentOrg","id","currentOrg","toggleNewOrgForm","showNewOrgForm","onCreateOrg","org_EditOrg","OrgsContainer","org_Orgs","NotificationBody","notification","_possibleUserResponse","possibleUserResponses","onRespond","getUserResponse","from","blockName","toDateString","borderRadius","margin","NotificationListItem","isSelected","readAt","NotificationList","onClickNotication","currentNotification","onClickNotification","notifications","renderType","getRenderType","setRenderType","leading","notification_NotificationBody","notificationId","renderCurrentNotification","renderNotifications","NotificationsContainer","fetchNotifications","notification_NotificationList","_onClickNotification","update","_onRespond","requestIsValid","invalidStatuses","accepted","declined","revoked","_fetchNotifications","notificationsObj","Signup","confirmPasswordValidator","confirmEmailValidator","userDescriptor","confirmEmail","confirmPassword","_onSubmit","Login","Checkbox","ForgotPassword","Password","ChangePassword","MainAppContainer","onLogout","app_menu_AppMenu","renderComponent","ComponentX","justify","App","userIsLoggedIn","history","location","pathname","indexOf","Switch","Route","SignupContainer","LoginContainer","ForgotPasswordContainer","ChangePasswordWithTokenContainer","exact","Web","withRouter","rootElement","getElementById","ReactDOM","es","BrowserRouter","src_App","devConsole","devError","serverAddr","_query","hd","resultBody","Content-Type","fetch","method","mode","ok","json","statusText","NetFieldError","C_Users_yword_Desktop_sk_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_4__","C_Users_yword_Desktop_sk_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_0__","C_Users_yword_Desktop_sk_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_1__","createStore","reducer","action","merge","todo","__REDUX_DEVTOOLS_EXTENSION__"],"mappings":"qIAEaA,EAAe,0MAcfC,EAAkB,kMAalBC,EAAkB,qOAiBlBC,EAAkB,OAAAC,OAC3BF,EAD2B,4JAWlBG,EAAiB,OAAAD,OAC1BF,EAD0B,6LAWjBI,EAAsB,0LAatBC,EAAsB,OAAAH,OAC/BF,EAD+B,+KAWtBM,EAA+B,OAAAJ,OACxCF,EADwC,0MAa/BO,EAA6B,mpBAuC7BC,EAAgB,OAAAN,OACzBF,EADyB,oHAWhBS,EAAkC,uSAelCC,EAAqC,OAAAR,OAC9CS,gBAD8C,iXC1K3C,SAASC,EAAiBC,GAC/B,IACE,IAAIC,EAAUC,OAAOF,GACnBG,EAAI,mBAGN,OAFAF,EAAQG,QAAQD,EAAGA,GACnBF,EAAQI,WAAWF,IACZ,EACP,MAAOG,GACP,OACEA,aAAaC,eAED,KAAXD,EAAEE,MAEU,OAAXF,EAAEE,MAGS,uBAAXF,EAAEG,MAES,+BAAXH,EAAEG,OAEe,IAAnBR,EAAQS,QAKP,IAAIC,EAAkBZ,EAAiB,gBAC1CG,OAAOU,aACP,KACOC,EAAoBd,EAAiB,kBAC5CG,OAAOY,eACP,KAEJ,SAASC,EAAeC,GACtB,OAAQA,GACN,IAAK,QACL,IAAK,eACH,OAAOL,EAET,IAAK,UACL,IAAK,iBACL,QACE,OAAOE,GAIb,IAAMI,EAAqB,QAEpB,SAASb,EAAQc,EAAKC,GAAwC,IAC/DC,EAAgBL,EAD+CM,UAAAX,OAAA,QAAAY,IAAAD,UAAA,GAAAA,UAAA,GAApBJ,GAG3CG,GACFA,EAAchB,QAAQc,EAAKC,GAYxB,SAASI,EAAQL,GAAuC,IACzDE,EAAgBL,EADyCM,UAAAX,OAAA,QAAAY,IAAAD,UAAA,GAAAA,UAAA,GAApBJ,GAGzC,GAAIG,EACF,OAAOA,EAAcG,QAAQL,wlBCjDjC,IAAMM,EAAmB,IAGlB,SAAeC,EAAtBC,GAAA,OAAAC,EAAAC,MAAAC,KAAAR,sDAAO,SAAAS,EAAsBC,GAAtB,IAAAC,EAAAC,EAAA,OAAAC,EAAAC,EAAAC,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cACCP,EAAa,CAAC,OAAQ,WAAY,SADnCK,EAAAE,KAAA,EAGcC,YACjB,KACApD,EACA,CAAE2C,KAAMU,YAAeV,EAAMC,IAC7B,oBAPG,cAGDC,EAHCI,EAAAK,KAULtC,EAAQoB,EAAkBS,EAAOU,MAAO,SAVnCN,EAAAO,OAAA,SAYEX,GAZF,wBAAAI,EAAAQ,SAAAf,6BAeA,SAAegB,EAAtBC,GAAA,OAAAC,EAAApB,MAAAC,KAAAR,sDAAO,SAAA4B,EAAqBlB,GAArB,IAAAE,EAAAiB,EAAA,OAAAhB,EAAAC,EAAAC,KAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAZ,MAAA,cAAAY,EAAAZ,KAAA,EACcC,YACjB,KACAlD,EACA,CAAE8D,MAAOrB,EAAKqB,MAAOC,SAAUtB,EAAKsB,UACpC,mBALG,cACDpB,EADCkB,EAAAT,KAQLY,QAAQC,IAAItB,GACNiB,EAAY3B,EAAQC,IAEtBO,EAAKyB,UAAYN,IACnB9C,EAAQoB,EAAkBS,EAAOU,MAAO,SAZrCQ,EAAAP,OAAA,SAeEX,GAfF,wBAAAkB,EAAAN,SAAAI,6BAkBA,SAASQ,KDCT,SAAoBvC,GAAuC,IAC5DE,EAAgBL,EAD4CM,UAAAX,OAAA,QAAAY,IAAAD,UAAA,GAAAA,UAAA,GAApBJ,GAGxCG,GACFA,EAAcf,WAAWa,GCJ3Bb,CAAWmB,EAAkB,SAGxB,SAASkC,EAAW3B,GAGzB,OAAO4B,YACL,KACAzE,EACA,CAAE6C,KAAMU,YAAeV,EALA,CAAC,OAAQ,+BAMhC,wBAIG,SAAe6B,EAAtBC,GAAA,OAAAC,EAAAlC,MAAAC,KAAAR,sDAAO,SAAA0C,EAA8BV,GAA9B,IAAApB,EAAA,OAAAC,EAAAC,EAAAC,KAAA,SAAA4B,GAAA,cAAAA,EAAA1B,KAAA0B,EAAAzB,MAAA,cAAAyB,EAAAzB,KAAA,EACcoB,YACjB,KACAnE,EACA,CAAE6D,YACF,4BALG,cACDpB,EADC+B,EAAAtB,KAQWnB,EAAQC,IAGtBpB,EAAQoB,EAAkBS,EAAOU,MAAO,SAXrCqB,EAAApB,OAAA,SAcEX,GAdF,wBAAA+B,EAAAnB,SAAAkB,6BAiBA,SAASE,EAAeb,GAC7B,OAAOZ,YACL,KACAjD,EACA,CAAE6D,SACF,4BAIG,SAASc,EAAWd,GACzB,OAAOZ,YAAM,KAAMvD,EAAiB,CAAEmE,SAAS,wBAG1C,SAASe,EAA2BC,EAASjD,GAGlD,OAAOwC,YACL,KACA/D,EACA,CACEyE,SAAUD,EAAQC,SAClBlD,KAAMsB,YAAetB,EAPG,CAAC,YAS3B,wCAIG,SAASmD,EAAwB3B,GACtC,OAAOH,YACL,KACA/C,EACA,CAAE4D,SAAUV,GACZ,qCAIG,SAAS4B,EAA8BH,EAASI,GACrD,OAAOb,YACL,KACA9D,EACA,CAAE2E,WAAUH,SAAUD,EAAQC,UAC9B,2CAIG,SAASI,IACd,OAAOd,YACL,KACAjE,EACA,GACA,sCAIG,SAASgF,EAAY/B,GAC1B,OAAOgB,YAAK,KAAMhE,EAAkB,GAAI,wBAAyBgD,GAG5D,SAAegC,IAAtB,OAAAC,EAAAhD,MAAAC,KAAAR,sDAAO,SAAAwD,IAAA,IAAAC,EAAAC,EAAAhD,EAAAY,EAAA,OAAAT,EAAAC,EAAAC,KAAA,SAAA4C,GAAA,cAAAA,EAAA1C,KAAA0C,EAAAzC,MAAA,YACDuC,EAAYvD,EAAQC,IADnB,CAAAwD,EAAAzC,KAAA,eAAAyC,EAAAzC,KAAA,EAIyBmC,EAAYI,GAJrC,cAAAC,EAAAC,EAAAtC,KAIGX,EAJHgD,EAIGhD,KAAMY,EAJToC,EAISpC,MACZvC,EAAQoB,EAAkBmB,GALvBqC,EAAApC,OAAA,SAMI,CAAEb,OAAMY,UANZ,wBAAAqC,EAAAnC,SAAAgC,iJChJPI,EAAAC,EAAAC,EAAA,sBAAA1C,IAAAwC,EAAAC,EAAAC,EAAA,sBAAAC,IAAA,IAAAC,EAAAJ,EAAA,IAAAK,EAAAL,EAAAM,EAAAF,GAEO,SAAS5C,EAAe+C,EAAKC,EAASC,GAC3C,IAAIzD,EAAS,GAUb,OARAwD,EAAQE,QAAQ,SAAAC,GACd,IAAIzE,EAAO0E,IAAQC,IAAIN,EAAKI,IAExBzE,GAAQuE,KACVzD,EAAO2D,GAASzE,KAIbc,EAGT,SAAS8D,EAAe5E,EAAM6E,GAC5B,OAAIA,EACKH,IAAQC,IAAI3E,EAAM6E,GAGpBC,KAAKC,UAAU/E,GAGjB,SAASiE,IAA8D,IAAnDe,EAAmD9E,UAAAX,OAAA,QAAAY,IAAAD,UAAA,GAAAA,UAAA,GAA7C,GAA6C0D,EAAA1D,UAAAX,OAAA,QAAAY,IAAAD,UAAA,GAAAA,UAAA,GAAJ,GAAnC2E,EAAuCjB,EAAvCiB,KAAuCI,EAAArB,EAAjCsB,eAAiC,IAAAD,EAAvBL,EAAuBK,EAM5E,OALaD,EAAIG,OAAO,SAACC,EAAaC,GAEpC,OADAD,EAAYF,EAAQG,EAASR,EAAMG,IAAQK,EACpCD,GACN,uCC5BLtB,EAAAwB,EAAAtB,GAAAF,EAAAC,EAAAC,EAAA,6BAAAuB,IAAAzB,EAAAC,EAAAC,EAAA,gCAAAwB,IAAA1B,EAAAC,EAAAC,EAAA,gCAAAyB,IAAA3B,EAAAC,EAAAC,EAAA,qCAAA0B,IAAA5B,EAAAC,EAAAC,EAAA,qCAAA2B,IAAA7B,EAAAC,EAAAC,EAAA,uCAAA4B,IAAA9B,EAAAC,EAAAC,EAAA,qCAAA6B,IAAA/B,EAAAC,EAAAC,EAAA,sCAAA8B,IAAAhC,EAAAC,EAAAC,EAAA,kCAAA+B,IAAAjC,EAAAC,EAAAC,EAAA,+BAAAgC,IAAAlC,EAAAC,EAAAC,EAAA,kCAAAiC,IAAA,IAAAC,EAAApC,EAAA,IAAAqC,EAAArC,EAAA,IAAAsC,EAAAtC,EAAA,IAgBMuC,EAAmB,CAAC,YAEnB,SAASd,EAASe,GAcvB,OAAO9D,YACL,KACA+D,mBACA,CAAED,MAAOhF,YAAegF,EAhBX,CACb,OACA,WACA,cACA,gBACA,cACA,QACA,OACA,UACA,OACA,WACA,uBAMA,uBAIG,SAASd,EAAYc,EAAOtG,GACjC,IAAMwG,EAAa,CACjB,OACA,cACA,gBACA,cACA,QACA,WACA,OACA,qBAKF,OAFArE,QAAQC,IAAIpC,EAAMsB,YAAetB,EAAMwG,IAEhChE,YACL,KACAiE,sBACA,CACEH,MAAOhF,YAAegF,EAAOD,GAC7BrG,KAAMsB,YAAetB,EAAMwG,IAE7B,0BAIG,SAASf,EAAYa,GAC1B,OAAO9D,YACL,KACAkE,sBACA,CAAEJ,MAAOhF,YAAegF,EAAOD,IAC/B,0BAIG,SAASX,EAAiBY,EAAOK,GACtC,OAAOnE,YACL,KACAoE,wBACA,CAAED,QAAOL,MAAOhF,YAAegF,EAAOD,IACtC,+BAIG,SAASV,EAAiBW,EAAOO,EAAeC,EAAMC,GAC3D,IAAMC,EAAqB,CAAC,QAAS,OAAQ,YAAa,YAC1D,OAAOxE,YACL,KACAyE,2BACA,CACEH,OACAC,YACAT,MAAOhF,YAAegF,EAAOD,GAC7BQ,cAAeA,EAAcK,IAAI,SAAAC,GAAC,OAChC7F,YAAe6F,EAAGH,MAGtB,+BAIG,SAASpB,EAAmBU,EAAOc,GACxC,OAAO5E,YACL,KACA6E,6BACA,CACEf,MAAOhF,YAAegF,EAAOD,GAC7Be,aAAcA,EAAalE,UAE7B,iCAIG,SAAS2C,EAAiBS,GAC/B,OAAO9D,YACL,KACA8E,wBACA,CACEhB,MAAOhF,YAAegF,EAAOD,IAE/B,+BAIG,SAASP,EAAkBQ,GAChC,OAAO9D,YACL,KACA+E,yBACA,CACEjB,MAAOhF,YAAegF,EAAOD,IAE/B,gCAIG,SAASN,IACd,OAAOvD,YAAK,KAAMgF,qBAAoB,GAAI,4BAGrC,SAASxB,EAAWM,EAAOtG,GAChC,OAAOwC,YACL,KACAiF,qBACA,CACEzH,OACAsG,MAAOhF,YAAegF,EAAOD,IAE/B,yBAIG,SAASJ,EAAcK,EAAOrD,GACnC,OAAOT,YACL,KACAkF,wBACA,CACEzE,QAASA,EAAQC,SACjBoD,MAAOhF,YAAegF,EAAOD,IAE/B,gDCvJJsB,EAAOC,QAAU,CACfC,cARiB,sNCKfjH,EAAO,KAMI,SAAekH,EAA9BvH,EAAAqB,EAAAc,EAAAqF,EAAAC,GAAA,OAAAC,EAAAxH,MAAAC,KAAAR,sDAAe,SAAAS,EACbuH,EACAC,EACAC,EACAC,EACA7G,GALa,IAAA8G,EAAA,OAAAC,EAAAvH,EAAAC,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,UAOPkH,EAAgB1H,GAAQA,EAAKY,OAAUA,EAPhC,CAAAN,EAAAE,KAAA,cAUL,IAAIoH,IAAS,2BAVR,cAAAtH,EAAAE,KAAA,EAaAC,YAAMoH,OAAAC,EAAA,EAAAD,CAAA,CAEfE,cAAa,UAAAzK,OAAYoK,IACtBJ,GAELC,EACAC,EACAC,GApBW,cAAAnH,EAAAO,OAAA,SAAAP,EAAAK,MAAA,wBAAAL,EAAAQ,SAAAf,6BALfiI,IAAMC,UAAU,WACd,IAAMC,EAAQF,IAAMG,WACpBnI,EAAO+D,IAAImE,EAAO,0eCmBLE,kBANf,SAAyBF,GACvB,MAAO,CACLlI,KAAMkI,EAAMlI,OAIDoI,CAtBf,SAAaC,GAEX,OADiBA,EAATrI,KAECsI,EAAAlI,EAAAmI,cAACC,EAAA,EAAD,CAAUC,GAAG,SAIpBH,EAAAlI,EAAAmI,cAAA,OAAKG,UAAU,OACbJ,EAAAlI,EAAAmI,cAACI,EAAA,EAAD,CAAMF,GAAG,WAAT,UACAH,EAAAlI,EAAAmI,cAACI,EAAA,EAAD,CAAMF,GAAG,UAAT,YCdC,SAASG,IACd,OACEzK,OAAO0K,YACPC,SAAS5C,KAAK6C,aACdD,SAASE,gBAAgBD,kDCEvBE,UAAWC,IAAKC,MAKhBC,cACJ,SAAAA,EAAYf,GAAO,IAAAgB,EAAA,OAAAxB,OAAAyB,EAAA,EAAAzB,CAAA/H,KAAAsJ,IACjBC,EAAAxB,OAAA0B,EAAA,EAAA1B,CAAA/H,KAAA+H,OAAA2B,EAAA,EAAA3B,CAAAuB,GAAAK,KAAA3J,KAAMuI,KAYRqB,aAAe,WACbL,EAAKM,SAAS,SAAAC,GAAS,MAAK,CAAEC,WAAYD,EAAUC,cAdnCR,EAiBnBS,aAAe,SAAAC,GAAS,IACdD,EAAiBT,EAAKhB,MAAtByB,aAERT,EAAKM,SACH,CACEK,eAAgBD,EAAM5K,IACtB0K,WAAW,GAEb,WACMC,GACFA,EAAaC,EAAM5K,QApBzBkK,EAAKnB,MAAQ,CACX2B,UAAWxB,EAAMwB,UACjBG,eAAgB3B,EAAM2B,gBATPX,wEA0DV,IACCY,EAAcnK,KAAKuI,MAAnB4B,UADDC,EAE+BpK,KAAKoI,MAAnC8B,EAFDE,EAECF,eAAgBH,EAFjBK,EAEiBL,UAClBM,EAAcF,EAAUG,KAAK,SAAAC,GAAI,OAAIA,EAAKlL,MAAQ6K,IAClDM,EAAmBH,EAAYI,UAC/BC,EAAc5B,IAChB6B,EAAkBD,GAAeA,EAAc,IAAM,EAAI,GAG7D,OACElC,EAAAlI,EAAAmI,cAAA,OAAKmC,MAAO,CAAEC,OAAQ,OAAQC,QAAS,OAAQC,cAAe,WAC5DvC,EAAAlI,EAAAmI,cAACuC,EAAA,EAAD,CACEC,MAAON,EACPO,QAASlL,KAAK4J,aACduB,SAAUpB,EACVqB,UAAU,QAEV5C,EAAAlI,EAAAmI,cAAC4C,EAAA,EAAD,CACEC,oBAAqB,CAACpB,GACtBqB,QAASvL,KAAKgK,aACdY,MAAO,CAAEY,UAAW,QAEnBrB,EAAU3D,IAAI,SAAA+D,GAAI,OACjB/B,EAAAlI,EAAAmI,cAACU,EAAD,CAAU9J,IAAKkL,EAAKlL,KACjBkL,EAAKkB,MAAQjD,EAAAlI,EAAAmI,cAACgD,EAAA,EAAD,CAAMtN,KAAMoM,EAAKkB,KAAMC,MAAOnB,EAAKoB,YACjDnD,EAAAlI,EAAAmI,cAAA,YAAO8B,EAAKqB,YAKpBpD,EAAAlI,EAAAmI,cAAA,OAAKG,UAAU,mBACbJ,EAAAlI,EAAAmI,cAACoD,EAAA,EAAD,CACEJ,KAAM1B,EAAY,cAAgB,YAClCwB,QAASvL,KAAK4J,gBAGlBpB,EAAAlI,EAAAmI,cAAA,OAAKG,UAAU,oBACZ4B,GAAoBhC,EAAAlI,EAAAmI,cAAC+B,EAAqBH,EAAY9B,gBAhG3CuD,IAAMC,WAuG5BzC,EAAQ0C,aA3GoB,CAC1BjC,WAAW,GA4GET,QC3GR,IAAM2C,EAAyB,CACpCC,KAAM,CAAC,UAAW,QAAS,QAC3BC,IAAK,CAAC,UAAW,QAAS,QAC1BC,QAAS,CAAC,QAAS,QACnBC,MAAO,CAAC,UAAW,QACnBC,KAAM,YCND,SAASC,EAAUpI,EAAM7E,GAC9B,MAAO,CACLA,OACA6E,OACAhG,KAAMqO,KAIH,SAASC,EAAWtI,GACzB,MAAO,CACLA,OACAhG,KAAMuO,KAIH,SAASC,EAAaC,GAC3B,MAAO,CACLA,UACAzO,KAAM0O,KCRH,SAASC,EAAgB3I,EAAM7E,GACpC,OAAOiN,EAAUpI,EAAM7E,GAOlB,SAASyN,EAAc5I,EAAM7E,GAClC,ODGK,SAAiB6E,EAAM7E,GAC5B,MAAO,CACL6E,OACA7E,OACAnB,KAAM6O,KCPDC,CAAQ9I,EAAM7E,GAGhB,SAAS4N,IACd,MDQO,CACL/O,KAAMgP,0BEtCNC,EAAY,KAWD,SAAeC,EAA9BxN,GAAA,OAAAyN,EAAAvN,MAAAC,KAAAR,sDAAe,SAAAS,EAA4BkE,GAA5B,IAAAoJ,EAAAC,EAAAlO,EAAAmO,EAAAC,EAAAlO,UAAA,OAAAa,EAAAC,EAAAC,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,YACT6M,EAAQtJ,IAAImJ,EAAWjJ,IADd,CAAA3D,EAAAE,KAAA,YAAA8M,EAAAE,EAAA7O,OAAqCS,EAArC,IAAAqO,MAAAH,EAAA,EAAAA,EAAA,KAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAAqCnO,EAArCmO,EAAA,GAAAC,EAAAD,GAAA,OAAAjN,EAAAE,KAAA,EAGE6M,EAAKxN,WAAL,EAAST,GAHX,cAAAkB,EAAAO,OAAA,SAAAP,EAAAK,MAAA,cAAAL,EAAAO,OAAA,SAMN,MANM,wBAAAP,EAAAQ,SAAAf,6BALfmN,EAAY,CACVxH,MAAOgI,EAAQ,KACf1N,KAAM0N,EAAQ,4BCAVC,UAAQD,EAAQ,MAGf,SAASE,EAAT5K,GAA+C,IAAlB6K,EAAkB7K,EAAlB6K,SAAU7N,EAAQgD,EAARhD,KAC5C,SAAS8N,EAAyBpI,GAKhC,OAJIA,EAAMqI,gBACRrI,EAAMqI,cAAgBrI,EAAMqI,cAAcC,WAGrCtI,EAGT,MAAO,CACCuI,MADD,eAAAC,EAAArG,OAAAsG,EAAA,EAAAtG,CAAA1H,EAAAC,EAAAgO,KAAA,SAAArO,EACO2F,EAAO2I,GADd,OAAAlO,EAAAC,EAAAC,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,OAEHkF,EAAM4I,UAAYC,KAAKC,MACvB9I,EAAM+I,UAAYzO,EAAKsC,SACvBoD,EAAMpD,SAAWqL,IACjBjI,EAAMgJ,MAAQC,MAEVN,GACF3I,EAAMzB,KAAN,GAAA3G,OAAgB+Q,EAAOpK,KAAvB,KAAA3G,OAA+BoI,EAAMzH,KAArC,KAAAX,OAA6CoI,EAAMpD,UACnDoD,EAAMkJ,QAAU,GACZP,EAAOO,UACTlJ,EAAMkJ,QAAUlJ,EAAMkJ,QAAQtR,OAAO+Q,EAAOO,UAG9ClJ,EAAMkJ,QAAQC,KAAKR,EAAO/L,WAE1BoD,EAAMzB,KAAN,GAAA3G,OAAgBoI,EAAMzH,KAAtB,KAAAX,OAA8BoI,EAAMpD,UAKnB,SAFnBoD,EAAQoI,EAAyBpI,IAEvBzH,MACRyH,EAAMO,cAAgB,CAACjG,GACvB0F,EAAMzB,KAAN,QAAA3G,OAAqBoI,EAAMpD,UAC3BuL,EAAShB,EAAc,iBAAkB,CAACnH,EAAMpD,aACxB,SAAfoD,EAAMzH,OACVyH,EAAMoJ,oBACTpJ,EAAMoJ,kBAAoB,KAI1B/C,EAAuBrG,EAAMzH,OAC/B8N,EAAuBrG,EAAMzH,MAAM2F,QAAQ,SAAA3F,GACzCyH,EAAMzH,GAAQ,KAIlB4P,EAAShB,EAAcnH,EAAMzB,KAAMyB,IACnCyH,EAAa,iBAAkBzH,GAtC5B,yBAAApF,EAAAQ,SAAAf,MAAA,gBAAAJ,EAAAqB,GAAA,OAAAkN,EAAArO,MAAAC,KAAAR,YAAA,GAyCLyP,SAzCK,SAyCIrJ,EAAOtG,GACdA,EAAO0O,EAAyB1O,GAChCyO,EAASjB,EAAgBlH,EAAMzB,KAAM7E,IACrC+N,EAAa,oBAAqBzH,EAAOtG,IAG3C4P,SA/CK,SA+CItJ,GACP,IAAMuJ,EAAoBvJ,EAAMoJ,kBAAkBI,UAChD,SAAA3I,GAAC,OAAIA,EAAE4I,SAAWnP,EAAKsC,WAGnBkE,EAAed,EAAMoJ,kBAAkBG,GACvChL,EAAI,GAAA3G,OACRoI,EAAMzB,KADE,uBAAA3G,OAEY2R,EAFZ,gBAIVpB,EACEhB,EAAc5I,EAAMuC,EAAa4I,YAAc,KAAOb,KAAKC,QAG7DrB,EAAa,mBAAoBzH,GAAO,IAG1C2J,SAhEK,SAgEI3J,GACPmI,EFhEGtB,EEgEuB7G,EAAMzB,OAChCkJ,EAAa,oBAAqBzH,IAGpC4J,mBArEK,SAqEc5J,EArEd6J,GAqE4D,IAArCtJ,EAAqCsJ,EAArCtJ,cAAeuJ,EAAsBD,EAAtBC,QAASrJ,EAAaoJ,EAAbpJ,UAClDF,EAAgBA,EAAcK,IAAI,SAAAC,GAahC,OAZKA,EAAEiJ,UACLjJ,EAAEiJ,QAAUA,GAGTjJ,EAAEJ,UAEII,EAAEJ,UAAU6H,UACrBzH,EAAEJ,UAAYI,EAAEJ,UAAU6H,WAF1BzH,EAAEJ,UAAYA,EAKhBI,EAAEjE,SAAWqL,IACbpH,EAAEkJ,cAAgB,CAAC,CAAEC,OAAQ,UAAWC,KAAMpB,KAAKC,QAC5CjI,IAGTsH,EACEjB,EAAe,GAAAtP,OAAIoI,EAAMzB,KAAV,0BAAwCgC,IAGzDkH,EACE,yBACAzH,EACAO,EACAuJ,EACArJ,IAIJyJ,qBAnGK,SAmGgBlK,EAAOc,EAAcpH,GACxCoH,EAAYqB,OAAAgI,EAAA,EAAAhI,CAAA,GAAQrB,EAAiBpH,GACrC,IAAI0Q,EACFrC,MAAMsC,QAAQrK,EAAMkJ,UAAYlJ,EAAMkJ,QAAQjQ,OAAS,EACnD+G,EAAMkJ,QAAQ,GACdlJ,EAAMpD,SAEZuL,EAAShB,EAAa,QAAAvP,OAASwS,EAAT,qBAGlBhL,iBA7GD,eAAAkL,EAAAnI,OAAAsG,EAAA,EAAAtG,CAAA1H,EAAAC,EAAAgO,KAAA,SAAAlN,EA6GkBwE,GA7GlB,IAAAuK,EAAAC,EAAAC,EAAA,OAAAhQ,EAAAC,EAAAC,KAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAZ,MAAA,cAAAY,EAAAZ,KAAA,EA8GsB2M,EAAa,yBAA0BzH,GA9G7D,OAAAuK,EAAA7O,EAAAT,KA8GKuP,EA9GLD,EA8GKC,OACJC,EAAoB,GAEpBpE,EAAuBrG,EAAMzH,OAC/B8N,EAAuBrG,EAAMzH,MAAM2F,QAAQ,SAAA3F,GACzCkS,EAAkBlS,GAAQ,KAI9BiS,EAAOtM,QAAQ,SAAAwM,GACbA,EAAInM,KAAJ,GAAA3G,OAAcoI,EAAMzB,KAApB,KAAA3G,OAA4B8S,EAAInS,KAAhC,KAAAX,OAAwC8S,EAAI9N,UAC5C,IAAI+N,EAAUF,EAAkBC,EAAInS,OAAS,GAC7CoS,EAAQD,EAAI9N,UAAY8N,EACxBD,EAAkBC,EAAInS,MAAQoS,IAGhCxC,EAASjB,EAAgBlH,EAAMzB,KAAMkM,IA9HlC,wBAAA/O,EAAAN,SAAAI,MAAA,gBAAAY,GAAA,OAAAkO,EAAAnQ,MAAAC,KAAAR,YAAA,GAiIC2F,iBAjID,eAAAqL,EAAAzI,OAAAsG,EAAA,EAAAtG,CAAA1H,EAAAC,EAAAgO,KAAA,SAAApM,EAiIkB0D,GAjIlB,IAAA6K,EAAAtK,EAAA,OAAA9F,EAAAC,EAAAC,KAAA,SAAA4B,GAAA,cAAAA,EAAA1B,KAAA0B,EAAAzB,MAAA,cAAAyB,EAAAzB,KAAA,EAkI6B2M,EAC9B,yBACAzH,GApIC,OAAA6K,EAAAtO,EAAAtB,KAkIKsF,EAlILsK,EAkIKtK,cAKR4H,EAASjB,EAAe,GAAAtP,OAAIoI,EAAMzB,KAAV,kBAAgCgC,IAvIrD,wBAAAhE,EAAAnB,SAAAkB,MAAA,gBAAAmF,GAAA,OAAAmJ,EAAAzQ,MAAAC,KAAAR,YAAA,GA0ICoD,yBA1ID,eAAA8N,EAAA3I,OAAAsG,EAAA,EAAAtG,CAAA1H,EAAAC,EAAAgO,KAAA,SAAAtL,EA0I0B4C,GA1I1B,IAAA+K,EAAAC,EAAA,OAAAvQ,EAAAC,EAAAC,KAAA,SAAA4C,GAAA,cAAAA,EAAA1C,KAAA0C,EAAAzC,MAAA,cAAAyC,EAAAzC,KAAA,EA2IwB2M,EAAa,0BAA2BzH,GA3IhE,OAAA+K,EAAAxN,EAAAtC,KA2IK+P,EA3ILD,EA2IKC,SACR7C,EACEjB,EAAe,GAAAtP,OAAIoI,EAAMzB,KAAV,0BAAwCyM,IA7ItD,wBAAAzN,EAAAnC,SAAAgC,MAAA,gBAAAsE,GAAA,OAAAoJ,EAAA3Q,MAAAC,KAAAR,YAAA,2CCnBH2J,EAAWC,IAAKC,KAEP,SAASwH,GAAkBtI,GAAO,IACvCtC,EAA0BsC,EAA1BtC,MAAOsF,EAAmBhD,EAAnBgD,QAASK,EAAUrD,EAAVqD,MAClBkF,EACJtI,EAAAlI,EAAAmI,cAAC4C,EAAA,EAAD,CAAME,QAAS,SAAAtB,GAAK,OAAIsB,EAAQtB,EAAM5K,OACnC4G,EAAMO,IAAI,SAAArI,GAET,OADAA,EAAuB,kBAATA,EAAoB,CAAEyN,MAAOzN,GAASA,EAElDqK,EAAAlI,EAAAmI,cAACsI,EAAD,CAAU1R,IAAKlB,EAAKyN,OACjBzN,EAAKsN,MAAQjD,EAAAlI,EAAAmI,cAACgD,EAAA,EAAD,CAAMtN,KAAMA,EAAKsN,OAC9BtN,EAAKyN,UAOhB,OACEpD,EAAAlI,EAAAmI,cAACuI,EAAA,EAAD,CAAUC,QAASH,EAAMI,QAAS,CAAC,UACjC1I,EAAAlI,EAAAmI,cAACoD,EAAA,EAAD,CAAQJ,KAAK,QAAQG,yBCqHZuF,sNAlIb/I,MAAQ,CACNgJ,kBAAkB,sFAIlBpR,KAAKqR,2DAGYC,GAAW,IACpBjF,EAAUrM,KAAKuI,MAAf8D,MAGNA,GACAiF,EAAUjF,OACVA,EAAM7J,WAAa8O,EAAUjF,MAAM7J,SAEnCxC,KAAKqR,gBAELrR,KAAKuR,oEAIa,IACZH,EAAqBpR,KAAKoI,MAA1BgJ,iBACJI,EAAW,GAEXxR,KAAKyR,0BAA4BL,IACnCI,EAASJ,kBAAmB,GAG1BrJ,OAAO2J,KAAKF,GAAU3S,OAAS,GACjCmB,KAAK6J,SAAS2H,2CAIF,IACNJ,EAAqBpR,KAAKoI,MAA1BgJ,iBACJI,EAAW,GAEVxR,KAAKyR,yBAECL,IACTI,EAASJ,kBAAmB,GAF5BpR,KAAK2R,gBAKH5J,OAAO2J,KAAKF,GAAU3S,OAAS,GACjCmB,KAAK6J,SAAS2H,oDAIO,IACfnF,EAAUrM,KAAKuI,MAAf8D,MAER,IAAKA,EACH,OAAO,EAGT,GAAIJ,EAAuBI,EAAMlO,OACT8N,EAAuBI,EAAMlO,MAAMmM,KAAK,SAAAnM,GAC5D,IAAKkO,EAAMlO,GACT,OAAO,IAKT,OAAO,EAIX,OAAO,qKAI0B6B,KAAKuI,MAA9B8D,UAAOuF,2BACTA,EAAc5M,iBAAiBqH,sIAG9B,IAAAwF,EAQH7R,KAAKuI,MANP8D,EAFKwF,EAELxF,MACAyF,EAHKD,EAGLC,SACAF,EAJKC,EAILD,cACAG,EALKF,EAKLE,gBACAnT,EANKiT,EAMLjT,KACAoT,EAPKH,EAOLG,OAEMZ,EAAqBpR,KAAKoI,MAA1BgJ,iBAEFa,EAAgB5F,EAAQJ,EAAuBI,EAAMlO,MAAQ,KAEnE,OACEqK,EAAAlI,EAAAmI,cAAA,OAAKG,UAAU,YACbJ,EAAAlI,EAAAmI,cAACyJ,EAAA,EAAD,CAAKtJ,UAAU,iBACbJ,EAAAlI,EAAAmI,cAAC0J,EAAA,EAAD,CAAKC,KAAM,GAAIxH,MAAO,CAAEyH,UAAW,SACjC7J,EAAAlI,EAAAmI,cAAA,QAAMmC,MAAO,CAAE0H,WAAY,SACxBjG,EAAQA,EAAMzN,KAAOA,IAGzByN,EACC7D,EAAAlI,EAAAmI,cAAC0J,EAAA,EAAD,CAAKC,KAAM,GAAIxH,MAAO,CAAE2H,UAAW,UAChCN,GAAiBA,EAAcpT,OAAS,GACvC2J,EAAAlI,EAAAmI,cAACoI,GAAD,CACE5K,MAAOgM,EACP1G,QAAS,SAAApN,GAAI,OAAI4T,EAAgB5T,EAAMkO,MAG3C7D,EAAAlI,EAAAmI,cAACoD,EAAA,EAAD,CACEJ,KAAK,OACLF,QAAS,kBAAMyG,EAAO3F,IACtBzB,MAAO,CAAE4H,WAAY,SAEvBhK,EAAAlI,EAAAmI,cAACoD,EAAA,EAAD,CACEJ,KAAK,SACLtN,KAAK,SACLoN,QAAS,kBAAMqG,EAAcrC,SAASlD,IACtCzB,MAAO,CAAE4H,WAAY,UAGvB,MAELpB,EACC,UAEA5I,EAAAlI,EAAAmI,cAACgK,GAAA,EAAD,CAAW7J,UAAU,qBAAqBkJ,WA5HhChG,IAAMC,wCCiBnB,SAAS2G,GAAYC,EAAMC,GAChC,IAAIC,EAAgB,GAChBlF,MAAMsC,QAAQ2C,IAChBA,EAAO9O,QAAQ,SAAAgP,GACbD,EAAcC,EAAMC,WAAa,CAC/BC,MAAOF,EAAME,OAASL,EAAKM,eAAeH,EAAMC,WAChDH,OAAQE,EAAMF,UAIlBD,EAAKO,UAAUL,IACY,kBAAXD,IAChB7K,OAAO2J,KAAKkB,GAAQ9O,QAAQ,SAAAiP,GAC1B,IAAID,EAAQF,EAAOG,GACdD,EAAME,QACTF,EAAME,MAAQL,EAAKM,eAAeF,MAItCJ,EAAKO,UAAUN,sBCgFJO,GC1HA,SAAqB1I,GAClC,IAAMsB,EAAYtB,EACZ2I,EAAW,eAAA5V,OAAkBiN,EAAU2I,aAC3C3I,EAAU7L,MACV,YAFe,KAIXyU,EANuC,SAAAC,GAAA,SAAAD,IAAA,IAAAE,EAAAhK,EAAAxB,OAAAyB,EAAA,EAAAzB,CAAA/H,KAAAqT,GAAA,QAAA7F,EAAAhO,UAAAX,OAAA2U,EAAA,IAAA7F,MAAAH,GAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAAA+F,EAAA/F,GAAAjO,UAAAiO,GAAA,OAAAlE,EAAAxB,OAAA0B,EAAA,EAAA1B,CAAA/H,MAAAuT,EAAAxL,OAAA2B,EAAA,EAAA3B,CAAAsL,IAAA1J,KAAA5J,MAAAwT,EAAA,CAAAvT,MAAAxC,OAAAgW,MAO3CrI,QAAU,KAPiC5B,EAQ3CnB,MAAQ,CACNqL,UAAU,GAT+BlK,EAwB3CmK,eAAiB,WACXnK,EAAK4B,SACP5B,EAAKM,SAAS,SAAAzB,GACZ,MAAO,CACLqL,UAAWrL,EAAMqL,aA5BkBlK,EAAA,OAAAxB,OAAA4L,EAAA,EAAA5L,CAAAsL,EAAAC,GAAAvL,OAAA6L,EAAA,EAAA7L,CAAAsL,EAAA,EAAAhU,IAAA,oBAAA2T,MAAA,WAazChT,KAAKmL,SAAU,IAb0B,CAAA9L,IAAA,qBAAA2T,MAAA,WAiBzChT,KAAKmL,SAAU,IAjB0B,CAAA9L,IAAA,uBAAA2T,MAAA,WAqBzChT,KAAKmL,SAAU,IArB0B,CAAA9L,IAAA,SAAA2T,MAAA,WAkClC,IACCS,EAAazT,KAAKoI,MAAlBqL,SACAI,EAAiB7T,KAAKuI,MAAtBsL,aAER,OACErL,EAAAlI,EAAAmI,cAACqL,GAAA,EAAD,CACEL,SAAUA,EACVM,UAAWvL,EAAAlI,EAAAmI,cAACgD,EAAA,EAAD,CAAMtN,KAAK,UAAUyM,MAAO,CAAEoJ,SAAU,UAEnDxL,EAAAlI,EAAAmI,cAACsD,EAADhE,OAAAkM,OAAA,GACMjU,KAAKuI,MADX,CAEEmL,eAAgB1T,KAAK0T,eACrBQ,IAAKL,UA9C8BR,EAAA,CAMnBvH,IAAMC,WA+ChC,SAASoI,EAAW5L,EAAO2L,GACzB,OAAO1L,EAAAlI,EAAAmI,cAAC4K,EAADtL,OAAAkM,OAAA,GAAiB1L,EAAjB,CAAwBsL,aAAcK,EAAKA,IAAK3L,EAAM6L,cAK/D,OAFAf,EAAYD,YAAcA,EAC1Be,EAAWf,YAAcA,EAClBtH,IAAMqI,WAAWA,GD+DXhB,aAnFb,SAAAkB,EAAY9L,GAAO,IAAAgB,EAAA,OAAAxB,OAAAyB,EAAA,EAAAzB,CAAA/H,KAAAqU,IACjB9K,EAAAxB,OAAA0B,EAAA,EAAA1B,CAAA/H,KAAA+H,OAAA2B,EAAA,EAAA3B,CAAAsM,GAAA1K,KAAA3J,KAAMuI,KAcR+L,aAAe,SAAArK,GAAS,IAAAsK,EACqBhL,EAAKhB,MAAxCoK,EADc4B,EACd5B,KAAM6B,EADQD,EACRC,SAAUd,EADFa,EACEb,eACpBzJ,GACFA,EAAMwK,iBAGR9B,EAAK+B,wBAAL,eAAAxR,EAAA6E,OAAAsG,EAAA,EAAAtG,CAAA1H,EAAAC,EAAAgO,KAA6B,SAAArO,EAAO2S,EAAQtT,GAAf,OAAAe,EAAAC,EAAAC,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,UACtBkS,EADsB,CAAApS,EAAAE,KAAA,gBAAAF,EAAAC,KAAA,EAGnBiT,GACFA,IAJqBlT,EAAAE,KAAA,EAOjB8T,EAASlV,GAPQ,OAAAkB,EAAAE,KAAA,gBAAAF,EAAAC,KAAA,EAAAD,EAAAmU,GAAAnU,EAAA,SASnBA,EAAAmU,cAAuBC,MACzBrL,EAAKM,SAAS,CACZgL,WAAYrU,EAAAmU,GAAYjF,UAG1BgD,GAAYC,EAADnS,EAAAmU,IAdU,eAAAnU,EAAAC,KAAA,GAqBnBiT,GACFA,IAtBqBlT,EAAAsU,OAAA,6BAAAtU,EAAAQ,SAAAf,EAAA,uBAA7B,gBAAAJ,EAAAqB,GAAA,OAAAgC,EAAAnD,MAAAC,KAAAR,YAAA,KAnBA+J,EAAKnB,MAAQ,CACXyM,WAAY,MAHGtL,mFAQjBvJ,KAAK+U,gEAIL/U,KAAK+U,8DAsCY,IAAAlD,EACQ7R,KAAKuI,MAAtBoK,EADSd,EACTc,KAAMC,EADGf,EACHe,OACVA,GACFF,GAAYC,EAAMC,oCAIb,IAAAoC,EACgChV,KAAKuI,MAApC0M,EADDD,EACCC,MAAOnD,EADRkD,EACQlD,SAAUoD,EADlBF,EACkBE,UACjBL,EAAe7U,KAAKoI,MAApByM,WAER,OACErM,EAAAlI,EAAAmI,cAAC0M,GAAA,EAADpN,OAAAkM,OAAA,GAAUiB,EAAV,CAAqBV,SAAUxU,KAAKsU,eACjCW,GAASzM,EAAAlI,EAAAmI,cAAC0M,GAAA,EAAK9L,KAAN,KAAY4L,GACrBJ,GACCrM,EAAAlI,EAAAmI,cAAC0M,GAAA,EAAK9L,KAAN,CAAWuB,MAAO,CAAEgE,MAAO,QACF,kBAAfiG,EACNrM,EAAAlI,EAAAmI,cAAA,MAAImC,MAAO,CAAEgE,MAAO,MAAOwG,WAAY,WACpCP,GAGHA,GAIL/C,UA5EiBhG,IAAMC,YEpC1BsJ,GAAWC,KAAKjM,KAEhBkM,8MAKJf,+CAAW,SAAAvU,EAAMX,GAAN,IAAAiV,EAAA5B,EAAA6C,EAAA,OAAAnV,EAAAC,EAAAC,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,UAAA6T,EACehL,EAAKhB,MAArBoK,EADC4B,EACD5B,OAAM6C,EADLjB,EACKiB,OAEJhB,SAHD,CAAAhU,EAAAE,KAAA,eAAAF,EAAAO,OAAA,SAIAyU,EAAMhB,SAASlV,EAAMqT,IAJrB,wBAAAnS,EAAAQ,SAAAf,uIAQC8D,EAAO1E,EAAKsT,EAAMrT,GAC5B,GAAIyE,EAAM0R,OACR,OAAO1R,EAAM0R,OAAO9C,EAAMrT,EAAMD,EAAK0E,GAChC,GAAIA,EAAM0G,UAAW,CAC1B,IAAMiL,EAAiB3R,EAAM0G,UACvBkL,EAAyBnN,EAAAlI,EAAAmI,cAACiN,EAAmB3R,EAAMwE,OACzD,OACEC,EAAAlI,EAAAmI,cAAC4M,GAAD,CACEhW,IAAKA,EACLuM,MAAO7H,EAAM6H,MACbgK,SAAU7R,EAAM6R,SAChBC,WAAY9R,EAAM8R,WAClBC,MAAO/R,EAAM+R,MACbC,YAAahS,EAAMgS,aAElBhS,EAAMiS,WACHL,EACAhD,EAAKsD,kBAAkB5W,EAAK,CAC1B6W,MAAOnS,EAAMmS,MACbC,eAAe,EACfC,aAAcrS,EAAMsS,SAChBtS,EAAMsS,SAAS/W,EAAMD,EAAK0E,GAC1BE,IAAI3E,EAAMD,IAAQ0E,EAAMqS,aAC5BE,cAAevS,EAAMuS,eAAiB,SANxC3D,CAOGgD,4CAMA,IAAA9D,EACiB7R,KAAKuI,MAA3BoK,EADKd,EACLc,KAAM6C,EADD3D,EACC2D,MAAOlW,EADRuS,EACQvS,KACjBiX,EAAe,GACnB,IAAK,IAAMlX,KAAOmW,EAAMgB,OAAQ,CAC9B,IAAMzS,EAAQyR,EAAMgB,OAAOnX,GAC3BkX,EAAaxH,KAAK/O,KAAKyW,YAAY1S,EAAO1E,EAAKsT,EAAMrT,IAGvD,OAAOiX,mCAGA,IAAAvB,EACoBhV,KAAKuI,MAAxBuJ,EADDkD,EACClD,SAAUa,EADXqC,EACWrC,KAElB,OACEnK,EAAAlI,EAAAmI,cAACiO,GAAD,CAAa/D,KAAMA,EAAM6B,SAAUxU,KAAKwU,UACrCxU,KAAK2W,eACL7E,UA5DiBhG,IAAMC,WAA1BwJ,GACGvJ,aAAe,CACpB1M,KAAM,IAgEKiW,oBCzER,SAASqB,GAA6BC,GAAyB,IAAbL,EAAahX,UAAAX,OAAA,QAAAY,IAAAD,UAAA,GAAAA,UAAA,GAAJ,GAkBhE,OAjBAqX,EAAU9O,OAAAgI,EAAA,EAAAhI,CAAA,GAAQ8O,GAClBL,EAAO1S,QAAQ,SAAAC,GACb,IAAI+S,EAAOD,EAAW9S,GAEtB,GAAI+S,EAAM,CACR,IAAIC,EAAc,CAAC,CAAEC,UAAU,EAAMtH,QAAO,GAAAlS,OAAKuG,EAAL,kBAExC4J,MAAMsC,QAAQ6G,GAChBC,EAAcA,EAAYvZ,OAAOsZ,GAEjCC,EAAYhI,KAAK+H,GAGnBD,EAAW9S,GAASgT,KAIjBF,EAGF,SAASI,GACdC,EACAC,EACAxE,GAEA,IADAyE,EACA5X,UAAAX,OAAA,QAAAY,IAAAD,UAAA,GAAAA,UAAA,GADM,sBAEN,OAAO,SAA0BsX,EAAM9D,EAAOqE,EAAIC,GAChD,IAAMC,EAAS5E,EAAK6E,cAAcN,GAC5BO,EAAS9E,EAAK6E,cAAcL,GAC9BO,EAAgB,KAChBC,EAAa,KACb7E,EAAQ,KAERyE,GAAUE,GAAUF,IAAWE,EACjCJ,KAEAA,EAAGD,GACHtE,EAAQsE,GAGNN,EAAK/S,QAAUmT,GACjBQ,EAAgBP,EAChBQ,EAAaF,IAEbC,EAAgBR,EAChBS,EAAaJ,GAGf5E,EAAKO,UAALnL,OAAA6P,EAAA,EAAA7P,CAAA,GAAkB2P,EAAgB,CAAE5E,QAAOE,MAAO2E,MAI/C,SAASE,GACdC,GAEA,IADAV,EACA5X,UAAAX,OAAA,QAAAY,IAAAD,UAAA,GAAAA,UAAA,GADM,qBAEN,OAAO,SAA0BsX,EAAM9D,EAAOqE,EAAIC,GAChDtE,EAAQA,EAAM+E,cACVD,EAAcxN,KAAK,SAAA1L,GAAI,OAM3B,SAAoBA,GAClB,OAAOA,EAAKmZ,gBAAkB/E,EAAM+E,cAPPC,CAAWpZ,MACxCyY,EAAGD,GAGLC,KC5DJ,IAKaY,GAAkB,CAC7BrZ,KAAM,CACJ,CACET,KAAM,SACN+Z,IAAK,GACLC,UCbS,SAAcnF,GAC3B,GAAIA,GAASA,EAAMoF,KACjB,OAAOpF,EAAMoF,SDCG,CAClBC,QAAS,MACT3I,QAAS,yCAYT4I,YAAa,CACX,CACEna,KAAM,SACN+Z,IAAK,KAEP,CACEG,QAAS,UACT3I,QAAS,yCAGbzB,cAAe,CACb,CACE9P,KAAM,WAGVmR,YAAa,CACX,CACEnR,KAAM,YAMCoa,GAAiB3B,GAC5BqB,GAFyB,CAAC,gBAOfO,GAAkB5B,GAC7BqB,GAF0B,CAAC,SAOhBQ,GAAoB7B,GAC/BqB,GAF4B,CAAC,SAQlBS,GAAgB9B,GAC3BqB,GAHwB,CAAC,8BEpDZ,SAASU,GAAUlO,EAAWmO,GAAc,IACnDC,EADmD,SAAAvF,GAEvD,SAAAuF,EAAYtQ,GAAO,IAAAgB,EAAA,OAAAxB,OAAAyB,EAAA,EAAAzB,CAAA/H,KAAA6Y,IACjBtP,EAAAxB,OAAA0B,EAAA,EAAA1B,CAAA/H,KAAA+H,OAAA2B,EAAA,EAAA3B,CAAA8Q,GAAAlP,KAAA3J,KAAMuI,KAmBRuQ,iBAAmB,WACbvP,EAAKwP,gBACPxP,EAAKM,SAAS,CAAEmP,mBAAoBlQ,OApBtCS,EAAKuP,mBACLvP,EAAKuP,iBAAmBG,KAAS1P,EAAKuP,iBAAkB,KAExDvP,EAAKnB,MAAQ,CACX4Q,mBAAoBlQ,KANLS,EAFoC,OAAAxB,OAAA4L,EAAA,EAAA5L,CAAA8Q,EAAAvF,GAAAvL,OAAA6L,EAAA,EAAA7L,CAAA8Q,EAAA,EAAAxZ,IAAA,oBAAA2T,MAAA,WAarD3U,OAAO6a,iBAAiB,SAAUlZ,KAAK8Y,kBACvC9Y,KAAK+Y,gBAAiB,IAd+B,CAAA1Z,IAAA,uBAAA2T,MAAA,WAkBrD3U,OAAO8a,oBAAoB,SAAUnZ,KAAK8Y,kBAC1C9Y,KAAK+Y,gBAAiB,IAnB+B,CAAA1Z,IAAA,SAAA2T,MAAA,WA6BrD,IAAMoG,EAAmB3O,EADlB8J,EAE6BvU,KAAKuI,MAAjC4C,EAFDoJ,EAECpJ,QAASD,EAFVqJ,EAEUrJ,QAAS+J,EAFnBV,EAEmBU,MAClB+D,EAAuBhZ,KAAKoI,MAA5B4Q,mBAOJK,EALgBL,MACW,IAAM,EADjBA,GACoC,IAAM,IAAQ,GAMtE,OAAK7N,EAKH3C,EAAAlI,EAAAmI,cAACuC,EAAA,EAAD,CACEG,QAASA,EACTD,QAASA,EACTD,MAAOoO,EACPpE,MAAOA,GAAS2D,GAEhBpQ,EAAAlI,EAAAmI,cAAC2Q,EAAqBpZ,KAAKuI,QAVtB,SAzC4CsQ,EAAA,CACrB/M,IAAMC,WA4D1C,OAJA8M,EAAsBzF,YAAtB,aAAA5V,OAAiDiN,EAAU2I,aACzD3I,EAAU7L,MACV,YAFF,KAIOia,EC3DT,IAAMS,GAAWC,KAAMD,SAEjBE,eAKJ,SAAAA,EAAYjR,GAAO,IAAAgB,EAAAxB,OAAAyB,EAAA,EAAAzB,CAAA/H,KAAAwZ,IACjBjQ,EAAAxB,OAAA0B,EAAA,EAAA1B,CAAA/H,KAAA+H,OAAA2B,EAAA,EAAA3B,CAAAyR,GAAA7P,KAAA3J,KAAMuI,KAmDRiM,SAAW,SAAAlV,GAET,OADAA,EAAKnB,KAAO,QACLoL,EAAKhB,MAAMiM,SAASlV,IApD3B,IAAMA,EAAOiJ,EAAMjJ,MAAQ,GACrBma,EAAI1R,OAAA2R,GAAA,EAAA3R,CAAAwB,GAHO,OAIjBA,EAAKiM,MAAQ,CACXgB,OAAQ,CACN5X,KAAM,CACJ6L,UAAW8O,KACXhR,MAAO,CAAEoR,aAAc,OACvB/N,MAAO,OACPgK,SAAU,KACVC,WAAY,KACZK,MAAK,GAAA1Y,OAAAuK,OAAA6R,GAAA,EAAA7R,CACAkQ,GAAgBrZ,MADhB,CAEH,CACEib,UAAWhC,GACTtP,EAAMuR,eACN,mBAIN1D,aAAc9W,EAAKV,MAErB0Z,YAAa,CACX7N,UAAW6O,GACX/Q,MAAO,CAAEwR,SAAU,CAAEC,QAAS,EAAGC,QAAS,IAC1CrO,MAAO,cACPgK,SAAU,KACVC,WAAY,KACZK,MAAO+B,GAAgBK,YACvBlC,aAAc9W,EAAKgZ,aAErB4B,OAAQ,CACNzP,UAAW0P,IACX5R,MAAO,CACLpK,KAAM,UACN2T,SAAU,SACVlM,OAAO,EACPwU,SAAU,UAEZxE,SAAU,KACVC,WAAY,KACZG,YAAY,IAGhBd,UAAW,CACTmF,kBAAkB,GAEpB7F,SAAUiF,EAAKjF,UAhDAjL,wEA0DjB,OAAOf,EAAAlI,EAAAmI,cAAC6R,GAAD,CAAa9E,MAAOxV,KAAKwV,MAAO7C,KAAM3S,KAAKuI,MAAMoK,cA/DpC7G,IAAMC,WAAxByN,GACGxN,aAAe,CACpB1M,KAAM,IAiEKqZ,UAAUrD,KAAKiF,QAALjF,CAAckE,IAAY,SCzEtCgB,WAAqB,CAChCC,gBAAiB,UACjBC,UAAW,UACXC,iBAAkB,YAGL,SAASC,GAASrS,GAAO,IAC9BsS,EAAiBtS,EAAjBsS,MAAOC,EAAUvS,EAAVuS,MACTlQ,EAAK7C,OAAA6P,EAAA,EAAA7P,CAAA,GACR+S,EAAQ,kBAAoB,QAAUN,GAAmBK,IAG5D,OACErS,EAAAlI,EAAAmI,cAAA,QAAMG,UAAU,cAAcgC,MAAOA,GAClCiQ,OCbcE,oLACV,IAAAxG,EACqBvU,KAAKuI,MAAzByK,EADDuB,EACCvB,MAAOgI,EADRzG,EACQyG,SACTlK,EACJtI,EAAAlI,EAAAmI,cAAC4C,EAAA,EAAD,CAAME,QAAS,SAAArI,GAAA,IAAG7D,EAAH6D,EAAG7D,IAAH,OAAa2b,EAAS3b,KACnCmJ,EAAAlI,EAAAmI,cAAC4C,EAAA,EAAKhC,KAAN,CAAWhK,IAAI,iBACbmJ,EAAAlI,EAAAmI,cAACmS,GAAD,CAAUC,MAAM,gBAAgBC,OAAK,KAEvCtS,EAAAlI,EAAAmI,cAAC4C,EAAA,EAAKhC,KAAN,CAAWhK,IAAI,aACbmJ,EAAAlI,EAAAmI,cAACmS,GAAD,CAAUC,MAAM,YAAYC,OAAK,KAEnCtS,EAAAlI,EAAAmI,cAAC4C,EAAA,EAAKhC,KAAN,CAAWhK,IAAI,kBACbmJ,EAAAlI,EAAAmI,cAACmS,GAAD,CAAUC,MAAM,iBAAiBC,OAAK,MAK5C,OACEtS,EAAAlI,EAAAmI,cAACuI,EAAA,EAAD,CAAUC,QAASH,EAAMI,QAAS,CAAC,UACjC1I,EAAAlI,EAAAmI,cAAA,QACEG,UAAU,cACVgC,MAAO,CACLqQ,gBAAiBT,GAAmBxH,GACpCkI,OAAQ,YAGTlI,WA1B+BlH,IAAMC,sCCAjC,SAASoP,GAAU5S,GAAO,IAErCjJ,EASEiJ,EATFjJ,KACA8b,EAQE7S,EARF6S,WACA7P,EAOEhD,EAPFgD,QACA3C,EAMEL,EANFK,UACAgC,EAKErC,EALFqC,MACAyQ,EAIE9S,EAJF8S,WACAC,EAGE/S,EAHF+S,eACAC,EAEEhT,EAFFgT,UACAC,EACEjT,EADFiT,UAEIC,EAAQF,EACRG,EAA2B,mBAAdF,GAAiCA,EAEpD,OACEhT,EAAAlI,EAAAmI,cAAA,OACEG,UACE,iBACC8S,EAAM,0BAA4B,KAClC9S,GAAa,IAEhBgC,MAAOA,EACPW,QAASA,GAET/C,EAAAlI,EAAAmI,cAACyJ,EAAA,EAAD,CAAKyJ,OAAQ,GAAI/Q,MAAO,CAAEC,OAAQ,SAChCrC,EAAAlI,EAAAmI,cAAC0J,EAAA,EAAD,CAAKC,KAAMqJ,EAAO7Q,MAAO,CAAEC,OAAQ,SACjCrC,EAAAlI,EAAAmI,cAAA,QACEmC,MAAK7C,OAAAgI,EAAA,EAAAhI,CAAA,CAAIkT,gBAAiB3b,EAAKsP,OAAUyM,GACzCzS,UAAW,sBAAwB0S,KAGvC9S,EAAAlI,EAAAmI,cAAC0J,EAAA,EAAD,CAAKC,KAAM,GAAKqJ,EAAO7Q,MAAO,CAAEC,OAAQ,SACrCuQ,EAAW9b,EAAMiJ,MAO5B4S,GAAUnP,aAAe,CACvBpD,UAAW,GACX2S,UAAW,EACXD,eAAgB,QC3CGM,oLACV,IAAArH,EACoDvU,KAAKuI,MAAxD7B,EADD6N,EACC7N,aAAcmV,EADftH,EACesH,qBAAsBC,EADrCvH,EACqCuH,WAE5C,OACEtT,EAAAlI,EAAAmI,cAAC0S,GAAD,CACE7b,KAAMoH,EACN6U,UAAW,EACXH,WAAY,WACV,OACE5S,EAAAlI,EAAAmI,cAACyJ,EAAA,EAAD,KACE1J,EAAAlI,EAAAmI,cAAC0J,EAAA,EAAD,CAAKC,KAAM,IAAK1L,EAAa9H,MAC7B4J,EAAAlI,EAAAmI,cAAC0J,EAAA,EAAD,CAAKC,KAAM,GAAIxH,MAAO,CAAE2H,UAAW,UACjC/J,EAAAlI,EAAAmI,cAACsT,GAAA,EAAD,CACEC,UAAU,EACVC,QAASJ,EAAqBvc,KAC9B0b,SAAU,KACVpQ,MAAO,CAAEsR,YAAa,UAExB1T,EAAAlI,EAAAmI,cAACoD,EAAA,EAAD,CAAQ1N,KAAK,SAASsN,KAAK,QAAQF,QAASuQ,OAKpDlR,MAAO,CACLC,OAAQ,OACRsR,QAAS,MACTjB,OAAQ,WAEVM,WAAW,WA7B2B1P,IAAMC,4DCA/BqQ,6LACiB,IAApBzM,EAAoBnQ,UAAAX,OAAA,QAAAY,IAAAD,UAAA,GAAAA,UAAA,GAAJ,GAC9B,OAAOmQ,EAAcA,EAAc9Q,OAAS,oCAGrC,IAAA0V,EACkCvU,KAAKuI,MAAtC7B,EADD6N,EACC7N,aAAckE,EADf2J,EACe3J,MAAOW,EADtBgJ,EACsBhJ,QACzB8Q,EAAc3V,EAAa9H,MAAQ8H,EAAanF,MAChD+a,EAAetc,KAAKuc,gBAAgB7V,EAAaiJ,eAErD,OACEnH,EAAAlI,EAAAmI,cAAC0S,GAAD,CACE7b,KAAMoH,EACN6E,QAASA,EACT6P,WAAY,WACV,OACE5S,EAAAlI,EAAAmI,cAACD,EAAAlI,EAAMkc,SAAP,KACEhU,EAAAlI,EAAAmI,cAAA,UAAK4T,GACJ3V,EAAa9H,MACZ4J,EAAAlI,EAAAmI,cAAA,QAAMG,UAAU,wBACblC,EAAanF,OAGjBmF,EAAaL,WACZmC,EAAAlI,EAAAmI,cAAA,QAAMG,UAAU,wBAAhB,WACW6T,KAAO/V,EAAaL,WAAWqW,WAG3CJ,GACC9T,EAAAlI,EAAAmI,cAAA,QAAMG,UAAU,wBACb0T,EAAa1M,UAMxBhF,MAAK7C,OAAAgI,EAAA,EAAAhI,CAAA,CACHoU,QAAS,MACTQ,SAAU,QACV9R,OAAQ,QACLD,GAEL2Q,UAAW7U,EAAakI,MAAQ,EAAI,EACpC4M,YAAajQ,WA3C8BO,IAAMC,WCEpC6Q,eACnB,SAAAA,EAAYrU,GAAO,IAAAgB,EAAA,OAAAxB,OAAAyB,EAAA,EAAAzB,CAAA/H,KAAA4c,IACjBrT,EAAAxB,OAAA0B,EAAA,EAAA1B,CAAA/H,KAAA+H,OAAA2B,EAAA,EAAA3B,CAAA6U,GAAAjT,KAAA3J,KAAMuI,KAgBRsU,kBAAoB,SAAAnW,GAAgB,IAAA6N,EACXhL,EAAKhB,MAApBoK,EAD0B4B,EAC1B5B,KAAMzS,EADoBqU,EACpBrU,KACd,GAAIqJ,EAAKuT,+BAA+BpW,EAAalE,UACnD+G,EAAKuJ,MAAQ,uCADf,CAKA,IAAI3M,EAAgBwM,EAAK6E,cAAc,qBACvCrR,EAAc4I,KAAK,CACjBM,OAAQ3I,EAAalE,SACrBua,WAAYtO,KAAKC,MACjBY,YAAa,EACb0N,WAAY9c,EAAKsC,WAGnB+G,EAAKuJ,MAAQ,KACbvJ,EAAKuT,+BAA+BpW,EAAalE,UAAYkE,EAC7DiM,EAAKsK,eAAe,CAAEjO,kBAAmB7I,MAlCxBoD,EAqCnB2T,uBAAyB,SAACxW,EAAcyW,GAAU,IACxCxK,EAASpJ,EAAKhB,MAAdoK,KAER,GAAKpJ,EAAKuT,+BAA+BpW,EAAa2I,QAAtD,CAKA,IAAIlJ,EAAgBwM,EAAK6E,cAAc,qBACvCrR,EAAgBnC,KAAQoZ,OAAOjX,EAAf,GAAA3I,OAAiC2f,IACjD5T,EAAKuJ,MAAQ,YACNvJ,EAAKuT,+BAA+BpW,EAAa2I,QACxDsD,EAAKsK,eAAe,CAAEjO,kBAAmB7I,SARvCoD,EAAKuJ,MAAQ,gCAvCfvJ,EAAKuT,+BAAiC,GACtCvT,EAAK8T,mBAAqB,IACO9U,EAAM+U,0BAA4B,IAC1CxZ,QAAQ,SAAA2C,GAC/B8C,EAAKuT,+BAA+BrW,EAAE4I,QAAU5I,KAG5B8B,EAAMpC,eAAiB,IAC/BrC,QAAQ,SAAA2C,GACpB8C,EAAK8T,mBAAmB5W,EAAEjE,UAAYiE,IAGxC8C,EAAKuJ,MAAQ,KAdIvJ,yFAoDOpD,GAAe,IAAAoX,EAAAvd,KACnCwd,EAAU,GAYd,OAVArX,EAAcrC,QAAQ,SAAC2C,EAAG0W,GACnBI,EAAKT,+BAA+BrW,EAAEjE,WACzCgb,EAAQzO,KACNvG,EAAAlI,EAAAmI,cAACgV,GAAA,EAAOC,OAAR,CAAe1K,MAAOmK,EAAO9d,IAAKoH,EAAEjE,UAClCgG,EAAAlI,EAAAmI,cAACkV,GAAD,CAAuBjX,aAAcD,QAMtC+W,EAAQ3e,OAAS,EACtB2J,EAAAlI,EAAAmI,cAAC0M,GAAA,EAAK9L,KAAN,KACEb,EAAAlI,EAAAmI,cAACgV,GAAA,EAAD,CACEG,YAAY,sBACZ5C,SAAU,SAAA6C,GACRN,EAAKV,kBAAkB1W,EAAc0X,MAGtCL,IAGH,iDAGcxO,GAAmB,IAAA8O,EAAA9d,KACrC,OAAOgP,EAAkBxI,IAAI,SAACC,EAAGoX,GAC/B,OACErV,EAAAlI,EAAAmI,cAACsV,GAAD,CACE1e,IAAKoH,EAAE4I,OACP3I,aAAcoX,EAAKT,mBAAmB5W,EAAE4I,QACxCwM,qBAAsBpV,EACtByI,SAAU,KACV4M,WAAY,kBAAMgC,EAAKZ,uBAAuBzW,EAAGoX,yCAMhD,IAAAhM,EACmD7R,KAAKuI,MAAvDoK,EADDd,EACCc,KAAMxM,EADP0L,EACO1L,cAAemX,EADtBzL,EACsByL,yBAE7B3K,EAAKsD,kBAAkB,oBAAqB,CAC1CG,aAAckH,GAA4B,KAG5C,IAAMtO,EAAoB2D,EAAK6E,cAAc,qBAC7C,OACEhP,EAAAlI,EAAAmI,cAAA,WACGzI,KAAKge,oBAAoBhP,GACzBhP,KAAKie,0BAA0B9X,WAzGA2F,IAAMC,WCExCuN,GAAWC,KAAMD,SAEjB4E,eAKJ,SAAAA,EAAY3V,GAAO,IAAAgB,EAAAxB,OAAAyB,EAAA,EAAAzB,CAAA/H,KAAAke,IACjB3U,EAAAxB,OAAA0B,EAAA,EAAA1B,CAAA/H,KAAA+H,OAAA2B,EAAA,EAAA3B,CAAAmW,GAAAvU,KAAA3J,KAAMuI,KA0ERiM,SAAW,SAAA2J,GAET,OADAA,EAAchgB,KAAO,OACdoL,EAAKhB,MAAMiM,SAAS2J,IA3E3B,IAAM1E,EAAI1R,OAAA2R,GAAA,EAAA3R,CAAAwB,GACJjK,EAAOiJ,EAAMjJ,MAAQ,GAHV,OAKjBiK,EAAKiM,MAAQ,CACXgB,OAAQ,CACN8B,YAAa,CACX7N,UAAW6O,GACX/Q,MAAO,CAAEwR,SAAU,CAAEC,QAAS,EAAGC,QAAS,IAC1CrO,MAAO,cACPgK,SAAU,KACVC,WAAY,KACZK,MAAO+B,GAAgBK,YACvBlC,aAAc9W,EAAKgZ,aAErB8F,SAAU,CACR3T,UAAWsQ,GACXxS,MAAO,GACPqD,MAAO,WACPgK,SAAU,KACVC,WAAY,KACZO,aAAc9W,EAAKA,KACfA,EAAKA,KAAKgL,KAAK,SAAAjH,GAAC,MAAmB,aAAfA,EAAEgb,WACtB,iBAENrP,kBAAmB,CACjByG,OADiB,SACV9C,GACL,OACEnK,EAAAlI,EAAAmI,cAAC0M,GAAA,EAAK9L,KAAN,CAAWuC,MAAM,gBAAgBvM,IAAI,qBACnCmJ,EAAAlI,EAAAmI,cAAC6V,GAAD,CACEjf,IAAI,cACJsT,KAAMA,EACNxM,cAAeoC,EAAMpC,cACrBmX,yBACEhe,EAAK0P,mBAAqBzG,EAAMgW,kBAElCre,KAAMqI,EAAMrI,UAMtB+N,cAAe,CACbxD,UAAW+T,KACXjW,MAAO,CACLkW,UAAU,EACVC,OAAQ,sBACRd,YAAa,eAEfhS,MAAO,cACPgK,SAAU,KACVC,WAAY,KACZO,aAAc9W,EAAKqf,YAErBzE,OAAQ,CACNzP,UAAW0P,IACX5R,MAAO,CACLpK,KAAM,UACN2T,SAAU,SACVlM,OAAO,EACPwU,SAAU,UAEZxE,SAAU,KACVC,WAAY,KACZG,YAAY,IAGhBd,UAAW,CACTmF,kBAAkB,GAEpB7F,SAAUiF,EAAKjF,UAvEAjL,wEAiFjB,OAAOf,EAAAlI,EAAAmI,cAAC6R,GAAD,CAAa9E,MAAOxV,KAAKwV,MAAO7C,KAAM3S,KAAKuI,MAAMoK,cAtFrC7G,IAAMC,WAAvBmS,GACGlS,aAAe,CACpB1M,KAAM,IAwFKqZ,UAAUrD,KAAKiF,QAALjF,CAAc4I,IAAW,QCtCnCU,qMAxDK,IAAArK,EACOvU,KAAKuI,MAApB+D,EADQiI,EACRjI,KAAMpM,EADEqU,EACFrU,KACd,GAAIoM,EAAK0C,kBACP,OAAO1C,EAAK0C,kBAAkB1E,KAC5B,SAAA5D,GAAY,OAAIA,EAAa2I,SAAWnP,EAAKsC,4CAK1C,IAAAqP,EACiC7R,KAAKuI,MAArC+D,EADDuF,EACCvF,KAAMsF,EADPC,EACOD,cAAeI,EADtBH,EACsBG,OACvBtL,EAAe1G,KAAK6e,kBAE1B,OACErW,EAAAlI,EAAAmI,cAAA,OAAKG,UAAU,eACbJ,EAAAlI,EAAAmI,cAACyJ,EAAA,EAAD,KACE1J,EAAAlI,EAAAmI,cAAC0J,EAAA,EAAD,CAAKC,KAAM,GACT5J,EAAAlI,EAAAmI,cAACsT,GAAA,EAAD,CACEE,QAASvV,KAAkBA,EAAa4I,YACxC0L,SAAU,kBAAMpJ,EAAc1C,SAAS5C,IACvC0P,UAAUtV,EACVuO,MAAOvO,EAAe,cAAgB,8BAG1C8B,EAAAlI,EAAAmI,cAAC0J,EAAA,EAAD,CAAKC,KAAM,GAAIxJ,UAAU,wBACvBJ,EAAAlI,EAAAmI,cAACmS,GAAD,CAAUC,MAAOvO,EAAK8R,SAAUtD,OAAK,KAEvCtS,EAAAlI,EAAAmI,cAAC0J,EAAA,EAAD,CAAKC,KAAM,EAAGxJ,UAAU,yBACtBJ,EAAAlI,EAAAmI,cAACoD,EAAA,EAAD,CACEJ,KAAK,SACLtN,KAAK,SACLyK,UAAU,oBACV2C,QAAS,kBAAMqG,EAAcrC,SAASjD,IACtC2I,MAAM,kBAIZzM,EAAAlI,EAAAmI,cAACyJ,EAAA,EAAD,CAAKtJ,UAAU,oBACbJ,EAAAlI,EAAAmI,cAAC0J,EAAA,EAAD,CAAKC,KAAM,GAAI0M,OAAQ,GACrBtW,EAAAlI,EAAAmI,cAAA,SAAI6D,EAAKgM,eAGb9P,EAAAlI,EAAAmI,cAACyJ,EAAA,EAAD,KACE1J,EAAAlI,EAAAmI,cAAC0J,EAAA,EAAD,CAAKC,KAAM,GAAIxJ,UAAU,4BACvBJ,EAAAlI,EAAAmI,cAACoD,EAAA,EAAD,CACEJ,KAAK,OACLF,QAAS,kBAAMyG,EAAO1F,IACtB2I,MAAM,wBAhDDnJ,IAAMC,YCEnBuN,GAAWC,KAAMD,SAEjByF,eAKJ,SAAAA,EAAYxW,GAAO,IAAAgB,EAAAxB,OAAAyB,EAAA,EAAAzB,CAAA/H,KAAA+e,IACjBxV,EAAAxB,OAAA0B,EAAA,EAAA1B,CAAA/H,KAAA+H,OAAA2B,EAAA,EAAA3B,CAAAgX,GAAApV,KAAA3J,KAAMuI,KAoDRiM,SAAW,SAAAlV,GAET,OADAA,EAAKnB,KAAO,UACLoL,EAAKhB,MAAMiM,SAASlV,IArD3B,IAAMma,EAAI1R,OAAA2R,GAAA,EAAA3R,CAAAwB,GACJjK,EAAOiJ,EAAMjJ,MAAQ,GAHV,OAKjBiK,EAAKiM,MAAQ,CACXgB,OAAQ,CACN5X,KAAM,CACJ6L,UAAW8O,KACXhR,MAAO,CAAEoR,aAAc,OACvB/N,MAAO,OACPgK,SAAU,KACVC,WAAY,KACZK,MAAK,GAAA1Y,OAAAuK,OAAA6R,GAAA,EAAA7R,CACAkQ,GAAgBrZ,MADhB,CAEH,CACEib,UAAWhC,GACTtP,EAAMyW,iBACN,qBAIN5I,aAAc9W,EAAKV,MAErB0Z,YAAa,CACX7N,UAAW6O,GACX/Q,MAAO,CAAEwR,SAAU,CAAEC,QAAS,EAAGC,QAAS,IAC1CrO,MAAO,cACPgK,SAAU,KACVC,WAAY,KACZK,MAAO+B,GAAgBK,YACvBlC,aAAc9W,EAAKgZ,aAErB4B,OAAQ,CACNzP,UAAW0P,IACX5R,MAAO,CACLpK,KAAM,UACN2T,SAAU,SACVlM,OAAO,EACPwU,SAAU,UAEZxE,SAAU,KACVC,WAAY,KACZG,YAAY,IAGhBd,UAAW,CACTmF,kBAAkB,GAEpB7F,SAAUiF,EAAKjF,UAjDAjL,wEA2DjB,OAAOf,EAAAlI,EAAAmI,cAAC6R,GAAD,CAAa9E,MAAOxV,KAAKwV,MAAO7C,KAAM3S,KAAKuI,MAAMoK,cAhElC7G,IAAMC,WAA1BgT,GACG/S,aAAe,CACpB1M,KAAM,IAkEKqZ,UAAUrD,KAAKiF,QAALjF,CAAcyJ,IAAc,kBCzEtC,SAASE,GAAiB1W,GAAO,IACtC6D,EAAuC7D,EAAvC6D,QAASb,EAA8BhD,EAA9BgD,QAAS3C,EAAqBL,EAArBK,UAAWgC,EAAUrC,EAAVqC,MACrC,OACEpC,EAAAlI,EAAAmI,cAAC0S,GAAD,CACE7b,KAAM8M,EACNb,QAASA,EACT6P,WAAY,WACV,OAAO5S,EAAAlI,EAAAmI,cAAA,UAAK2D,EAAQxN,OAEtBgK,UAAWA,EACXgC,MAAK7C,OAAAgI,EAAA,EAAAhI,CAAA,CACH8C,OAAQ,OACRsR,QAAS,OACNvR,GAEL2Q,UAAW,ICHFjT,mBAXf,SAAyBF,EAAOG,GAC9B,OAAOR,OAAAgI,EAAA,EAAAhI,CAAA,GACFQ,EADL,CAEE2W,UAAWlb,KAAQC,IAAImE,EAAOG,EAAMpE,OAASoE,EAAM2W,aAQxC5W,CAJf,SAAWC,GACT,OAAOC,EAAAlI,EAAAmI,cAAC0W,GAAc5W,6CCbjB,SAAS6W,GAAgBC,GAC9B,OAAO,IAAIC,QAAQ,SAASC,EAASC,GAWnC,SAASC,IACP,GAAItC,IAAUkC,EAASxgB,OACrB0gB,EAAQnf,OACH,CACL,IAAIsf,EAAIL,EAASlC,GACjBA,GAAS,EAfb,SAAuBuC,GACrBA,EAAEC,KAAK,SAAArgB,GACLc,EAAO2O,KAAK,CAAEzP,OAAMsgB,SAAS,IAC7BH,MACCI,MAAM,SAAA/M,GACP1S,EAAO2O,KAAK,CAAE+D,QAAOgN,QAAQ,IAC7BL,MAUAM,CAAcL,IAIlB,IAAItf,EAAS,GACT+c,EAAQ,EACZsC,mBCZiBO,eACnB,SAAAA,EAAYzX,GAAO,IAAAgB,EAAAxB,OAAAyB,EAAA,EAAAzB,CAAA/H,KAAAggB,IACjBzW,EAAAxB,OAAA0B,EAAA,EAAA1B,CAAA/H,KAAA+H,OAAA2B,EAAA,EAAA3B,CAAAiY,GAAArW,KAAA3J,KAAMuI,KA+BR0X,aAAe,SAAC9C,EAAOhf,GACjBA,EACEoL,EAAKqJ,OAAOuK,KACd5T,EAAKqJ,OAAOuK,GAAOhf,GAAQ,aAGtBoL,EAAKqJ,OAAOuK,IAtCJ5T,EA0CnB2W,YAAc,WACZ3W,EAAKqJ,OAAS,IA3CGrJ,EA8CnB4W,SAAW,SAAChD,EAAOiD,EAAYC,GAC7B9W,EAAKqJ,OAAOuK,GAAS,CAAE5b,MAAO6e,EAAY1Q,QAAS2Q,IA/ClC9W,EAkDnB+W,SAAW,WACT,QAASvY,OAAO2J,KAAKnI,EAAKqJ,QAAQ/T,QAnDjB0K,EAsDnBgX,SAAW,SAACpD,GAA0B,IAAnBhf,EAAmBqB,UAAAX,OAAA,QAAAY,IAAAD,UAAA,GAAAA,UAAA,GAAZ,QACxB,OAAOwE,KAAQC,IAAIsF,EAAKqJ,OAAjB,GAAApV,OAA4B2f,EAA5B,KAAA3f,OAAqCW,KAvD3BoL,EA0DnBiX,SA1DmBzY,OAAAsG,EAAA,EAAAtG,CAAA1H,EAAAC,EAAAgO,KA0DR,SAAArO,IAAA,IAAA0S,EAAAxM,EAAAsa,EAAAH,EAAA,OAAAjgB,EAAAC,EAAAC,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cACDiS,EAASpJ,EAAKhB,MAAdoK,KACRpJ,EAAK2W,cACD/Z,EAAgBwM,EAAK6E,cAAc,iBACnCiJ,EAAqB,GACzBta,EAAcrC,QAAQ,SAAA2C,GACpBga,EAAmB1R,KAAKxF,EAAKmX,WAAWja,MANjCjG,EAAAE,KAAA,EASU0e,GAAgBqB,GAT1B,cAAAjgB,EAAAK,KAUFiD,QAAQ,SAACc,EAAGuY,GACbvY,EAAEkb,QACJvW,EAAK4W,SACHhD,EACAnZ,KAAQC,IAAIW,EAAEkO,MAAM0D,OAApB,mBACAxS,KAAQC,IAAIW,EAAEkO,MAAM0D,OAApB,yBAKA8J,EAAW/W,EAAK+W,aAIpB3N,EAAKsK,eAAe,CAAE9W,kBAxBf3F,EAAAO,OAAA,UA2BDuf,GA3BC,yBAAA9f,EAAAQ,SAAAf,MA1DQsJ,EAwFnBoX,WAAa,WAAM,IACThO,EAASpJ,EAAKhB,MAAdoK,KACJxM,EAAgBwM,EAAK6E,cAAc,iBACvCrR,EAAgBA,EAAc3I,OAAO,CAAC,CAAE+D,MAAO,GAAI8E,UAAW,QAC9DsM,EAAKsK,eAAe,CAAE9W,mBA5FLoD,EA+FnBqX,cAAgB,SAAAzD,GAAS,IACfxK,EAASpJ,EAAKhB,MAAdoK,KACJxM,EAAgBwM,EAAK6E,cAAc,iBACvCrR,EAAgBnC,KAAQoZ,OAAOjX,EAAegX,GAC9C5T,EAAK0W,aAAa9C,GAClBxK,EAAKsK,eAAe,CAAE9W,mBApGLoD,EAuGnBsX,cAAgB,SAAC1D,EAAOpZ,EAAOzE,EAAMua,GAAc,IACzClH,EAASpJ,EAAKhB,MAAdoK,KACJxM,EAAgBwM,EAAK6E,cAAc,iBACvCqC,EAAU2G,SAAVzY,OAAA6P,EAAA,EAAA7P,CAAA,GAAsBhE,EAAQzE,GAAQ,SAAAsT,GAChCA,EACFrJ,EAAK4W,SAAShD,EAAOvK,EAAO,GAAGlD,SAE/BnG,EAAK0W,aAAa9C,EAAOpZ,GAG3BoC,EAAgBnC,KAAQ8c,IAAI3a,EAAZ,GAAA3I,OAA8B2f,EAA9B,KAAA3f,OAAuCuG,GAASzE,GAChEqT,EAAKsK,eAAe,CAAE9W,qBAlHPoD,EAsHnBwX,cAAgB,SAAC5D,EAAO5b,GACtBgI,EAAKsX,cAAc1D,EAAO,QAAS5b,EAAOgI,EAAKyX,iBAvH9BzX,EA0HnB0X,gBAAkB,SAAC9D,EAAOzN,GACxBnG,EAAKsX,cAAc1D,EAAO,UAAWzN,EAASnG,EAAK2X,mBA3HlC3X,EA8HnB4X,kBAAoB,SAAChE,EAAOiE,GAAe,IACjCzO,EAASpJ,EAAKhB,MAAdoK,KACJxM,EAAgBwM,EAAK6E,cAAc,iBACvCrR,EAAgBnC,KAAQ8c,IACtB3a,EADc,GAAA3I,OAEX2f,EAFW,cAGdiE,GAEFzO,EAAKsK,eAAe,CAAE9W,mBApItBoD,EAAKqJ,OAAS,GACd,IjBuDoCyO,EiBlD9BC,EAAkB,CACtB,CACEnjB,KAAM,QACN6Y,UAAU,EACV6C,UAAWhC,GATU9P,OAAO2J,KAAP3J,OAAAgI,EAAA,EAAAhI,CAAA,GACpBxE,aAAWgF,EAAMgZ,sBAAuB,CAAEpd,KAAM,UAChDZ,aAAWgF,EAAMiZ,8BAA+B,CAAErd,KAAM,YASvD,wEAIAsd,EAAoB,CAAC,CAAEtjB,KAAM,SAAU+Z,IAAK,MAC5CrB,EAAa,CACjBtV,MAAO+f,EACP5R,QAAS+R,GArBM,OAwBjBlY,EAAKmY,qBAAuB,IAAIC,KAAe9K,GAC/CtN,EAAKyX,eAAiB,IAAIW,KAAe,CAAEpgB,MAAO+f,IAClD/X,EAAK2X,iBAAmB,IAAIS,KAAe,CAAEjS,QAAS+R,IACtDlY,EAAKmX,YjB+B+BW,EiB9BlC9X,EAAKmY,qBAAqBlB,SAASoB,KAAKrY,EAAKmY,sBjB+B1C,SAASpiB,GACd,OAAO,IAAIggB,QAAQ,SAASM,EAASJ,GACnC6B,EAAE/hB,EAAM,SAASsT,EAAQ4D,GACnB5D,EACF4M,EAAO,CAAE5M,SAAQ4D,WAEjBoJ,EAAQpJ,SiBjEGjN,wEAyIV,IAAAgU,EAAAvd,KACC2S,EAAS3S,KAAKuI,MAAdoK,KACRA,EAAKsD,kBAAkB,gBAAiB,CACtCG,aAAc,GACdF,MAAO,CACL,CACE/X,KAAM,QACN6Y,UAAU,EACVtH,QAAS,iCAKf,IAAMvJ,EAAgBwM,EAAK6E,cAAc,iBACnC1E,EAAQH,EAAKkP,cAAc,iBAGjC,OACErZ,EAAAlI,EAAAmI,cAAA,WACGtC,EAAcK,IAAI,SAACC,EAAG0W,GACrB,OACE3U,EAAAlI,EAAAmI,cAAA,OAAKpJ,IAAK8d,GACR3U,EAAAlI,EAAAmI,cAACyJ,EAAA,EAAD,CAAKyJ,OAAQ,IACXnT,EAAAlI,EAAAmI,cAAC0J,EAAA,EAAD,CAAKC,KAAM,IACT5J,EAAAlI,EAAAmI,cAAC0M,GAAA,EAAK9L,KAAN,CACEuC,MAAM,gBACNkW,KACEtZ,EAAAlI,EAAAmI,cAAA,QAAMmC,MAAO,CAAEgE,MAAO,QACnB2O,EAAKgD,SAASpD,EAAO,UAG1BvS,MAAO,CAAEmX,aAAc,QAEvBvZ,EAAAlI,EAAAmI,cAACuZ,GAAA,EAAD,CACEhP,MAAOvM,EAAElF,MACTyZ,SAAU,SAAA/Q,GACRsT,EAAKwD,cAAc5D,EAAOlT,EAAMgY,OAAOjP,QAEzC2G,aAAa,WAGjBnR,EAAAlI,EAAAmI,cAAC0M,GAAA,EAAK9L,KAAN,CACEuC,MAAM,UACNkW,KACEtZ,EAAAlI,EAAAmI,cAAA,QAAMmC,MAAO,CAAEgE,MAAO,QACnB2O,EAAKgD,SAASpD,EAAO,aAI1B3U,EAAAlI,EAAAmI,cAACuZ,GAAA,EAAM1I,SAAP,CACES,UAAQ,EACRJ,aAAa,MACb3G,MAAOvM,EAAEiJ,QACTsL,SAAU,SAAA/Q,GACRsT,EAAK0D,gBAAgB9D,EAAOlT,EAAMgY,OAAOjP,WAI/CxK,EAAAlI,EAAAmI,cAAC0M,GAAA,EAAK9L,KAAN,CACEuC,MAAM,aACNkW,KACEtZ,EAAAlI,EAAAmI,cAAA,QAAMmC,MAAO,CAAEgE,MAAO,QACnB2O,EAAKgD,SAASpD,EAAO,eAI1B3U,EAAAlI,EAAAmI,cAACyZ,GAAA,EAAD,CACExD,OApDC,eAqDDyD,aAAc,SAAAxd,GACZ,OACEA,GACAA,EACE8X,OACG2F,SAAS,EAAG,OACZC,MAAM,QAGfrH,SAAU,WAAa,QAAAxN,EAAAhO,UAAAX,OAAT2U,EAAS,IAAA7F,MAAAH,GAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAAT+F,EAAS/F,GAAAjO,UAAAiO,GACrB8P,EAAK4D,kBAALphB,MAAAwd,EAAI,CAAmBJ,GAAnB3f,OAA6BgW,KAEnCR,MAAOvM,EAAEJ,WAAaoW,KAAOhW,EAAEJ,UAjE9B,oBAqEPmC,EAAAlI,EAAAmI,cAAC0J,EAAA,EAAD,CAAKC,KAAM,GACT5J,EAAAlI,EAAAmI,cAACoD,EAAA,EAAD,CACEJ,KAAK,QACLF,QAAS,kBAAMgS,EAAKqD,cAAczD,IAClChf,KAAK,aAIVgf,IAAUhX,EAActH,OAAS,GAAK2J,EAAAlI,EAAAmI,cAAC6Z,GAAA,EAAD,SAI7C9Z,EAAAlI,EAAAmI,cAAA,QAAMmC,MAAO,CAAEgE,MAAO,QAAUkE,GAChCtK,EAAAlI,EAAAmI,cAACoD,EAAA,EAAD,CAAQjG,OAAK,EAAC6F,KAAK,OAAOF,QAASvL,KAAK2gB,YAAxC,4BA3OsC7U,IAAMC,WCL9CwW,eAOJ,SAAAA,EAAYha,GAAO,IAAAgB,EAAAxB,OAAAyB,EAAA,EAAAzB,CAAA/H,KAAAuiB,IACjBhZ,EAAAxB,OAAA0B,EAAA,EAAA1B,CAAA/H,KAAA+H,OAAA2B,EAAA,EAAA3B,CAAAwa,GAAA5Y,KAAA3J,KAAMuI,KAHRia,QAAU1W,IAAM2W,YAEGlZ,EAgDnBiL,SAhDmB,eAAAtR,EAAA6E,OAAAsG,EAAA,EAAAtG,CAAA1H,EAAAC,EAAAgO,KAgDR,SAAArO,EAAMke,GAAN,OAAA9d,EAAAC,EAAAC,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,WACL6I,EAAKiZ,QAAQ7d,QADR,CAAAnE,EAAAE,KAAA,eAAAF,EAAAE,KAAA,EAEa6I,EAAKiZ,QAAQ7d,QAAQ6b,WAFlC,OAAAhgB,EAAAK,OAKLsd,EAAczO,QAAU,KACxByO,EAAc9X,UAAYoW,OACvBiG,IAAI,EAAG,UACPxU,UAEH3E,EAAKhB,MAAMiM,SAAS2J,IAVf,wBAAA3d,EAAAQ,SAAAf,MAhDQ,gBAAAJ,GAAA,OAAAqD,EAAAnD,MAAAC,KAAAR,YAAA,GAEjB,IAAMia,EAAI1R,OAAA2R,GAAA,EAAA3R,CAAAwB,GAFO,OAIjBA,EAAKiM,MAAQ,CACXgB,OAAQ,CACNrQ,cAAe,CACbsP,OADa,SACN9C,GACL,OACEnK,EAAAlI,EAAAmI,cAAA,OAAKpJ,IAAI,oBACPmJ,EAAAlI,EAAAmI,cAAA,oGAIAD,EAAAlI,EAAAmI,cAAC0M,GAAA,EAAK9L,KAAN,KACEb,EAAAlI,EAAAmI,cAACka,GAAD,CACEzO,IAAKuF,EAAK+I,QACV7P,KAAMA,EACN4O,sBAAuBhZ,EAAMgZ,sBAC7BC,8BACEjZ,EAAMiZ,oCAQpBtH,OAAQ,CACNzP,UAAW0P,IACX5R,MAAO,CACLpK,KAAM,UACN2T,SAAU,SACVlM,OAAO,EACPwU,SAAU,UAEZxE,SAAU,KACVC,WAAY,KACZG,YAAY,IAGhBd,UAAW,CACTmF,kBAAkB,GAEpB7F,SAAUiF,EAAKjF,UA5CAjL,wEAgEjB,OAAOf,EAAAlI,EAAAmI,cAAC6R,GAAD,CAAa9E,MAAOxV,KAAKwV,MAAO7C,KAAM3S,KAAKuI,MAAMoK,cAvE9B7G,IAAMC,WAA9BwW,GACGvW,aAAe,CACpB1M,KAAM,IAyEKqZ,UACbrD,KAAKiF,QAALjF,CAAciN,IACd,mCCjFmBK,oLAKV,IAAArO,EAC+CvU,KAAKuI,MAAnDyS,EADDzG,EACCyG,SAAUgB,EADXzH,EACWyH,SAAUwB,EADrBjJ,EACqBiJ,QAASqF,EAD9BtO,EAC8BsO,aACjC7P,OACmBvT,IAArBO,KAAKuI,MAAMyK,MAAsBhT,KAAKuI,MAAMyK,MAAQ6P,EAClDC,EAAe,CACjB5G,YAAa,MACb5J,WAAaU,EAAiB,MAAT,QAGnB+P,EAAe,CACjBvQ,WAAY,MACZF,WAAYU,EAAQ,OAAS,OAG/B,OACExK,EAAAlI,EAAAmI,cAAA,YACED,EAAAlI,EAAAmI,cAAA,QAAMmC,MAAOkY,GAAetF,EAAQ,IACpChV,EAAAlI,EAAAmI,cAACsT,GAAA,EAAD,CAAQE,UAAWjJ,EAAOgI,SAAUA,EAAUgB,SAAUA,IACxDxT,EAAAlI,EAAAmI,cAAA,QAAMmC,MAAOmY,GAAevF,EAAQ,YAvBL1R,IAAMC,WAAxB6W,GACZ5W,aAAe,CACpBwR,QAAS,CAAC,KAAM,YCCdwF,8MACJvM,YAAc,SAAAvT,GAcR,IAbJ6P,EAaI7P,EAbJ6P,UACAkQ,EAYI/f,EAZJ+f,UACA9kB,EAWI+E,EAXJ/E,KACA6U,EAUI9P,EAVJ8P,MACAwK,EASIta,EATJsa,QACAI,EAQI1a,EARJ0a,YACAsF,EAOIhgB,EAPJggB,WACAC,EAMIjgB,EANJigB,UACAC,EAKIlgB,EALJkgB,IACAlL,EAIIhV,EAJJgV,IACAtS,EAGI1C,EAHJ0C,MACAkR,EAEI5T,EAFJ4T,KACAvO,EACIrF,EADJqF,MACIgM,EACsBhL,EAAKhB,MAAvBoK,EADJ4B,EACI5B,KACJ5O,EAAQ,KACRqO,EAAOxM,EACP,CACEyd,GAAI,GACJC,GAAI,GACJC,GAAI,IAEN,CACEF,GAAI,GACJC,GAAI,GACJC,GAAI,IA2DV,OAvEIhP,EACUiP,UAcEL,GACD,SAAThlB,EACF4F,EAAQyE,EAAAlI,EAAAmI,cAACuZ,GAAA,EAADja,OAAAkM,OAAA,GAAW1L,EAAX,CAAkBqV,YAAaA,KACrB,aAATzf,EACT4F,EAAQyE,EAAAlI,EAAAmI,cAACuZ,GAAA,EAAM1I,SAAPvR,OAAAkM,OAAA,GAAoB1L,EAApB,CAA2BqV,YAAaA,KAC9B,WAATzf,EACT4F,EACEyE,EAAAlI,EAAAmI,cAACgV,GAAA,EAAD1V,OAAAkM,OAAA,GAAY1L,EAAZ,CAAmBqV,YAAaA,IAC7BJ,EAAQhX,IAAI,SAAAid,GACX,OAAOjb,EAAAlI,EAAAmI,cAACgV,GAAA,EAAOC,OAAR,CAAere,IAAKokB,GAASA,MAIxB,eAATtlB,GACT4F,EACEyE,EAAAlI,EAAAmI,cAACyZ,GAAA,EAADna,OAAAkM,OAAA,GACM1L,EADN,CAEEmW,OAAQwE,EACRtF,YAAaA,KAGjB5K,EAAQyJ,KAAOzJ,IAEfjP,EADkB,WAAT5F,EACDqK,EAAAlI,EAAAmI,cAACib,GAAD3b,OAAAkM,OAAA,GAAe1L,EAAf,CAAsBiV,QAASA,KACrB,WAATrf,EAEPqK,EAAAlI,EAAAmI,cAACkb,GAAA,EAAD5b,OAAAkM,OAAA,GACM1L,EADN,CAEE6a,IAAKA,EACLlL,IAAKA,EACL0F,YAAaA,KAITpV,EAAAlI,EAAAmI,cAACuZ,GAAA,EAADja,OAAAkM,OAAA,GAAW1L,EAAX,CAAkBqV,YAAaA,KAGzC7Z,EACEyE,EAAAlI,EAAAmI,cAAC0M,GAAA,EAAK9L,KAAN,CAAWuC,MAAOqX,GAAalQ,GAC5BJ,EAAKsD,kBAAkBlD,EAAW,CAAE+D,OAAMV,aAAcpD,GAAxDL,CACC5O,MAKO,WAAT5F,IACF6U,EAAQxK,EAAAlI,EAAAmI,cAACib,GAAD,CAAW1H,UAAQ,EAACwB,QAASA,EAASqF,aAAc7P,KAG9DjP,EAAQyE,EAAAlI,EAAAmI,cAAC0M,GAAA,EAAK9L,KAAN,CAAWuC,MAAOqX,GAAYjQ,IAG3B,aAAT7U,IACFiU,EAAKmR,GAAK,IAGL/a,EAAAlI,EAAAmI,cAAC0J,EAAA,EAAQC,EAAOrO,gFAGZ,IAAA8N,EACiC7R,KAAKuI,MAAzCoK,EADGd,EACHc,KAAM8C,EADH5D,EACG4D,OAAQ+N,EADX3R,EACW2R,QAAShP,EADpB3C,EACoB2C,SAC3BlV,EAAOqT,EAAKM,iBACZ2Q,EAAUnO,EAAO,CAAEgB,YAAazW,KAAKyW,YAAanX,OAAMkkB,YAU5D,OARIA,IACFI,EACEpb,EAAAlI,EAAAmI,cAACiO,GAAD,CAAa/D,KAAMA,EAAM6B,SAAUA,GAChCoP,IAKAA,mCAIP,OAAO5jB,KAAK6jB,oBA1Ga/X,IAAMC,WA8GpBuJ,QAAKiF,QAALjF,CAAc0N,IC/GvBhD,8MACJ6D,WAAa,SAAA3gB,GAA2B,IAAxBuT,EAAwBvT,EAAxBuT,YACN/P,GAD8BxD,EAAX5D,KACFiK,EAAKhB,MAAtB7B,cAER,OACE8B,EAAAlI,EAAAmI,cAACD,EAAAlI,EAAMkc,SAAP,KACG/F,EAAY,CACX1D,UAAW,OACXkQ,UAAW,OACX9kB,KAAM,QACN6U,MAAOtM,EAAa9H,KACpBukB,WAAW,EACXvd,OAAO,IAER6Q,EAAY,CACX1D,UAAW,QACXkQ,UAAW,gBACX9kB,KAAM,QACN6U,MAAOtM,EAAanF,MACpB4hB,WAAW,EACXvd,OAAO,8EAMN,IAAA2O,EACoBvU,KAAKuI,MAAxBoK,EADD4B,EACC5B,KAAM6B,EADPD,EACOC,SAEd,OACEhM,EAAAlI,EAAAmI,cAACqb,GAAD,CACEN,SAAO,EACP/N,OAAQzV,KAAK6jB,WACbrP,SAAUA,EACV7B,KAAMA,WAlCiB7G,IAAMC,WAyCtB4M,MAAUrD,KAAKiF,QAALjF,CAAc0K,IAAmB,gBCvCrC+D,sNACnB3b,MAAQ,CACN4b,yBAAyB,EACzBC,iBAAkB,QAGpBC,uBAAyB,WACvB3a,EAAKM,SAAS,SAAAC,GACZ,MAAO,CACLka,yBAA0Bla,EAAUka,sGAK/BG,EAAOC,GAChB,OACE5b,EAAAlI,EAAAmI,cAAC4b,GAAA,EAAD,CACEC,WAAYH,EACZC,WAAYA,EACZG,KAAM,CACJ5I,OAAQ,GACR0H,GAAI,EACJC,GAAI,EACJC,GAAI,EACJiB,GAAI,GAEN5Z,MAAO,CAAE6Z,WAAY,8DAKa,IAAAlH,EAAAvd,KAApBmG,EAAoB3G,UAAAX,OAAA,QAAAY,IAAAD,UAAA,GAAAA,UAAA,GAAJ,GAClC,OAAOQ,KAAK0kB,WAAWve,EAAe,SAAAM,GACpC,OACE+B,EAAAlI,EAAAmI,cAAC4b,GAAA,EAAKhb,KAAN,CAAWhK,IAAKoH,EAAEjE,UAChBgG,EAAAlI,EAAAmI,cAACkV,GAAD,CACEjX,aAAcD,EACd8E,QAAS,WACPgS,EAAK1T,SAAS,CAAEoa,iBAAkBxd,gEAQU,IAA5Bke,EAA4BnlB,UAAAX,OAAA,QAAAY,IAAAD,UAAA,GAAAA,UAAA,GAAJ,GAClD,OAAOQ,KAAK0kB,WAAWC,EAAuB,SAAAle,GAC5C,OACE+B,EAAAlI,EAAAmI,cAAC4b,GAAA,EAAKhb,KAAN,CAAWhK,IAAKoH,EAAEjE,UAChBgG,EAAAlI,EAAAmI,cAACkV,GAAD,CAAuBjX,aAAcD,wCAMpC,IAAAqX,EAAA9d,KAAAuU,EAQHvU,KAAKuI,MANPpC,EAFKoO,EAELpO,cACAye,EAHKrQ,EAGLqQ,OACApV,EAJK+E,EAIL/E,mBACAmV,EALKpQ,EAKLoQ,sBACA/e,EANK2O,EAML3O,MACAkK,EAPKyE,EAOLzE,qBAPK1F,EAS+CpK,KAAKoI,MAAnD4b,EATD5Z,EASC4Z,wBAAyBC,EAT1B7Z,EAS0B6Z,iBAEjC,OACEzb,EAAAlI,EAAAmI,cAAA,OAAKG,UAAU,oBACbJ,EAAAlI,EAAAmI,cAACoc,GAAD,CACE1Z,UAAW8Y,EACX/Y,QAAS,kBAAM4S,EAAKjU,SAAS,CAAEoa,iBAAkB,QACjDvd,aAAcud,EACdzP,SAAU,SAAAlV,GACRwQ,EAAqBmU,EAAkB3kB,GACvCwe,EAAKjU,SAAS,CAAEoa,iBAAkB,QAEpCre,MAAOA,IAET4C,EAAAlI,EAAAmI,cAACqc,GAAD,CACEtQ,SAAU,SAAAlV,GACRkQ,EAAmBlQ,GACnBwe,EAAKoG,0BAEP/Y,QAAS6Y,EACT9Y,QAASlL,KAAKkkB,uBACd3C,sBAAuBpb,EACvBqb,8BAA+BmD,IAEjCnc,EAAAlI,EAAAmI,cAAA,OAAKG,UAAU,2BACbJ,EAAAlI,EAAAmI,cAACoD,EAAA,EAAD,CAAQJ,KAAK,aAAaF,QAASqZ,IACnCpc,EAAAlI,EAAAmI,cAACoD,EAAA,EAAD,CACEJ,KAAK,OACLF,QAASvL,KAAKkkB,uBACdtZ,MAAO,CAAE4H,WAAY,QAHvB,oBAOAhK,EAAAlI,EAAAmI,cAAA,QAAMG,UAAU,oBAAoBhD,EAAMhH,OAE5C4J,EAAAlI,EAAAmI,cAAA,OAAKG,UAAU,4BACbJ,EAAAlI,EAAAmI,cAACsc,GAAA,EAAD,KACEvc,EAAAlI,EAAAmI,cAACsc,GAAA,EAAKC,QAAN,CAAcC,IAAI,gBAAgB5lB,IAAI,iBACnCW,KAAKge,oBAAoB7X,IAE5BqC,EAAAlI,EAAAmI,cAACsc,GAAA,EAAKC,QAAN,CACEC,IAAI,yBACJ5lB,IAAI,0BAEHW,KAAKklB,4BAA4BP,cA7GL7Y,IAAMC,YCiYlCoZ,uBAtXb,SAAAA,EAAY5c,GAAO,IAAAgB,EAAA,OAAAxB,OAAAyB,EAAA,EAAAzB,CAAA/H,KAAAmlB,IACjB5b,EAAAxB,OAAA0B,EAAA,EAAA1B,CAAA/H,KAAA+H,OAAA2B,EAAA,EAAA3B,CAAAod,GAAAxb,KAAA3J,KAAMuI,KA6IR6c,aAAe,SAAC9lB,EAAM+lB,GAAa,IAAAjb,EACPb,EAAKnB,MAAvBmG,EADyBnE,EACzBmE,OAAQ3I,EADiBwE,EACjBxE,MAEZA,EACF2D,EAAKhB,MAAMqJ,cAAc3C,SAASrJ,EAAOtG,GAEzCiK,EAAKhB,MAAMqJ,cAAczD,MAAM7O,EAAMiP,GAGvChF,EAAK+b,WAAWD,IAvJC9b,EA0JnB+b,WAAa,SAACnnB,GAAsC,IAAhCoQ,EAAgC/O,UAAAX,OAAA,QAAAY,IAAAD,UAAA,GAAAA,UAAA,GAAvB,KAAMoG,EAAiBpG,UAAAX,OAAA,QAAAY,IAAAD,UAAA,GAAAA,UAAA,GAAT,KACzC+J,EAAKM,SAAS,SAAAC,GACZ,MAAO,CACLyE,OAAQA,EACR3I,MAAOA,EACP+M,KAAK5K,OAAAgI,EAAA,EAAAhI,CAAA,GAAM+B,EAAU6I,KAAjB5K,OAAA6P,EAAA,EAAA7P,CAAA,GAAwB5J,GAAQ2L,EAAU6I,KAAKxU,SA/JtCoL,EAoKnBgc,kBAAoB,SAAAnZ,GAClB7C,EAAKM,SAAS,CAAEuC,aArKC7C,EAwKnBic,wBAA0B,WACxBjc,EAAKM,SAAS,SAAAC,GACZ,MAAO,CACL2b,mBAAoB3b,EAAU2b,sBAzKlClc,EAAKnB,MAAQ,CACXuK,KAAM,CACJrG,MAAM,EACNF,SAAS,EACTC,OAAO,GAETD,QAAS,KACTxG,MAAO,KACP2I,OAAQ,KACRkX,mBAAmB,EACnBrU,kBAAkB,EAClBsU,uBAAuB,EACvBC,+BAA+B,GAdhBpc,mFAmBjBvJ,KAAKqR,2DAGYC,GACbtR,KAAKuI,MAAM2W,UAAU1c,WAAa8O,EAAU4N,UAAU1c,SACxDxC,KAAKqR,gBAELrR,KAAKuR,oEAIa,IAAAqU,EAKhB5lB,KAAKoI,MAHPgJ,EAFkBwU,EAElBxU,iBACAsU,EAHkBE,EAGlBF,sBACAC,EAJkBC,EAIlBD,8BAEEnU,EAAW,GAEXxR,KAAKyR,0BAA4BL,IACnCI,EAASJ,kBAAmB,GAG1BpR,KAAK6lB,+BAAiCH,IACxClU,EAASkU,uBAAwB,GAIjC1lB,KAAK8lB,uCACLH,IAEAnU,EAASmU,+BAAgC,GAGvC5d,OAAO2J,KAAKF,GAAU3S,OAAS,GACjCmB,KAAK6J,SAAS2H,2CAIF,IAAAuU,EAKV/lB,KAAKoI,MAHPgJ,EAFY2U,EAEZ3U,iBACAsU,EAHYK,EAGZL,sBACAC,EAJYI,EAIZJ,8BAEEnU,EAAW,GAEVxR,KAAKyR,yBAECL,IACTI,EAASJ,kBAAmB,GAF5BpR,KAAK2R,gBAKF3R,KAAK6lB,8BAECH,IACTlU,EAASkU,uBAAwB,GAFjC1lB,KAAKgmB,qBAKFhmB,KAAK8lB,sCAECH,IACTnU,EAASmU,+BAAgC,GAFzC3lB,KAAKimB,6BAKHle,OAAO2J,KAAKF,GAAU3S,OAAS,GACjCmB,KAAK6J,SAAS2H,oDAIO,IACf0N,EAAclf,KAAKuI,MAAnB2W,UAER,GAAIjT,EAAuBiT,EAAU/gB,OACb8N,EAAuBiT,EAAU/gB,MAAMmM,KAC3D,SAAAnM,GACE,IAAK+gB,EAAU/gB,GACb,OAAO,IAMX,OAAO,EAIX,OAAO,wDAGqB,IACpB+gB,EAAclf,KAAKuI,MAAnB2W,UACR,QAAuB,QAAnBA,EAAU/gB,OAAmB+gB,EAAU/Y,6EAOP,IAC5B+Y,EAAclf,KAAKuI,MAAnB2W,UACR,QAAuB,QAAnBA,EAAU/gB,OAAmB+gB,EAAUyF,0LAQN3kB,KAAKuI,MAAlC2W,cAAWtN,2BACbA,EAAc5M,iBAAiBka,6QAIAlf,KAAKuI,MAAlC2W,cAAWtN,2BACbA,EAAczM,iBAAiB+Z,qRAIAlf,KAAKuI,MAAlC2W,cAAWtN,2BACbA,EAAchP,yBAAyBsc,yIAqCnCvb,GACV,SAAIA,GAAsB,kBAARA,IACToE,OAAO2J,KAAK/N,GAAK9E,OAAS,6CAMlB,IAAAqnB,EAC0BlmB,KAAKuI,MAAxCrI,EADSgmB,EACThmB,KAAMgf,EADGgH,EACHhH,UAAW/Y,EADR+f,EACQ/f,cACzB,OAAO+Y,EAAU/Y,eAAiBA,GAAiB,CAACjG,8CAGxB,IAAbkQ,EAAa5Q,UAAAX,OAAA,QAAAY,IAAAD,UAAA,GAAAA,UAAA,GAAJ,GACxB,OAAOuI,OAAO2J,KAAKtB,GAAQ5J,IAAI,SAAAhE,GAAQ,OAAI4N,EAAO5N,GAAU5D,6CAG9B,IAAA2e,EAAAvd,KAApBmmB,EAAoB3mB,UAAAX,OAAA,QAAAY,IAAAD,UAAA,GAAAA,UAAA,GAAZ,GAAI+O,EAAQ/O,UAAAX,OAAA,EAAAW,UAAA,QAAAC,EAAA2mB,EACapmB,KAAKuI,MAAxCqJ,EADsBwU,EACtBxU,cAAe1R,EADOkmB,EACPlmB,KAAMgf,EADCkH,EACDlH,UACvB/Y,EAAgBnG,KAAKmF,mBAC3B,OAAO4C,OAAO2J,KAAKyU,GAAO3f,IAAI,SAAA6f,GAC5B,IAAM/Z,EAAO6Z,EAAME,GACnB,OACE7d,EAAAlI,EAAAmI,cAAC6d,GAAD,CACEpmB,KAAMA,EACNb,IAAKiN,EAAK9J,SACV8J,KAAMA,EACNnG,cAAeA,EACfyL,cAAeA,EACfI,OAAQ,SAAA1F,GAAI,OAAIiR,EAAK+H,WAAW,OAAQ/W,GAAU2Q,EAAW5S,iDAMvC,IAAAwR,EAAA9d,KAAfumB,EAAe/mB,UAAAX,OAAA,QAAAY,IAAAD,UAAA,GAAAA,UAAA,GAAJ,GACxB,OAAOuI,OAAO2J,KAAK6U,GAAU/f,IAAI,SAAAggB,GAC/B,IAAMpa,EAAUma,EAASC,GACzB,OACEhe,EAAAlI,EAAAmI,cAACwW,GAAD,CACE5f,IAAK+M,EAAQ5J,SACb4J,QAASA,EACTb,QAAS,kBAAMuS,EAAKyH,kBAAkBnZ,IACtCxD,UAAU,+DAMT,IlCnPgBlC,EAAc+f,EkCmP9BC,EAAA1mB,KAAA2mB,EACwD3mB,KAAKuI,MAA5D2W,EADDyH,EACCzH,UAAWtN,EADZ+U,EACY/U,cAAe1R,EAD3BymB,EAC2BzmB,KAAM0kB,EADjC+B,EACiC/B,OAAQgC,EADzCD,EACyCC,WADzCC,EAWH7mB,KAAKoI,MARPuK,EAHKkU,EAGLlU,KACAvG,EAJKya,EAILza,QACAxG,EALKihB,EAKLjhB,MACA6f,EANKoB,EAMLpB,kBACAlX,EAPKsY,EAOLtY,OACA6C,EARKyV,EAQLzV,iBACAsU,EATKmB,EASLnB,sBACAC,EAVKkB,EAULlB,8BAEIxf,EAAgBnG,KAAKmF,mBACrB8M,EAAgBhG,EAAuBiT,EAAU/gB,MACjD2oB,OACWrnB,IAAfmnB,EACIA,EACmB,SAAnB1H,EAAU/gB,KAIhB,OAAIsnB,EAEAjd,EAAAlI,EAAAmI,cAACse,GAAD,CACEnhB,MAAOsZ,EACP0F,OAAQ5kB,KAAKwlB,wBACbrf,cAAe+Y,EAAU/Y,cACzBqJ,mBAAoB,SAAAlQ,GAClBsS,EAAcpC,mBAAmB0P,EAAW5f,IAE9CqlB,sBAAuBzF,EAAUyF,sBACjCqC,MAAO9H,EAAU8H,MACjBlX,qBAAsB,SAACpJ,EAAcpH,GACnCsS,EAAc9B,qBAAqBoP,EAAWxY,EAAcpH,MAMhE8M,EAEA5D,EAAAlI,EAAAmI,cAACwe,GAAD,CACE9iB,KAAMiI,EAAQjI,KACdgC,cAAeA,EACfjG,KAAMA,EACN0kB,OAAQ,kBAAM8B,EAAKnB,kBAAkB,OACrC3T,cAAeA,EACfsV,YAAahI,EACb0H,WAAYE,GAAmBF,IAMnCpe,EAAAlI,EAAAmI,cAAA,OAAKG,UAAU,iBACbJ,EAAAlI,EAAAmI,cAAC0e,GAAD,CACEhc,QAASwH,EAAKvG,QACdoI,SAAU,SAAAlV,GAAI,OAAIonB,EAAKtB,aAAa9lB,EAAM,YAC1C4L,QAAS,kBAAMwb,EAAKpB,WAAW,YAC/BhmB,KAAMsG,EACNoZ,iBACErM,EAAKvG,SAAWpM,KAAKonB,iBAAiB7Y,EAAOnC,WAGjD5D,EAAAlI,EAAAmI,cAAC4e,GAAD,CACElc,QAASwH,EAAKtG,MACdmI,SAAU,SAAAlV,GAAI,OAAIonB,EAAKtB,aAAa9lB,EAAM,UAC1C4L,QAAS,kBAAMwb,EAAKpB,WAAW,UAC/BhmB,KAAMsG,EACNkU,eAAgBnH,EAAKtG,OAASrM,KAAKonB,iBAAiB7Y,EAAOlC,SAE7D7D,EAAAlI,EAAAmI,cAAC6e,GAAD,CACE/I,kBAAmBqI,GAAc,ElC3ThBlgB,EkC2T4BxG,ElC1T9C,CACLmP,OAAQ3I,EAAalE,SACrBua,WAAYtO,KAAKC,MACjBsO,WAAYyJ,EAAKA,EAAGjkB,SAAW,KAC/B8M,YAAa,QkCuTPnJ,cAAeA,EACfgF,QAASwH,EAAKrG,KACdkI,SAAU,SAAAlV,GAAI,OAAIonB,EAAKtB,aAAa9lB,EAAM,SAC1C4L,QAAS,kBAAMwb,EAAKpB,WAAW,SAC/BhmB,KAAMsG,EACN1F,KAAMA,IAERsI,EAAAlI,EAAAmI,cAAA,OAAKG,UAAU,wBACZgc,GACCpc,EAAAlI,EAAAmI,cAACoD,EAAA,EAAD,CACEN,QAASqZ,EACTnZ,KAAK,aACLb,MAAO,CAAEsR,YAAa,SAGzBjK,EAAcpT,OAAS,GACtB2J,EAAAlI,EAAAmI,cAACoI,GAAD,CACE5K,MAAOgM,EACPrG,MAAM,SACNL,QAAS,SAAApN,GAAI,OAAIuoB,EAAKpB,WAAWnnB,EAAM+gB,MAGvB,QAAnBA,EAAU/gB,OACRunB,GAAyBC,EACxB,UAEAnd,EAAAlI,EAAAmI,cAACoD,EAAA,EAAD,CACEjB,MAAO,CAAE4H,WAAY,OACrBjH,QAASvL,KAAKwlB,yBAFhB,kBAOJhd,EAAAlI,EAAAmI,cAAA,QAAMG,UAAU,sBACbke,EAAkB,OAAS5H,EAAUtgB,OAG1C4J,EAAAlI,EAAAmI,cAAA,OAAKG,UAAU,yBACbJ,EAAAlI,EAAAmI,cAAA,OAAKG,UAAU,+BACZwI,GAAoB,WACnBpR,KAAKunB,YAAYrI,EAAU5S,OAC3BtM,KAAKunB,YAAYrI,EAAU9S,WAC3B5D,EAAAlI,EAAAmI,cAAA,OAAKG,UAAU,8BAA8BvJ,IAAI,aAC/CmJ,EAAAlI,EAAAmI,cAAC+e,GAAD,CAAO5oB,KAAK,YAAYsB,KAAMA,GAC3BF,KAAKynB,YAAYvI,EAAU5S,KAAM4S,GACjClf,KAAK0nB,eAAexI,EAAU9S,WAIpCpM,KAAKunB,YAAYrI,EAAU7S,QAC1BtE,OAAO2J,KAAKwN,EAAU7S,OAAO7F,IAAI,SAAAmhB,GAC/B,IAAItb,EAAQ6S,EAAU7S,MAAMsb,GAC5B,OACEnf,EAAAlI,EAAAmI,cAAA,OAAKG,UAAU,8BAA8BvJ,IAAKsoB,GAChDnf,EAAAlI,EAAAmI,cAAC+e,GAAD,CACEnb,MAAOA,EACP0F,gBAAiB2U,EAAKpB,WACtB1T,cAAeA,EACfI,OAAQ,SAAA3F,GAAK,OACXqa,EAAKpB,WAAW,QAASpG,EAAW7S,IAEtCnM,KAAMA,GAELwmB,EAAKe,YAAYpb,EAAMC,KAAMD,GAC7Bqa,EAAKgB,eAAerb,EAAMD,uBA3WzBN,IAAMC,YCPxB6b,eACJ,SAAAA,EAAYrf,GAAO,IAAAgB,EAAA,OAAAxB,OAAAyB,EAAA,EAAAzB,CAAA/H,KAAA4nB,IACjBre,EAAAxB,OAAA0B,EAAA,EAAA1B,CAAA/H,KAAA+H,OAAA2B,EAAA,EAAA3B,CAAA6f,GAAAje,KAAA3J,KAAMuI,KACDH,MAAQ,CACX0K,MAAO,MAHQvJ,8LAQZvJ,KAAKuI,MAAM2W,mDAENlf,KAAKuI,MAAMsf,sEAEjB7nB,KAAK6J,SAAS,CAAEiJ,MAAKtS,EAAAmU,gJAKlB,IAAAJ,EACoCvU,KAAKuI,MAAxC2W,EADD3K,EACC2K,UAAWtN,EADZ2C,EACY3C,cAAe1R,EAD3BqU,EAC2BrU,KAC1B4S,EAAU9S,KAAKoI,MAAf0K,MAER,OAAKoM,EAEMpM,EACF,oBAIPtK,EAAAlI,EAAAmI,cAAC0W,GAAD,CACED,UAAWA,EACXtN,cAAeA,EACf1R,KAAMA,IATD,iBAvBoB4L,IAAMC,WAmFxBzD,mBA7Cf,SAAyBF,GACvB,MAAO,CAAEA,UAGX,SAA4B2F,GAC1B,MAAO,CAAEA,aAGX,SAAA7K,EAAAuM,EAA6CqY,GAAU,IAAjC1f,EAAiClF,EAAjCkF,MAAW2F,EAAsB0B,EAAtB1B,SACzB7N,EAAOkI,EAAMlI,KAAKA,KAOxB,MAAO,CACL0R,cAPoB9D,EAAkB,CACtCC,WACA7N,OACAqO,OAAQnG,EAAM8W,YAKdhf,OACAgf,UAAW9W,EAAM8W,UACX2I,cAJD,eAAAE,EAAAhgB,OAAAsG,EAAA,EAAAtG,CAAA1H,EAAAC,EAAAgO,KAAA,SAAAlN,IAAA,IAAA+O,EAAAC,EAAA8O,EAAA8I,EAAApb,EAAA,OAAAvM,EAAAC,EAAAC,KAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAZ,MAAA,cAAAY,EAAAZ,KAAA,EAKsB2M,EAAa,uBALnC,OAAA8C,EAAA7O,EAAAT,KAKKuP,EALLD,EAKKC,OAEJ8O,EAAY,KACZ8I,EAAO,GACX5X,EAAOtM,QAAQ,SAAAwM,GACI,SAAbA,EAAInS,MACN+gB,EAAY5O,GACFnM,KAAV,YACsB,SAAbmM,EAAInS,OACb6pB,EAAK1X,EAAI9N,UAAY8N,EACrBA,EAAInM,KAAJ,QAAA3G,OAAmB8S,EAAI9N,aAIvBoK,EAAU,CACZE,EAAgBoS,EAAU/a,KAAM+a,GAChCpS,EAAgB,OAAQkb,IAG1Bja,EAASpB,EAAaC,IAxBnB,wBAAAtL,EAAAN,SAAAI,MAAA,yBAAA2mB,EAAAhoB,MAAAC,KAAAR,YAAA,KA6BM8I,CAIbsf,IC9Fa,SAASK,GAAa1f,GAAO,IAClC4D,EAAmC5D,EAAnC4D,IAAKvD,EAA8BL,EAA9BK,UAAWgC,EAAmBrC,EAAnBqC,MAAOW,EAAYhD,EAAZgD,QAC/B,OACE/C,EAAAlI,EAAAmI,cAAC0S,GAAD,CACEvS,UAAWA,EACXtJ,KAAM6M,EACNZ,QAASA,EACT6P,WAAY,WACV,OAAO5S,EAAAlI,EAAAmI,cAAA,UAAK0D,EAAIvN,OAElBgM,MAAK7C,OAAAgI,EAAA,EAAAhI,CAAA,CACH8C,OAAQ,OACRsR,QAAS,OACNvR,GAEL2Q,UAAW,ICXjB,IAAMjC,GAAWC,KAAMD,SAEjB4O,eAKJ,SAAAA,EAAY3f,GAAO,IAAAgB,EAAAxB,OAAAyB,EAAA,EAAAzB,CAAA/H,KAAAkoB,IACjB3e,EAAAxB,OAAA0B,EAAA,EAAA1B,CAAA/H,KAAA+H,OAAA2B,EAAA,EAAA3B,CAAAmgB,GAAAve,KAAA3J,KAAMuI,KAkDRiM,SAAW,SAAAlV,GAET,OADAA,EAAKnB,KAAO,MACLoL,EAAKhB,MAAMiM,SAASlV,IAnD3B,IAAMma,EAAI1R,OAAA2R,GAAA,EAAA3R,CAAAwB,GACJjK,EAAOiJ,EAAMjJ,MAAQ,GAHV,OAKjBiK,EAAKiM,MAAQ,CACXgB,OAAQ,CACN5X,KAAM,CACJ6L,UAAW8O,KACXhR,MAAO,CAAEoR,aAAc,OACvB/N,MAAO,OACPgK,SAAU,KACVC,WAAY,KACZK,MAAK,GAAA1Y,OAAAuK,OAAA6R,GAAA,EAAA7R,CACAkQ,GAAgBrZ,MADhB,CAEH,CACEib,UAAWhC,GACTtP,EAAM4f,aACN,iBAIN/R,aAAc9W,EAAKV,MAErB0Z,YAAa,CACX7N,UAAW6O,GACX/Q,MAAO,CAAEwR,SAAU,CAAEC,QAAS,EAAGC,QAAS,IAC1CrO,MAAO,cACPsK,MAAO+B,GAAgBK,YACvBlC,aAAc9W,EAAKgZ,aAErB4B,OAAQ,CACNzP,UAAW0P,IACX5R,MAAO,CACLpK,KAAM,UACN2T,SAAU,SACVlM,OAAO,EACPwU,SAAU,UAEZxE,SAAU,KACVC,WAAY,KACZG,YAAY,IAGhBd,UAAW,CACTmF,kBAAkB,GAEpB7F,SAAUiF,EAAKjF,UA/CAjL,wEAyDjB,OAAOf,EAAAlI,EAAAmI,cAAC6R,GAAD,CAAa9E,MAAOxV,KAAKwV,MAAO7C,KAAM3S,KAAKuI,MAAMoK,cA9DtC7G,IAAMC,WAAtBmc,GACGlc,aAAe,CACpB1M,KAAM,IAgEKqZ,UAAUrD,KAAKiF,QAALjF,CAAc4S,IAAU,OCIlCE,uBAvEb,SAAAA,EAAY7f,GAAO,IAAAgB,EAAA,OAAAxB,OAAAyB,EAAA,EAAAzB,CAAA/H,KAAAooB,IACjB7e,EAAAxB,OAAA0B,EAAA,EAAA1B,CAAA/H,KAAA+H,OAAA2B,EAAA,EAAA3B,CAAAqgB,GAAAze,KAAA3J,KAAMuI,KAOR8f,cAAgB,SAAAC,GACd/e,EAAKM,SAAS,CAAE0e,WAAYD,KATX/e,EAYnBif,iBAAmB,WACjBjf,EAAKM,SAAS,SAAAC,GACZ,MAAO,CACL2e,gBAAiB3e,EAAU2e,mBAfdlf,EAoBnBmf,YAAc,SAAAvc,GACZ5C,EAAKhB,MAAMqJ,cAAczD,MAAMhC,GAC/B5C,EAAKif,oBApBLjf,EAAKnB,MAAQ,CACXmgB,WAAY,KACZE,gBAAgB,GAJDlf,wEAyBV,IAAAgU,EAAAvd,KAAAuU,EAC+BvU,KAAKuI,MAAnCyf,EADDzT,EACCyT,KAAMpW,EADP2C,EACO3C,cAAe1R,EADtBqU,EACsBrU,KADtBkK,EAEgCpK,KAAKoI,MAApCmgB,EAFDne,EAECme,WAAYE,EAFbre,EAEaqe,eAEpB,OAAIF,EAEA/f,EAAAlI,EAAAmI,cAAC0W,GAAD,CACED,UAAW8I,EAAKO,GAChB3D,OAAQ,kBAAMrH,EAAK8K,cAAc,OACjCzW,cAAeA,EACf1R,KAAMA,IAMVsI,EAAAlI,EAAAmI,cAAA,OAAKG,UAAU,WACbJ,EAAAlI,EAAAmI,cAACkgB,GAAD,CACExd,QAASsd,EACTjU,SAAUxU,KAAK0oB,YACfxd,QAASlL,KAAKwoB,iBACdL,aAAcpgB,OAAO2J,KAAKsW,GAAMxhB,IAAI,SAAAwJ,GAAK,OAAIgY,EAAKhY,GAAOpR,SAE3D4J,EAAAlI,EAAAmI,cAAA,OAAKG,UAAU,kBACbJ,EAAAlI,EAAAmI,cAACoD,EAAA,EAAD,CAAQN,QAASvL,KAAKwoB,iBAAkB/c,KAAK,QAA7C,eAIFjD,EAAAlI,EAAAmI,cAAA,OAAKG,UAAU,mBACZb,OAAO2J,KAAKsW,GAAMxhB,IAAI,SAAAwJ,GACrB,IAAM7D,EAAM6b,EAAKhY,GACjB,OACExH,EAAAlI,EAAAmI,cAACwf,GAAD,CACE5oB,IAAK8M,EAAI3J,SACT2J,IAAKA,EACLZ,QAAS,kBAAMgS,EAAK8K,cAAcrY,IAClCpH,UAAU,iCA9DPkD,IAAMC,YCCnB6c,eACJ,SAAAA,EAAYrgB,GAAO,IAAAgB,EAAA,OAAAxB,OAAAyB,EAAA,EAAAzB,CAAA/H,KAAA4oB,IACjBrf,EAAAxB,OAAA0B,EAAA,EAAA1B,CAAA/H,KAAA+H,OAAA2B,EAAA,EAAA3B,CAAA6gB,GAAAjf,KAAA3J,KAAMuI,KACDH,MAAQ,CACX0K,MAAO,MAHQvJ,8LAQZvJ,KAAKuI,MAAM2W,mDAENlf,KAAKuI,MAAMsf,sEAEjB7nB,KAAK6J,SAAS,CAAEiJ,MAAKtS,EAAAmU,gJAKlB,IACCqT,EAAShoB,KAAKuI,MAAdyf,KACAlV,EAAU9S,KAAKoI,MAAf0K,MAER,OAAKkV,EAEMlV,EACF,oBAGFtK,EAAAlI,EAAAmI,cAACogB,GAAS7oB,KAAKuI,OALb,iBAvBeuD,IAAMC,WA4EnBzD,mBA5Cf,SAAyBF,GACvB,MAAO,CAAEA,UAGX,SAA4B2F,GAC1B,MAAO,CAAEA,aAGX,SAAA7K,EAAAuM,GAA6C,IAAvBrH,EAAuBlF,EAAvBkF,MAAW2F,EAAY0B,EAAZ1B,SAM/B,MAAO,CACL6D,cANoB9D,EAAkB,CACtCC,WACA7N,KAAMkI,EAAMlI,KAAKA,OAKjBgf,UAAW9W,EAAM8W,UACjBhf,KAAMkI,EAAMlI,KAAKA,KACjB8nB,KAAM5f,EAAM4f,KACNH,cALD,eAAAE,EAAAhgB,OAAAsG,EAAA,EAAAtG,CAAA1H,EAAAC,EAAAgO,KAAA,SAAAlN,IAAA,IAAA+O,EAAAC,EAAA8O,EAAA8I,EAAApb,EAAA,OAAAvM,EAAAC,EAAAC,KAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAZ,MAAA,cAAAY,EAAAZ,KAAA,EAMsB2M,EAAa,uBANnC,OAAA8C,EAAA7O,EAAAT,KAMKuP,EANLD,EAMKC,OAEJ8O,EAAY,KACZ8I,EAAO,GACX5X,EAAOtM,QAAQ,SAAAwM,GACI,SAAbA,EAAInS,MACN+gB,EAAY5O,GACFnM,KAAV,YACsB,QAAbmM,EAAInS,OACb6pB,EAAK1X,EAAI9N,UAAY8N,EACrBA,EAAInM,KAAJ,QAAA3G,OAAmB8S,EAAI9N,aAIvBoK,EAAU,CACZE,EAAgBoS,EAAU/a,KAAM+a,GAChCpS,EAAgB,OAAQkb,IAG1Bja,EAASpB,EAAaC,IAzBnB,wBAAAtL,EAAAN,SAAAI,MAAA,yBAAA2mB,EAAAhoB,MAAAC,KAAAR,YAAA,KA8BM8I,CAIbsgB,ICjBaE,mMA/DGC,GACd,GAAIpb,MAAMsC,QAAQ8Y,EAAapZ,eAAgB,KAAAqZ,EACvCC,GAAqBD,EAAA,GAAAjhB,OAAA6P,EAAA,EAAA7P,CAAAihB,EANhB,YAOG,GADajhB,OAAA6P,EAAA,EAAA7P,CAAAihB,EALhB,YAOG,GAFaA,GAK3B,OAAOD,EAAapZ,cAAcrF,KAAK,SAAApH,GAAgB,IAAb0M,EAAa1M,EAAb0M,OACxC,OAAOqZ,EAAsBrZ,KAIjC,OAAO,sCAGA,IAAA2E,EAC6BvU,KAAKuI,MAAjCwgB,EADDxU,EACCwU,aAAcG,EADf3U,EACe2U,UAChBvmB,EAAW3C,KAAKmpB,gBAAgBJ,GAEtC,OACEvgB,EAAAlI,EAAAmI,cAAA,OAAKG,UAAU,qBACbJ,EAAAlI,EAAAmI,cAAA,OAAKG,UAAU,0BACbJ,EAAAlI,EAAAmI,cAAA,wCAAgCsgB,EAAaK,KAAKC,WAClD7gB,EAAAlI,EAAAmI,cAAA,YAAO,IAAIgG,KAAKsa,EAAava,WAAW8a,iBAE1C9gB,EAAAlI,EAAAmI,cAAA,KAAGG,UAAU,0BAA0BmgB,EAAa3iB,MACpDoC,EAAAlI,EAAAmI,cAAA,OAAKG,UAAU,0BACXjG,EAiBA6F,EAAAlI,EAAAmI,cAAA,iBACQ,IACND,EAAAlI,EAAAmI,cAAA,QACEmC,MAAO,CACLqQ,gBAAiB,OACjBkB,QAAS,MACToN,aAAc,QAGf5mB,EAASiN,SAzBdpH,EAAAlI,EAAAmI,cAAAD,EAAAlI,EAAAkc,SAAA,KACEhU,EAAAlI,EAAAmI,cAACoD,EAAA,EAAD,CACE1N,KAAK,UACLoN,QAAS,kBAAM2d,EAAUH,EAnCxB,cAiCH,UAMAvgB,EAAAlI,EAAAmI,cAACoD,EAAA,EAAD,CACE1N,KAAK,SACLoN,QAAS,kBAAM2d,EAAUH,EAzCxB,aA0CDne,MAAO,CAAE4e,OAAQ,UAHnB,qBApCiB1d,IAAMC,mBCArC,SAAS0d,GAAqBlhB,GAAO,IAC3BwgB,EAAsCxgB,EAAtCwgB,aAAcW,EAAwBnhB,EAAxBmhB,WAAYne,EAAYhD,EAAZgD,QAC5BX,EAAQ8e,EACV,CACEzO,gBAAiB,kBACjBrM,MAAO,SAETma,EAAaY,OAAS,EACtB,CACE/a,MAAO,QAET,KAEJ,OACEpG,EAAAlI,EAAAmI,cAAA,OAAK8C,QAASA,EAAS3C,UAAU,0BAA0BgC,MAAOA,GAChEpC,EAAAlI,EAAAmI,cAAA,wCAAgCsgB,EAAaK,KAAKC,WAClD7gB,EAAAlI,EAAAmI,cAAA,YAAO,IAAIgG,KAAKsa,EAAava,WAAW8a,qBAoG/BM,eA9Fb,SAAAA,EAAYrhB,GAAO,IAAAgB,EAAA,OAAAxB,OAAAyB,EAAA,EAAAzB,CAAA/H,KAAA4pB,IACjBrgB,EAAAxB,OAAA0B,EAAA,EAAA1B,CAAA/H,KAAA+H,OAAA2B,EAAA,EAAA3B,CAAA6hB,GAAAjgB,KAAA3J,KAAMuI,KAiBRshB,kBAAoB,SAAAvB,GACd/e,EAAKnB,MAAM0hB,sBAAwBxB,IACrC/e,EAAKM,SAAS,CAAEigB,oBAAqBxB,IACrC/e,EAAKhB,MAAMwhB,oBAAoBxgB,EAAKhB,MAAMyhB,cAAc1B,MAnB1D/e,EAAKnB,MAAQ,CACX6hB,WAAY1gB,EAAK2gB,gBACjBJ,oBAAqB,MAGvBvgB,EAAK4gB,cAAgBlR,KAAS1P,EAAK4gB,cAAe,IAAK,CAAEC,SAAS,IAPjD7gB,mFAWjBlL,OAAO6a,iBAAiB,SAAUlZ,KAAKmqB,8DAIvC9rB,OAAO8a,oBAAoB,SAAUnZ,KAAKmqB,uDAW1C,IAAMF,EAAajqB,KAAKkqB,gBACpBlqB,KAAKoI,MAAM6hB,aAAeA,GAC5BjqB,KAAKmqB,cAAc,CAAEF,uDAKvB,OAAOnhB,IAAmB,IAAM,UAAY,6DAGlB,IAAAyL,EACWvU,KAAKuI,MAAlCyhB,EADkBzV,EAClByV,cAAed,EADG3U,EACH2U,UACfY,EAAwB9pB,KAAKoI,MAA7B0hB,oBAER,OACEthB,EAAAlI,EAAAmI,cAAC4hB,GAAD,CACEtB,aAAciB,EAAcF,GAC5BZ,UAAWA,kDAKK,IAAA3L,EAAAvd,KACZgqB,EAAkBhqB,KAAKuI,MAAvByhB,cACAF,EAAwB9pB,KAAKoI,MAA7B0hB,oBACR,OACEthB,EAAAlI,EAAAmI,cAAA,OAAKG,UAAU,2BACZb,OAAO2J,KAAKsY,GAAexjB,IAAI,SAAA8jB,GAC9B,IAAMvB,EAAeiB,EAAcM,GACnC,OACE9hB,EAAAlI,EAAAmI,cAACghB,GAAD,CACEpqB,IAAKirB,EACLvB,aAAcA,EACdxd,QAAS,kBAAMgS,EAAKsM,kBAAkBd,EAAavmB,WACnDknB,WACEI,IAAwBf,EAAavmB,+CAS1C,IAAA4H,EACqCpK,KAAKoI,MAAzC6hB,EADD7f,EACC6f,WAAYH,EADb1f,EACa0f,oBAEpB,MAAmB,WAAfG,EACEH,EACK9pB,KAAKuqB,4BAGPvqB,KAAKwqB,sBAIZhiB,EAAAlI,EAAAmI,cAACyJ,EAAA,EAAD,CAAKtH,MAAO,CAAEC,OAAQ,SACpBrC,EAAAlI,EAAAmI,cAAC0J,EAAA,EAAD,CAAKvH,MAAO,CAAEC,OAAQ,QAAUuH,KAAM,GACnCpS,KAAKwqB,uBAERhiB,EAAAlI,EAAAmI,cAAC0J,EAAA,EAAD,CAAKvH,MAAO,CAAEC,OAAQ,QAAUuH,KAAM,IACnC0X,EAAsB9pB,KAAKuqB,4BAA8B,cAxFrCze,IAAMC,WCrB/B0e,eACJ,SAAAA,EAAYliB,GAAO,IAAAgB,EAAA,OAAAxB,OAAAyB,EAAA,EAAAzB,CAAA/H,KAAAyqB,IACjBlhB,EAAAxB,OAAA0B,EAAA,EAAA1B,CAAA/H,KAAA+H,OAAA2B,EAAA,EAAA3B,CAAA0iB,GAAA9gB,KAAA3J,KAAMuI,KACDH,MAAQ,CACX0K,MAAO,MAHQvJ,8LAQZvJ,KAAKuI,MAAMyhB,uDAENhqB,KAAKuI,MAAMmiB,2EAEjB1qB,KAAK6J,SAAS,CAAEiJ,MAAKtS,EAAAmU,gJAKlB,IAAAJ,EACmDvU,KAAKuI,MAAvDyhB,EADDzV,EACCyV,cAAed,EADhB3U,EACgB2U,UAAWa,EAD3BxV,EAC2BwV,oBAC1BjX,EAAU9S,KAAKoI,MAAf0K,MAER,OAAKkX,EAEMlX,EACFA,EAAMpD,SAAW,oBAIxBlH,EAAAlI,EAAAmI,cAACkiB,GAAD,CACEX,cAAeA,EACfd,UAAWA,EACXa,oBAAqBA,IAThB,iBAvBwBje,IAAMC,WA0H5BzD,mBApFf,SAAyBF,GACvB,MAAO,CAAEA,UAGX,SAA4B2F,GAC1B,MAAO,CAAEA,aAGX,SAAA7K,EAAAuM,EAA6CqY,GAAU,IAAjC1f,EAAiClF,EAAjCkF,MAAW2F,EAAsB0B,EAAtB1B,SAC/B,MAAO,CACLic,cAAe5hB,EAAM4hB,cACfD,oBAFD,eAAAa,EAAA7iB,OAAAsG,EAAA,EAAAtG,CAAA1H,EAAAC,EAAAgO,KAAA,SAAAlN,EAEqB2nB,GAFrB,IAAA8B,EAAA,OAAAxqB,EAAAC,EAAAC,KAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAZ,MAAA,OAGEqoB,EAAaY,SACZkB,EAAS,CAAElB,OAAQlb,KAAKC,OAC5BX,EACEjB,EAAe,iBAAAtP,OAAkBurB,EAAavmB,UAAYqoB,IAE5Dxd,EAAa,kCAAmC0b,EAAc8B,IAR7D,wBAAAvpB,EAAAN,SAAAI,MAAA,gBAAAvB,GAAA,OAAA+qB,EAAA7qB,MAAAC,KAAAR,YAAA,GAYC0pB,UAZD,eAAA4B,EAAA/iB,OAAAsG,EAAA,EAAAtG,CAAA1H,EAAAC,EAAAgO,KAAA,SAAApM,EAYW6mB,EAAcpmB,GAZzB,IAaMooB,EAbNpb,EAAAkb,EAAAzqB,EAAAwF,EAAA,OAAAvF,EAAAC,EAAAC,KAAA,SAAA4B,GAAA,cAAAA,EAAA1B,KAAA0B,EAAAzB,MAAA,UAaMqqB,EAbN,SAaqBpb,GACtB,IAAMqb,EAAkB,CACtBC,UAAU,EACVC,UAAU,EACVC,SAAS,GAGX,QAAIxd,MAAMsC,QAAQN,KACNA,EAAcrF,KAAK,SAAA6F,GAAgB,IAAbP,EAAaO,EAAbP,OAC9B,OAAOob,EAAgBpb,MAOzBD,EAAgBoZ,EAAapZ,eAE7Bob,EAAepb,GA/BhB,CAAAxN,EAAAzB,KAAA,gBAgCDiP,EAAcZ,KAAK,CACjBa,OAAQjN,EACRkN,KAAMpB,KAAKC,QAGTmc,EAAS,CAAElb,iBACf5B,EACEjB,EAAe,iBAAAtP,OAAkBurB,EAAavmB,UAAYqoB,IAvC3D1oB,EAAAzB,KAAA,EA0CkB2M,EACjB,qCACA0b,EACApmB,GA7CD,OA0CGvC,EA1CH+B,EAAAtB,KAgDgB,aAAb8B,GAA2BvC,GAAUA,EAAOwF,SACtCA,EAAUxF,EAAVwF,OACFzB,KAAN,QAAA3G,OAAqBoI,EAAMpD,UAC3BuL,EACEpB,EAAa,CACXI,EAAcnH,EAAMzB,KAAMyB,GAC1BkH,EAAe,iBAAmB,CAAClH,EAAMpD,eAtD9C,yBAAAL,EAAAnB,SAAAkB,MAAA,gBAAAhB,EAAAc,GAAA,OAAA8oB,EAAA/qB,MAAAC,KAAAR,YAAA,GA6DCkrB,mBA7DD,eAAAU,EAAArjB,OAAAsG,EAAA,EAAAtG,CAAA1H,EAAAC,EAAAgO,KAAA,SAAAtL,IAAA,IAAA5C,EAAA4pB,EAAAqB,EAAA,OAAAhrB,EAAAC,EAAAC,KAAA,SAAA4C,GAAA,cAAAA,EAAA1C,KAAA0C,EAAAzC,MAAA,cAAAyC,EAAAzC,KAAA,EA8DgB2M,EAAa,iCA9D7B,OA8DCjN,EA9DD+C,EAAAtC,KA+DampB,EAAkB5pB,EAA5BwQ,SAEFya,EAAmB,IADvBrB,EAAgBA,GAAiB,IAEnBlmB,QAAQ,SAAAilB,GACpBsC,EAAiBtC,EAAavmB,UAAYumB,IAG5Chb,EAASjB,EAAgB,gBAAiBue,IAtEvC,wBAAAloB,EAAAnC,SAAAgC,MAAA,yBAAAooB,EAAArrB,MAAAC,KAAAR,YAAA,KA2EM8I,CAIbmiB,aC/HIa,eACJ,SAAAA,EAAY/iB,GAAO,IAAAgB,EAAAxB,OAAAyB,EAAA,EAAAzB,CAAA/H,KAAAsrB,IACjB/hB,EAAAxB,OAAA0B,EAAA,EAAA1B,CAAA/H,KAAA+H,OAAA2B,EAAA,EAAA3B,CAAAujB,GAAA3hB,KAAA3J,KAAMuI,KA+FRiM,SAhGmB,eAAAtR,EAAA6E,OAAAsG,EAAA,EAAAtG,CAAA1H,EAAAC,EAAAgO,KAgGR,SAAArO,EAAMX,GAAN,OAAAe,EAAAC,EAAAC,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAO,OAAA,SACFwI,EAAKhB,MAAMiM,SAASlV,IADlB,wBAAAkB,EAAAQ,SAAAf,MAhGQ,gBAAAJ,GAAA,OAAAqD,EAAAnD,MAAAC,KAAAR,YAAA,GAEjB,IAAM+rB,EAA2BtU,GAC/B,WACA,kBACA1O,EAAMoK,KACN,yBAGI6Y,EAAwBvU,GAC5B,QACA,eACA1O,EAAMoK,KACN,wBAbe,OAgBjBpJ,EAAKiM,MAAQ,CACXgB,OAAQ,CACN5X,KAAM,CACJ6L,UAAW8O,KACX3N,MAAO,OACPrD,MAAO,CAAEoR,aAAc,QACvB/D,SAAU,KACVC,WAAY,KACZK,MAAOuV,kBAAe7sB,MAExB2C,MAAO,CACLkJ,UAAW8O,KACX3N,MAAO,QACPrD,MAAO,CAAEoR,aAAc,SACvB/D,SAAU,KACVC,WAAY,KACZK,MAAOuV,kBAAelqB,OAExBmqB,aAAc,CACZjhB,UAAW8O,KACX3N,MAAO,gBACPrD,MAAO,CAAEoR,aAAc,SACvB/D,SAAU,KACVC,WAAY,KACZK,MAAO,CACL,CAAEc,UAAU,EAAM7Y,KAAM,SAAU0b,UAAW2R,KAGjDhqB,SAAU,CACRuU,aAAa,EACbtL,UAAW8O,KACXhR,MAAO,CAAEpK,KAAM,WAAYwb,aAAc,gBACzC/N,MAAO,WACPgK,SAAU,KACVC,WAAY,KACZK,MAAK,GAAA1Y,OAAAuK,OAAA6R,GAAA,EAAA7R,CACA0jB,kBAAejqB,UADf,CAEH,CACEwV,UAAU,EACV7Y,KAAM,SACN0b,UAAW0R,KAGfzV,MAAO,gEAET6V,gBAAiB,CACf5V,aAAa,EACbtL,UAAW8O,KACXhR,MAAO,CAAEpK,KAAM,WAAYwb,aAAc,gBACzC/N,MAAO,mBACPgK,SAAU,KACVC,WAAY,KACZK,MAAO,CACL,CACEc,UAAU,EACV7Y,KAAM,SACN0b,UAAW0R,KAIjBrR,OAAQ,CACNzP,UAAW0P,IACX5R,MAAO,CACLpK,KAAM,UACN2T,SAAU,SACVlM,OAAO,EACPwU,SAAU,UAEZxE,SAAU,KACVC,WAAY,KACZG,YAAY,IAGhBd,UAAW,CACTmF,kBAAkB,GAEpB7F,SAAUjL,EAAKiL,UA5FAjL,wEAqGjB,OAAOf,EAAAlI,EAAAmI,cAAC6R,GAAD,CAAa9E,MAAOxV,KAAKwV,MAAO7C,KAAM3S,KAAKuI,MAAMoK,cAtGvC7G,IAAMC,WA0GZuJ,QAAKiF,QAALjF,CAAcgW,IC7FdhjB,mBACb,KAfF,SAA4ByF,GAC1B,MAAO,CACLyG,SAAQ,eAAAoX,EAAA7jB,OAAAsG,EAAA,EAAAtG,CAAA1H,EAAAC,EAAAgO,KAAE,SAAArO,EAAMX,GAAN,IAAAc,EAAA,OAAAC,EAAAC,EAAAC,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EACW2M,EAAa,cAAe/N,GADvC,YACJc,EADII,EAAAK,MAGGX,OAAQE,EAAOU,MAHlB,CAAAN,EAAAE,KAAA,QAINqN,EAASjB,EAAgB,OAAQ1M,IAJ3BI,EAAAE,KAAA,qBAMA,IAAIkU,MAAM,qBANV,wBAAApU,EAAAQ,SAAAf,MAAF,gBAAAJ,GAAA,OAAA+rB,EAAA7rB,MAAAC,KAAAR,YAAA,KAYG8I,CAGbgjB,cCjBIO,eACJ,SAAAA,EAAYtjB,GAAO,IAAAgB,EAAAxB,OAAAyB,EAAA,EAAAzB,CAAA/H,KAAA6rB,IACjBtiB,EAAAxB,OAAA0B,EAAA,EAAA1B,CAAA/H,KAAA+H,OAAA2B,EAAA,EAAA3B,CAAA8jB,GAAAliB,KAAA3J,KAAMuI,KA8CRiM,SA/CmB,eAAAtR,EAAA6E,OAAAsG,EAAA,EAAAtG,CAAA1H,EAAAC,EAAAgO,KA+CR,SAAArO,EAAMX,GAAN,OAAAe,EAAAC,EAAAC,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAO,OAAA,SACFwI,EAAKhB,MAAMiM,SAASlV,IADlB,wBAAAkB,EAAAQ,SAAAf,MA/CQ,gBAAAJ,GAAA,OAAAqD,EAAAnD,MAAAC,KAAAR,YAAA,GAEjB,IAAMia,EAAI1R,OAAA2R,GAAA,EAAA3R,CAAAwB,GAFO,OAGjBA,EAAKiM,MAAQ,CACXgB,OAAQ,CACNjV,MAAO,CACLkJ,UAAW8O,KACXhR,MAAO,CAAEoR,aAAc,SACvB/N,MAAO,QACPgK,SAAU,KACVC,WAAY,KACZK,MAAOuV,kBAAelqB,OAExBC,SAAU,CACRiJ,UAAW8O,KACXhR,MAAO,CAAEpK,KAAM,WAAYwb,aAAc,oBACzC/N,MAAO,WACPgK,SAAU,KACVC,WAAY,KACZK,MAAOuV,kBAAejqB,UAExBG,SAAU,CACR8I,UAAWqhB,KACXxV,cAAe,UACf/N,MAAO,CAAEuJ,SAAU,eACnBsE,cAAc,GAEhB8D,OAAQ,CACNzP,UAAW0P,IACX5R,MAAO,CACLpK,KAAM,UACN2T,SAAU,QACVlM,OAAO,EACPwU,SAAU,UAEZxE,SAAU,KACVC,WAAY,KACZG,YAAY,IAGhBd,UAAW,CACTmF,kBAAkB,GAEpB7F,SAAUiF,EAAKjF,UA3CAjL,wEAoDjB,OAAOf,EAAAlI,EAAAmI,cAAC6R,GAAD,CAAa9E,MAAOxV,KAAKwV,MAAO7C,KAAM3S,KAAKuI,MAAMoK,cArDxC7G,IAAMC,WAyDXuJ,QAAKiF,QAALjF,CAAcuW,IC3CdvjB,mBACb,KAfF,SAA4ByF,GAC1B,MAAO,CACLyG,SAAQ,eAAAoX,EAAA7jB,OAAAsG,EAAA,EAAAtG,CAAA1H,EAAAC,EAAAgO,KAAE,SAAArO,EAAMX,GAAN,IAAAc,EAAA,OAAAC,EAAAC,EAAAC,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EACW2M,EAAa,aAAc/N,GADtC,aACJc,EADII,EAAAK,OAGMT,EAAOF,MAAQE,EAAOU,OAH5B,CAAAN,EAAAE,KAAA,QAINqN,EAASjB,EAAgB,OAAQ1M,IAJ3BI,EAAAE,KAAA,qBAMA,IAAIkU,MAAM,qBANV,wBAAApU,EAAAQ,SAAAf,MAAF,gBAAAJ,GAAA,OAAA+rB,EAAA7rB,MAAAC,KAAAR,YAAA,KAYG8I,CAGbujB,cChBIE,eACJ,SAAAA,EAAYxjB,GAAO,IAAAgB,EAAAxB,OAAAyB,EAAA,EAAAzB,CAAA/H,KAAA+rB,IACjBxiB,EAAAxB,OAAA0B,EAAA,EAAA1B,CAAA/H,KAAA+H,OAAA2B,EAAA,EAAA3B,CAAAgkB,GAAApiB,KAAA3J,KAAMuI,KA4CRiM,SA7CmB,eAAAtR,EAAA6E,OAAAsG,EAAA,EAAAtG,CAAA1H,EAAAC,EAAAgO,KA6CR,SAAArO,EAAMX,GAAN,OAAAe,EAAAC,EAAAC,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EACH6I,EAAKhB,MAAMiM,SAASlV,GADjB,OAEToQ,KAAQkQ,QAAQ,sBAFP,wBAAApf,EAAAQ,SAAAf,MA7CQ,gBAAAJ,GAAA,OAAAqD,EAAAnD,MAAAC,KAAAR,YAAA,GAEjB,IAAMgsB,EAAwBvU,GAC5B,QACA,eACA1O,EAAMoK,KACN,wBANe,OASjBpJ,EAAKiM,MAAQ,CACXgB,OAAQ,CACNjV,MAAO,CACLkJ,UAAW8O,KAAMyS,SACjBpgB,MAAO,QACPgK,SAAU,KACVC,WAAY,KACZK,MAAK,GAAA1Y,OAAAuK,OAAA6R,GAAA,EAAA7R,CAAM0jB,kBAAelqB,OAArB,CAA4B,CAAEsY,UAAW2R,MAEhDE,aAAc,CACZjhB,UAAW8O,KACX3N,MAAO,gBACPgK,SAAU,KACVC,WAAY,KACZK,MAAK,GAAA1Y,OAAAuK,OAAA6R,GAAA,EAAA7R,CAAM0jB,kBAAelqB,OAArB,CAA4B,CAAEsY,UAAW2R,MAEhDtR,OAAQ,CACNzP,UAAW0P,IACX5R,MAAO,CACLpK,KAAM,UACN2T,SAAU,SACVlM,OAAO,EACPwU,SAAU,UAEZxE,SAAU,KACVC,WAAY,KACZG,YAAY,IAGhBd,UAAW,CACTmF,kBAAkB,GAEpB7F,SAAUjL,EAAKiL,UAzCAjL,wEAmDjB,OAAOf,EAAAlI,EAAAmI,cAAC6R,GAAD,CAAa9E,MAAOxV,KAAKwV,MAAO7C,KAAM3S,KAAKuI,MAAMoK,cApD/B7G,IAAMC,WAwDpBuJ,QAAKiF,QAALjF,CAAcyW,IClDdzjB,mBACb,KATF,SAA4ByF,GAC1B,MAAO,CACLyG,SAAQ,eAAAoX,EAAA7jB,OAAAsG,EAAA,EAAAtG,CAAA1H,EAAAC,EAAAgO,KAAE,SAAArO,EAAMX,GAAN,OAAAe,EAAAC,EAAAC,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EACF2M,EAAa,sBAAuB/N,GADlC,wBAAAkB,EAAAQ,SAAAf,MAAF,gBAAAJ,GAAA,OAAA+rB,EAAA7rB,MAAAC,KAAAR,YAAA,KAMG8I,CAGbyjB,ICTIE,eACJ,SAAAA,EAAY1jB,GAAO,IAAAgB,EAAAxB,OAAAyB,EAAA,EAAAzB,CAAA/H,KAAAisB,IACjB1iB,EAAAxB,OAAA0B,EAAA,EAAA1B,CAAA/H,KAAA+H,OAAA2B,EAAA,EAAA3B,CAAAkkB,GAAAtiB,KAAA3J,KAAMuI,KAoDRiM,SArDmB,eAAAtR,EAAA6E,OAAAsG,EAAA,EAAAtG,CAAA1H,EAAAC,EAAAgO,KAqDR,SAAArO,EAAMX,GAAN,OAAAe,EAAAC,EAAAC,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EACH6I,EAAKhB,MAAMiM,SAASlV,GADjB,OAEToQ,KAAQkQ,QAAQ,6BAFP,wBAAApf,EAAAQ,SAAAf,MArDQ,gBAAAJ,GAAA,OAAAqD,EAAAnD,MAAAC,KAAAR,YAAA,GAEjB,IAAM+rB,EAA2BtU,GAC/B,WACA,kBACA1O,EAAMoK,KACN,yBANe,OASjBpJ,EAAKiM,MAAQ,CACXgB,OAAQ,CACNhV,SAAU,CACRiJ,UAAW8O,KAAMyS,SACjBzjB,MAAO,CAAEpK,KAAM,YACfyN,MAAO,WACPgK,SAAU,KACVC,WAAY,KACZK,MAAK,GAAA1Y,OAAAuK,OAAA6R,GAAA,EAAA7R,CACA0jB,kBAAejqB,UADf,CAEH,CAAEqY,UAAW0R,MAGjBI,gBAAiB,CACflhB,UAAW8O,KAAMyS,SACjBzjB,MAAO,CAAEpK,KAAM,YACfyN,MAAO,mBACPgK,SAAU,KACVC,WAAY,KACZK,MAAK,GAAA1Y,OAAAuK,OAAA6R,GAAA,EAAA7R,CACA0jB,kBAAejqB,UADf,CAEH,CAAEqY,UAAW0R,MAGjBrR,OAAQ,CACNzP,UAAW0P,IACX5R,MAAO,CACLpK,KAAM,UACN2T,SAAU,SACVlM,OAAO,EACPwU,SAAU,UAEZxE,SAAU,KACVC,WAAY,KACZG,YAAY,IAGhBd,UAAW,CACTmF,kBAAkB,GAEpB7F,SAAUjL,EAAKiL,UAjDAjL,wEA2DjB,OAAOf,EAAAlI,EAAAmI,cAAC6R,GAAD,CAAa9E,MAAOxV,KAAKwV,MAAO7C,KAAM3S,KAAKuI,MAAMoK,cA5D/B7G,IAAMC,WAgEpBuJ,QAAKiF,QAALjF,CAAc2W,ICnDd3jB,mBACb,KAfF,SAA4ByF,GAC1B,MAAO,CACLyG,SAAQ,eAAAoX,EAAA7jB,OAAAsG,EAAA,EAAAtG,CAAA1H,EAAAC,EAAAgO,KAAE,SAAArO,EAAMX,GAAN,IAAAc,EAAA,OAAAC,EAAAC,EAAAC,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EACW2M,EAAa,+BAAgC/N,GADxD,YACJc,EADII,EAAAK,MAGGX,OAAQE,EAAOU,MAHlB,CAAAN,EAAAE,KAAA,QAINqN,EAASjB,EAAgB,OAAQ1M,IAJ3BI,EAAAE,KAAA,qBAMA,IAAIkU,MAAM,qBANV,wBAAApU,EAAAQ,SAAAf,MAAF,gBAAAJ,GAAA,OAAA+rB,EAAA7rB,MAAAC,KAAAR,YAAA,KAYG8I,CAGb2jB,cC8CF,IAAMC,GAAmB5jB,YAfzB,SAAgCF,EAAOG,GACrC,OAAOR,OAAAgI,EAAA,EAAAhI,CAAA,GACFQ,IAIP,SAAmCwF,GACjC,MAAO,CACLoe,SADK,WAEHpe,EAASb,KACTG,EAAa,kBAKM/E,CApDzB,SAAiBC,GAAO,IACd4jB,EAAa5jB,EAAb4jB,SAER,OACE3jB,EAAAlI,EAAAmI,cAAC2jB,EAAD,CACEliB,eAAe,OACfC,UAAW,CACT,CACE9K,IAAK,gBACLuM,MAAO,gBACPnB,UAAWggB,IAEb,CACEprB,IAAK,WACLuM,MAAO,WACPnB,UAAWmd,IAEb,CACEvoB,IAAK,OACLuM,MAAO,OACPnB,UAAWme,IAEb,CACEvpB,IAAK,SACLuM,MAAO,SACPnB,UAAW,OAGfT,aAAc,SAAA3K,GACA,WAARA,GAAoB8sB,GACtBA,SA2BV,SAASE,GAAgB5hB,GACvB,OAAO,WACL,IAAM6hB,EAAa7hB,EACnB,OACEjC,EAAAlI,EAAAmI,cAACyJ,EAAA,EAAD,CAAK/T,KAAK,OAAOouB,QAAQ,UACvB/jB,EAAAlI,EAAAmI,cAAC0J,EAAA,EAAD,CAAKmR,GAAI,GAAIC,GAAI,GAAIiB,GAAI,EAAG5Z,MAAO,CAAEuR,QAAS,QAC5C3T,EAAAlI,EAAAmI,cAAC6jB,EAAD,aAOJE,qTAEoDxsB,KAAKuI,MAAnDkkB,mBAAgBC,YAAS5pB,qBAE5B2pB,EAQ8B,MAA7BpuB,OAAOsuB,SAASC,UAClBF,EAAQ3d,KAAK,UARkC,IAA7C1Q,OAAOsuB,SAASC,SAASC,QAAQ,SACnCprB,QAAQC,IAAI,KACZgrB,EAAQ3d,KAAK,MAGfjM,oJAQiB,IAAA+O,EACiB7R,KAAKuI,MAAjCkkB,EADW5a,EACX4a,eAAgBC,EADL7a,EACK6a,QAEpBD,IAC+C,IAA7CpuB,OAAOsuB,SAASC,SAASC,QAAQ,QACnCH,EAAQ3d,KAAK,kDAKD+D,GAChBiW,KAAajW,MAAM,CACjBmC,MAAO,QACPvF,QAAS,sDAWX,OAF2B1P,KAAKuI,MAAxBkkB,iBAE4D,IAA7CpuB,OAAOsuB,SAASC,SAASC,QAAQ,OAKtDrkB,EAAAlI,EAAAmI,cAAA,OAAKmC,MAAO,CAAEC,OAAQ,QAAUjC,UAAU,OACxCJ,EAAAlI,EAAAmI,cAACqkB,EAAA,EAAD,KACEtkB,EAAAlI,EAAAmI,cAACskB,EAAA,EAAD,CAAO5oB,KAAK,UAAUsR,OAAQ4W,GAAgBW,MAC9CxkB,EAAAlI,EAAAmI,cAACskB,EAAA,EAAD,CAAO5oB,KAAK,SAASsR,OAAQ4W,GAAgBY,MAC7CzkB,EAAAlI,EAAAmI,cAACskB,EAAA,EAAD,CACE5oB,KAAK,mBACLsR,OAAQ4W,GAAgBa,MAE1B1kB,EAAAlI,EAAAmI,cAACskB,EAAA,EAAD,CACE5oB,KAAK,mBACLsR,OAAQ4W,GAAgBc,MAE1B3kB,EAAAlI,EAAAmI,cAACskB,EAAA,EAAD,CAAO5oB,KAAK,OAAOsG,UAAWyhB,KAC9B1jB,EAAAlI,EAAAmI,cAACskB,EAAA,EAAD,CAAO5oB,KAAK,IAAIipB,OAAK,EAAC3iB,UAAW4iB,MAjB9B7kB,EAAAlI,EAAAmI,cAACC,EAAA,EAAD,CAAUC,GAAG,aA3CRmD,IAAMC,WAsFTuhB,mBACbhlB,YApBF,SAAyBF,EAAOG,GAC9B,OAAOR,OAAAgI,EAAA,EAAAhI,CAAA,GACFQ,EADL,CAEEkkB,eAAgBrkB,EAAMlI,QAAUkI,EAAMlI,KAAKY,SAI/C,SAA4BiN,GAC1B,MAAO,CACCjL,iBADD,eAAAC,EAAAgF,OAAAsG,EAAA,EAAAtG,CAAA1H,EAAAC,EAAAgO,KAAA,SAAAlN,IAAA,IAAAhB,EAAA,OAAAC,EAAAC,EAAAC,KAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAZ,MAAA,cAAAY,EAAAZ,KAAA,EAEgB2M,EAAa,yBAF7B,QAECjN,EAFDkB,EAAAT,OAKDkN,EAASjB,EAAgB,OAAQ1M,IALhC,wBAAAkB,EAAAN,SAAAI,MAAA,yBAAA2B,EAAAhD,MAAAC,KAAAR,YAAA,KAYP8I,CAGEkkB,6BCnKJ,IAAMe,GAAcvkB,SAASwkB,eAAe,QAC5CC,IAAShY,OACPjN,EAAAlI,EAAAmI,cAACilB,EAAA,EAAD,CAAUxlB,MAAOA,KACfM,EAAAlI,EAAAmI,cAACklB,GAAA,EAAD,KACEnlB,EAAAlI,EAAAmI,cAACmlB,GAAD,QAGJL,4BCpBMpmB,EAAkByG,EAAQ,KAA1BzG,cAEFlJ,EAAa,6SA6Db6I,EAAkB,OAAAtJ,OACpBS,EADoB,QAAAT,OAEpB2J,EAFoB,+MAiBlBjB,EAAqB,OAAA1I,OACvBS,EADuB,QAAAT,OAEvB2J,EAFuB,kSAmCrBP,EAAqB,OAAApJ,OACvB2J,EADuB,gSAkBrBN,EAAsB,OAAArJ,OACxB2J,EADwB,0qBAuCtBR,EAA0B,OAAAnJ,OAC5B2J,EAD4B,uQAa1BJ,EAAkB,OAAAvJ,OACpB2J,EADoB,iOAalBH,EAAqB,OAAAxJ,OACvB2J,EADuB,gPAa3BF,EAAOC,QAAU,CACfrB,iBA5LoB,kMA6LpBE,oBAhLuB,iPAiLvBC,oBApKuB,0MAqKvBE,wBACAjI,gBACAsI,yBAxH4B,qXAyH5BM,yBACAD,wBACAE,qBACAH,6BACAI,qBACAC,2CC/NF,SAASoR,EAAKpF,GACZ,GAAIA,EAAMoF,KACR,OAAOpF,EAAMoF,OAIjB,IAOMqT,EAAiB,CACrB7sB,KAAM,CACJ,CAAET,KAAM,SAAU6Y,UAAU,EAAMkB,IAAK,GAAIC,UAAWC,GATtC,CAClBC,QAAS,MACT3I,QAAS,yCAUTnO,MAAO,CAAC,CAAEpD,KAAM,QAAS6Y,UAAU,EAAMkB,IAAK,IAAKC,UAAWC,IAC9D5W,SAAU,CACR,CACEwV,UAAU,EACV7Y,KAAM,UAER,CACE+Z,IAAK,GACLxI,QAAS,wBAEX,CACE2I,QAjBkB,wBAkBlB3I,QAAS,yBAKfzI,EAAOC,QAAU,CACfukB,mDCpCFroB,EAAAC,EAAAC,EAAA,sBAAAkJ,IAAApJ,EAAAC,EAAAC,EAAA,sBAAAoJ,IAAAtJ,EAAAC,EAAAC,EAAA,sBAAAuJ,IAAAzJ,EAAAC,EAAAC,EAAA,sBAAA0J,IAAA5J,EAAAC,EAAAC,EAAA,sBAAA6J,IAAO,IAAMX,EAAQ,QACRE,EAAS,SACTG,EAAW,WACXG,EAAM,MACNG,EAAc,4GCJpB,SAAS0gB,EAAW1vB,GAAuBqB,UAAAX,OAAA,QAAAY,IAAAD,UAAA,IAAAA,UAAA,GAChD,OAAO,aAYF,SAASsuB,IACdD,EAAW,SAAX9tB,WAAA,EAAAP,2CCTF,IAAMuuB,EAGA,WAMS,SAAeptB,EAA9Bd,EAAAqB,EAAAc,EAAAqF,GAAA,OAAA2mB,EAAAjuB,MAAAC,KAAAR,sDAAe,SAAAS,EAAqBuH,EAASC,EAAUC,EAAWC,GAAnD,IAAAsmB,EAAA7tB,EAAA8tB,EAAA,OAAA7tB,EAAAC,EAAAC,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAC,KAAA,EAEPwtB,EAFOlmB,OAAAgI,EAAA,EAAAhI,CAAA,CAGTomB,eAAgB,oBACb3mB,GAJMhH,EAAAE,KAAA,EAOU0tB,MAAML,EAAY,CACrCvmB,QAASymB,EACT7nB,KAAMhC,KAAKC,UAAU,CACnB1D,MAAO8G,EACPC,cAEF2mB,OAAQ,OACRC,KAAM,SAdG,YAOLluB,EAPKI,EAAAK,MAiBA0tB,GAjBA,CAAA/tB,EAAAE,KAAA,gBAAAF,EAAAE,KAAA,EAkBcN,EAAOouB,OAlBrB,UAkBLN,EAlBK1tB,EAAAK,OAoBTqtB,EACqB,kBAAZvmB,EACH1D,IAAIiqB,EAAYvmB,GAChBA,EAAQumB,MAEIA,EAAWtb,OAzBpB,CAAApS,EAAAE,KAAA,eA0BD,IAAIoH,IAASomB,EAAWtb,QA1BvB,eAAApS,EAAAO,OAAA,SA6BFmtB,GA7BE,cAgCL,IAAIpmB,IAAS1H,EAAOquB,YAAc,qBAhC7B,WAAAjuB,EAAAC,KAAA,GAAAD,EAAAmU,GAAAnU,EAAA,SAkCXstB,EAAQttB,EAAAmU,IAEW,aAAfnU,EAAAmU,GAAM/V,KApCC,CAAA4B,EAAAE,KAAA,eAAAF,EAAAmU,GAAA,cAwCL,IAAI7M,IAAS,qBAxCR,yBAAAtH,EAAAQ,SAAAf,EAAA,sJCdTyuB,EACJ,SAAAA,EAAY3qB,EAAO6O,GAAS7K,OAAA4mB,EAAA,EAAA5mB,CAAA/H,KAAA0uB,GAC1B1uB,KAAK+D,MAAQA,EACb/D,KAAK4S,OAASjF,MAAMsC,QAAQ2C,GAAUA,EAAS,CAACxO,KAAKC,UAAUuO,IAC/D5S,KAAKpB,KAAO,iBAIKkJ,cACnB,SAAAA,EAAY8K,GAAQ,IAAArJ,EAAA,OAAAxB,OAAA4mB,EAAA,EAAA5mB,CAAA/H,KAAA8H,IAClByB,EAAAxB,OAAA6mB,EAAA,EAAA7mB,CAAA/H,KAAA+H,OAAA8mB,EAAA,EAAA9mB,CAAAD,GAAA6B,KAAA3J,QACKpB,KAAO,WACZ2K,EAAKqJ,OAAS,GACVjF,MAAMsC,QAAQ2C,GAChBrJ,EAAKqJ,OAASA,EAAOpM,IACnB,SAAAsM,GAAK,OAAI,IAAI4b,EAAc5b,EAAM/O,MAAO+O,EAAMF,UAErB,kBAAXA,EAChBrJ,EAAKqJ,OAAO7D,KAAK,IAAI2f,EAAc9b,EAAO7O,MAAO6O,EAAOA,SAExDrJ,EAAKqJ,OAAO7D,KAAK,IAAI2f,EAAc,QAAS9b,IAX5BrJ,yCADgBqL,+ECLtC,IAYM1M,EAAQ4mB,YCNC,SAASC,IAA4B,IAApB3mB,EAAoB5I,UAAAX,OAAA,QAAAY,IAAAD,UAAA,GAAAA,UAAA,GAAZ,GAAIwvB,EAAQxvB,UAAAX,OAAA,EAAAW,UAAA,QAAAC,EAClD,OAAQuvB,EAAO7wB,MACb,KAAKqO,IACH,OAAOxI,IAAQirB,MAAM7mB,EAAO4mB,EAAO7qB,KAAM6qB,EAAO1vB,MAElD,KAAK0N,IACH,OAAOhJ,IAAQ8c,IAAI1Y,EAAO4mB,EAAO7qB,KAAM6qB,EAAO1vB,MAEhD,KAAKoN,IACH,OAAO1I,IAAQoZ,OAAOhV,EAAO4mB,EAAO7qB,MAEtC,KAAK0I,IACH,OAAOmiB,EAAOpiB,QAAQnI,OACpB,SAACC,EAAawqB,GAAd,OAAuBH,EAAQrqB,EAAawqB,GAAM,IAClD9mB,GAGJ,KAAK+E,IACH,MAAO,GAET,QACE,OAAO/E,ID3BG,GAed/J,OAAO8wB,8BAAgC9wB,OAAO8wB,gCAiBjCjnB","file":"static/js/main.14ed686e.chunk.js","sourcesContent":["import { blockFragment } from \"./block\";\r\n\r\nexport const userExistsQuery = `\r\n  query UserExistsQuery (email: String!) {\r\n    user {\r\n      userExists(email: $email) {\r\n        errors {\r\n          field\r\n          message\r\n        }\r\n        userExists\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const updateUserMutation = `\r\n  mutation UpdateUserMutation($data: UpdateUserInput!) {\r\n    user {\r\n      updateUser(user: $user) {\r\n        errors {\r\n          field\r\n          message\r\n        }\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const userLoginFragement = `\r\n  fragment userQueryResult on UserQueryResult {\r\n    errors {\r\n      field\r\n      message\r\n    }\r\n    user {\r\n      name\r\n      email\r\n      customId\r\n      createdAt\r\n      lastNotificationCheckTime\r\n    }\r\n    token\r\n  }\r\n`;\r\n\r\nexport const userSignupMutation = `\r\n  ${userLoginFragement}\r\n  mutation UserSignupMutation ($user: UserSignupInput!) {\r\n    user {\r\n      signup (user: $user) {\r\n        ...userQueryResult\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const userLoginMutation = `\r\n  ${userLoginFragement}\r\n  mutation UserLoginMutation ($email: String!, $password: String!) {\r\n    user {\r\n      login (email: $email, password: $password) {\r\n        ...userQueryResult\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const forgotPasswordMutation = `\r\n  mutation UserForgotPasswordMutation ($email: String!) {\r\n    user {\r\n      forgotPassword {\r\n        errors {\r\n          field\r\n          message\r\n        }\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const changePasswordMutation = `\r\n  ${userLoginFragement}\r\n  mutation UserChangePasswordMutation ($password: String!) {\r\n    user {\r\n      changePassword (password: $password) {\r\n        ...userQueryResult\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const changePasswordWithTokenMutation = `\r\n  ${userLoginFragement}\r\n  mutation UserChangeWithTokenPasswordMutation (\r\n    $password: String!\r\n  ) {\r\n    user {\r\n      changePasswordWithToken(password: $password) {\r\n        ...userQueryResult\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const getCollaborationRequestsQuery = `\r\n  query GetCollaborationRequestsQuery {\r\n    user {\r\n      getCollaborationRequests {\r\n        errors {\r\n          field\r\n          message\r\n        }\r\n        requests {\r\n          customId\r\n          from {\r\n            userId\r\n            name\r\n            blockId\r\n            blockName\r\n            blockType\r\n          }\r\n          createdAt\r\n          body\r\n          readAt\r\n          to {\r\n            email\r\n            userId\r\n          }\r\n          statusHistory {\r\n            status\r\n            date\r\n          }\r\n          sentEmailHistory {\r\n            date\r\n          }\r\n          type\r\n          root\r\n        }\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const getUserDataQuery = `\r\n  ${userLoginFragement}\r\n  query GetUserDataQuery {\r\n    user {\r\n      getUserData {\r\n        ...userQueryResult\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const updateCollaborationRequestMutation = `\r\n  mutation UpdateCollaborationRequestMutation (\r\n    $customId: String!, $data: UpdateCollaborationRequestInput!\r\n  ) {\r\n    user {\r\n      updateCollaborationRequest (customId: $customId, data: $data) {\r\n        errors {\r\n          field\r\n          message\r\n        }\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const respondToCollaborationRequestMutation = `\r\n  ${blockFragment}\r\n  mutation RespondToCollaborationRequestMutation (\r\n    $customId: String!, $response: String!\r\n  ) {\r\n    user {\r\n      respondToCollaborationRequest (customId: $customId, response: $response) {\r\n        errors {\r\n          field\r\n          message\r\n        }\r\n        block {\r\n          ...blockFragment\r\n        }\r\n      }\r\n    }\r\n  }\r\n`;\r\n","export function storageAvailable(type) {\r\n  try {\r\n    var storage = window[type],\r\n      x = \"__storage_test__\";\r\n    storage.setItem(x, x);\r\n    storage.removeItem(x);\r\n    return true;\r\n  } catch (e) {\r\n    return (\r\n      e instanceof DOMException &&\r\n      // everything except Firefox\r\n      (e.code === 22 ||\r\n        // Firefox\r\n        e.code === 1014 ||\r\n        // test name field too, because code might not be present\r\n        // everything except Firefox\r\n        e.name === \"QuotaExceededError\" ||\r\n        // Firefox\r\n        e.name === \"NS_ERROR_DOM_QUOTA_REACHED\") &&\r\n      // acknowledge QuotaExceededError only if there's something already stored\r\n      storage.length !== 0\r\n    );\r\n  }\r\n}\r\n\r\nexport let appLocalStorage = storageAvailable(\"localStorage\")\r\n  ? window.localStorage\r\n  : null;\r\nexport let appSessionStorage = storageAvailable(\"sessionStorage\")\r\n  ? window.sessionStorage\r\n  : null;\r\n\r\nfunction getStorageType(storageType) {\r\n  switch (storageType) {\r\n    case \"local\":\r\n    case \"localStorage\":\r\n      return appLocalStorage;\r\n\r\n    case \"session\":\r\n    case \"sessionStorage\":\r\n    default:\r\n      return appSessionStorage;\r\n  }\r\n}\r\n\r\nconst defaultStorageType = \"local\";\r\n\r\nexport function setItem(key, data, storageType = defaultStorageType) {\r\n  let storageObject = getStorageType(storageType);\r\n\r\n  if (storageObject) {\r\n    storageObject.setItem(key, data);\r\n  }\r\n}\r\n\r\nexport function removeItem(key, storageType = defaultStorageType) {\r\n  let storageObject = getStorageType(storageType);\r\n\r\n  if (storageObject) {\r\n    storageObject.removeItem(key);\r\n  }\r\n}\r\n\r\nexport function getItem(key, storageType = defaultStorageType) {\r\n  let storageObject = getStorageType(storageType);\r\n\r\n  if (storageObject) {\r\n    return storageObject.getItem(key);\r\n  }\r\n}\r\n","import {\r\n  userSignupMutation,\r\n  userLoginMutation,\r\n  updateUserMutation,\r\n  changePasswordMutation,\r\n  forgotPasswordMutation,\r\n  userExistsQuery,\r\n  updateCollaborationRequestMutation,\r\n  changePasswordWithTokenMutation,\r\n  respondToCollaborationRequestMutation,\r\n  getCollaborationRequestsQuery,\r\n  getUserDataQuery\r\n} from \"./schema/user\";\r\nimport query from \"./query\";\r\nimport auth from \"./auth\";\r\nimport { getDataFromObj } from \"../utils/object\";\r\nimport { setItem, getItem, removeItem } from \"../utils/storage\";\r\n\r\nconst tokenStorageName = \"t\";\r\nconst userStorageName = \"user\";\r\n\r\nexport async function signup(user) {\r\n  const userFields = [\"name\", \"password\", \"email\"];\r\n\r\n  let result = await query(\r\n    null,\r\n    userSignupMutation,\r\n    { user: getDataFromObj(user, userFields) },\r\n    \"data.user.signup\"\r\n  );\r\n\r\n  setItem(tokenStorageName, result.token, \"local\");\r\n\r\n  return result;\r\n}\r\n\r\nexport async function login(user) {\r\n  let result = await query(\r\n    null,\r\n    userLoginMutation,\r\n    { email: user.email, password: user.password },\r\n    \"data.user.login\"\r\n  );\r\n\r\n  console.log(result);\r\n  const prevToken = getItem(tokenStorageName);\r\n\r\n  if (user.remember || prevToken) {\r\n    setItem(tokenStorageName, result.token, \"local\");\r\n  }\r\n\r\n  return result;\r\n}\r\n\r\nexport function logout() {\r\n  removeItem(tokenStorageName, \"local\");\r\n}\r\n\r\nexport function updateUser(user) {\r\n  const updateUserFields = [\"name\", \"lastNotificationCheckTime\"];\r\n\r\n  return auth(\r\n    null,\r\n    updateUserMutation,\r\n    { user: getDataFromObj(user, updateUserFields) },\r\n    \"data.user.updateUser\"\r\n  );\r\n}\r\n\r\nexport async function changePassword(password) {\r\n  let result = await auth(\r\n    null,\r\n    changePasswordMutation,\r\n    { password },\r\n    \"data.user.changePassword\"\r\n  );\r\n\r\n  let prevToken = getItem(tokenStorageName);\r\n\r\n  if (prevToken) {\r\n    setItem(tokenStorageName, result.token, \"local\");\r\n  }\r\n\r\n  return result;\r\n}\r\n\r\nexport function forgotPassword(email) {\r\n  return query(\r\n    null,\r\n    forgotPasswordMutation,\r\n    { email },\r\n    \"data.user.forgotPassword\"\r\n  );\r\n}\r\n\r\nexport function userExists(email) {\r\n  return query(null, userExistsQuery, { email }, \"data.user.userExists\");\r\n}\r\n\r\nexport function updateCollaborationRequest(request, data) {\r\n  const updateRequestFields = [\"readAt\"];\r\n\r\n  return auth(\r\n    null,\r\n    updateCollaborationRequestMutation,\r\n    {\r\n      customId: request.customId,\r\n      data: getDataFromObj(data, updateRequestFields)\r\n    },\r\n    \"data.user.updateCollaborationRequest\"\r\n  );\r\n}\r\n\r\nexport function changePasswordWithToken(token) {\r\n  return query(\r\n    null,\r\n    changePasswordWithTokenMutation,\r\n    { password: token },\r\n    \"data.user.changePasswordWithToken\"\r\n  );\r\n}\r\n\r\nexport function respondToCollaborationRequest(request, response) {\r\n  return auth(\r\n    null,\r\n    respondToCollaborationRequestMutation,\r\n    { response, customId: request.customId },\r\n    \"data.user.respondToCollaborationRequest\"\r\n  );\r\n}\r\n\r\nexport function getCollaborationRequests() {\r\n  return auth(\r\n    null,\r\n    getCollaborationRequestsQuery,\r\n    {},\r\n    \"data.user.getCollaborationRequests\"\r\n  );\r\n}\r\n\r\nexport function getUserData(token) {\r\n  return auth(null, getUserDataQuery, {}, \"data.user.getUserData\", token);\r\n}\r\n\r\nexport async function getSavedUserData() {\r\n  let userToken = getItem(tokenStorageName);\r\n\r\n  if (userToken) {\r\n    let { user, token } = await getUserData(userToken);\r\n    setItem(tokenStorageName, token);\r\n    return { user, token };\r\n  }\r\n}\r\n","import dotProp from \"dot-prop-immutable\";\r\n\r\nexport function getDataFromObj(obj, dataArr, addEmpty) {\r\n  let result = {};\r\n\r\n  dataArr.forEach(field => {\r\n    let data = dotProp.get(obj, field);\r\n\r\n    if (data || addEmpty) {\r\n      result[field] = data;\r\n    }\r\n  });\r\n\r\n  return result;\r\n}\r\n\r\nfunction defaultIndexer(data, path) {\r\n  if (path) {\r\n    return dotProp.get(data, path);\r\n  }\r\n\r\n  return JSON.stringify(data);\r\n}\r\n\r\nexport function indexArray(arr = [], { path, indexer = defaultIndexer } = {}) {\r\n  let result = arr.reduce((accumulator, current) => {\r\n    accumulator[indexer(current, path, arr)] = current;\r\n    return accumulator;\r\n  }, {});\r\n\r\n  return result;\r\n}\r\n","import auth from \"./auth\";\r\nimport {\r\n  addBlockMutation,\r\n  updateBlockMutation,\r\n  deleteBlockMutation,\r\n  getBlockChildrenQuery,\r\n  addCollaboratorsMutation,\r\n  getCollabRequestsQuery,\r\n  getCollaboratorsQuery,\r\n  getRoleBlocksQuery,\r\n  removeCollaboratorMutation,\r\n  toggleTaskMutation,\r\n  revokeRequestMutation\r\n} from \"./schema/block\";\r\nimport { getDataFromObj } from \"../utils/object\";\r\n\r\nconst blockParamFields = [\"customId\"];\r\n\r\nexport function addBlock(block) {\r\n  const fields = [\r\n    \"name\",\r\n    \"customId\",\r\n    \"description\",\r\n    \"expectedEndAt\",\r\n    \"completedAt\",\r\n    \"color\",\r\n    \"type\",\r\n    \"parents\",\r\n    \"data\",\r\n    \"priority\",\r\n    \"taskCollaborators\"\r\n  ];\r\n  return auth(\r\n    null,\r\n    addBlockMutation,\r\n    { block: getDataFromObj(block, fields) },\r\n    \"data.block.addBlock\"\r\n  );\r\n}\r\n\r\nexport function updateBlock(block, data) {\r\n  const dataFields = [\r\n    \"name\",\r\n    \"description\",\r\n    \"expectedEndAt\",\r\n    \"completedAt\",\r\n    \"color\",\r\n    \"priority\",\r\n    \"data\",\r\n    \"taskCollaborators\"\r\n  ];\r\n\r\n  console.log(data, getDataFromObj(data, dataFields));\r\n\r\n  return auth(\r\n    null,\r\n    updateBlockMutation,\r\n    {\r\n      block: getDataFromObj(block, blockParamFields),\r\n      data: getDataFromObj(data, dataFields)\r\n    },\r\n    \"data.block.updateBlock\"\r\n  );\r\n}\r\n\r\nexport function deleteBlock(block) {\r\n  return auth(\r\n    null,\r\n    deleteBlockMutation,\r\n    { block: getDataFromObj(block, blockParamFields) },\r\n    \"data.block.deleteBlock\"\r\n  );\r\n}\r\n\r\nexport function getBlockChildren(block, types) {\r\n  return auth(\r\n    null,\r\n    getBlockChildrenQuery,\r\n    { types, block: getDataFromObj(block, blockParamFields) },\r\n    \"data.block.getBlockChildren\"\r\n  );\r\n}\r\n\r\nexport function addCollaborators(block, collaborators, body, expiresAt) {\r\n  const collaboratorFields = [\"email\", \"body\", \"expiresAt\", \"customId\"];\r\n  return auth(\r\n    null,\r\n    addCollaboratorsMutation,\r\n    {\r\n      body,\r\n      expiresAt,\r\n      block: getDataFromObj(block, blockParamFields),\r\n      collaborators: collaborators.map(c =>\r\n        getDataFromObj(c, collaboratorFields)\r\n      )\r\n    },\r\n    \"data.block.addCollaborators\"\r\n  );\r\n}\r\n\r\nexport function removeCollaborator(block, collaborator) {\r\n  return auth(\r\n    null,\r\n    removeCollaboratorMutation,\r\n    {\r\n      block: getDataFromObj(block, blockParamFields),\r\n      collaborator: collaborator.customId\r\n    },\r\n    \"data.block.removeCollaborator\"\r\n  );\r\n}\r\n\r\nexport function getCollaborators(block) {\r\n  return auth(\r\n    null,\r\n    getCollaboratorsQuery,\r\n    {\r\n      block: getDataFromObj(block, blockParamFields)\r\n    },\r\n    \"data.block.getCollaborators\"\r\n  );\r\n}\r\n\r\nexport function getCollabRequests(block) {\r\n  return auth(\r\n    null,\r\n    getCollabRequestsQuery,\r\n    {\r\n      block: getDataFromObj(block, blockParamFields)\r\n    },\r\n    \"data.block.getCollabRequests\"\r\n  );\r\n}\r\n\r\nexport function getRoleBlocks() {\r\n  return auth(null, getRoleBlocksQuery, {}, \"data.block.getRoleBlocks\");\r\n}\r\n\r\nexport function toggleTask(block, data) {\r\n  return auth(\r\n    null,\r\n    toggleTaskMutation,\r\n    {\r\n      data,\r\n      block: getDataFromObj(block, blockParamFields)\r\n    },\r\n    \"data.block.toggleTask\"\r\n  );\r\n}\r\n\r\nexport function revokeRequest(block, request) {\r\n  return auth(\r\n    null,\r\n    revokeRequestMutation,\r\n    {\r\n      request: request.customId,\r\n      block: getDataFromObj(block, blockParamFields)\r\n    },\r\n    \"data.block.revokeRequest\"\r\n  );\r\n}\r\n","const errorFragment = `\r\n  fragment errorFragment on Error {\r\n    field\r\n    message\r\n  }\r\n`;\r\n\r\nmodule.exports = {\r\n  errorFragment\r\n};\r\n","import store from \"../redux/store\";\r\nimport get from \"lodash/get\";\r\nimport query from \"./query\";\r\nimport NetError from \"./NetError\";\r\n\r\nlet user = null;\r\nstore.subscribe(() => {\r\n  const state = store.getState();\r\n  user = get(state, \"user\");\r\n});\r\n\r\nexport default async function queryWithAuth(\r\n  headers,\r\n  netQuery,\r\n  variables,\r\n  process,\r\n  token\r\n) {\r\n  const requestToken = (user && user.token) || token;\r\n\r\n  if (!requestToken) {\r\n    throw new NetError(\"error, please try again\");\r\n  }\r\n\r\n  return await query(\r\n    {\r\n      Authorization: `Bearer ${requestToken}`,\r\n      ...headers\r\n    },\r\n    netQuery,\r\n    variables,\r\n    process\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Redirect, Link } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\nimport \"./web.css\";\r\n\r\nfunction Web(props) {\r\n  const { user } = props;\r\n  if (user) {\r\n    return <Redirect to=\"/app\" />;\r\n  }\r\n\r\n  return (\r\n    <div className=\"web\">\r\n      <Link to=\"/signup\">Signup</Link>\r\n      <Link to=\"/login\">Login</Link>\r\n      {/* <Link to=\"/forgot-password\">Forgot Password</Link>\r\n      <Link to=\"/change-password\">Change Password</Link> */}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    user: state.user\r\n  };\r\n}\r\n\r\nexport default connect(mapStateToProps)(Web);\r\n","export function getWindowWidth() {\r\n  return (\r\n    window.innerWidth ||\r\n    document.body.clientWidth ||\r\n    document.documentElement.clientWidth\r\n  );\r\n}\r\n\r\nexport function getWindowHeight() {\r\n  return (\r\n    window.innerHeight ||\r\n    document.body.clientHeight ||\r\n    document.documentElement.clientHeight\r\n  );\r\n}\r\n","import React from \"react\";\r\n//import throttle from \"lodash/throttle\";\r\nimport { getWindowWidth } from \"../../utils/window\";\r\nimport { Menu, Drawer, Icon, Button } from \"antd\";\r\nimport \"./app-menu.css\";\r\n\r\nconst MenuItem = Menu.Item;\r\nconst appMenuDefaultProps = {\r\n  collapsed: true\r\n};\r\n\r\nclass AppMenu extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    /*this.updateWindowData();\r\n    this.updateWindowData = throttle(this.updateWindowData, 100, {\r\n      leading: true\r\n    });*/\r\n\r\n    this.state = {\r\n      collapsed: props.collapsed,\r\n      currentItemKey: props.currentItemKey\r\n    };\r\n  }\r\n\r\n  onToggleMenu = () => {\r\n    this.setState(prevState => ({ collapsed: !prevState.collapsed }));\r\n  };\r\n\r\n  onSelectMenu = event => {\r\n    const { onSelectMenu } = this.props;\r\n\r\n    this.setState(\r\n      {\r\n        currentItemKey: event.key,\r\n        collapsed: true\r\n      },\r\n      () => {\r\n        if (onSelectMenu) {\r\n          onSelectMenu(event.key);\r\n        }\r\n      }\r\n    );\r\n  };\r\n\r\n  /*componentDidMount() {\r\n    window.addEventListener(\"resize\", this.updateWindowData);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener(\"resize\", this.updateWindowData);\r\n  }\r\n\r\n  updateWindowData() {\r\n    const { windowType, updateWindowData } = this.props;\r\n    const tempWindowType = this.getWindowTypeFromWindow();\r\n    if (!windowType || windowType !== tempWindowType) {\r\n      updateWindowData({ windowType: tempWindowType });\r\n    }\r\n  }\r\n\r\n  getWindowTypeFromWindow() {\r\n    const { maxMobileWidth } = this.props;\r\n    if (getWindowWidth() > maxMobileWidth) {\r\n      return \"desktop\";\r\n    }\r\n\r\n    return \"mobile\";\r\n  }*/\r\n\r\n  render() {\r\n    const { menuItems } = this.props;\r\n    const { currentItemKey, collapsed } = this.state;\r\n    const currentItem = menuItems.find(item => item.key === currentItemKey);\r\n    const CurrentComponent = currentItem.component;\r\n    const windowWidth = getWindowWidth();\r\n    let menuDrawerWidth = windowWidth / (windowWidth < 300 ? 1 : 2);\r\n    // menuDrawerWidth = menuDrawerWidth < 300 ? windowWidth : menuDrawerWidth;\r\n\r\n    return (\r\n      <div style={{ height: \"100%\", display: \"flex\", flexDirection: \"column\" }}>\r\n        <Drawer\r\n          width={menuDrawerWidth}\r\n          onClose={this.onToggleMenu}\r\n          visible={!collapsed}\r\n          placement=\"left\"\r\n        >\r\n          <Menu\r\n            defaultSelectedKeys={[currentItemKey]}\r\n            onClick={this.onSelectMenu}\r\n            style={{ marginTop: \"2em\" }}\r\n          >\r\n            {menuItems.map(item => (\r\n              <MenuItem key={item.key}>\r\n                {item.icon && <Icon type={item.icon} theme={item.iconTheme} />}\r\n                <span>{item.label}</span>\r\n              </MenuItem>\r\n            ))}\r\n          </Menu>\r\n        </Drawer>\r\n        <div className=\"app-menu-header\">\r\n          <Button\r\n            icon={collapsed ? \"menu-unfold\" : \"menu-fold\"}\r\n            onClick={this.onToggleMenu}\r\n          />\r\n        </div>\r\n        <div className=\"app-menu-content\">\r\n          {CurrentComponent && <CurrentComponent {...currentItem.props} />}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nAppMenu.defaultProps = appMenuDefaultProps;\r\n\r\nexport default AppMenu;\r\n","export function assignTask(collaborator, by) {\r\n  return {\r\n    userId: collaborator.customId,\r\n    assignedAt: Date.now(),\r\n    assignedBy: by ? by.customId : null,\r\n    completedAt: null\r\n  };\r\n}\r\n\r\nexport const permittedChildrenTypes = {\r\n  root: [\"project\", \"group\", \"task\"],\r\n  org: [\"project\", \"group\", \"task\"],\r\n  project: [\"group\", \"task\"],\r\n  group: [\"project\", \"task\"],\r\n  task: []\r\n};\r\n","import {\r\n  MERGE,\r\n  DELETE,\r\n  MULTIPLE,\r\n  SET,\r\n  CLEAR_STATE\r\n} from \"../constants/reducer\";\r\n\r\nexport function makeMerge(path, data) {\r\n  return {\r\n    data,\r\n    path,\r\n    type: MERGE\r\n  };\r\n}\r\n\r\nexport function makeDelete(path) {\r\n  return {\r\n    path,\r\n    type: DELETE\r\n  };\r\n}\r\n\r\nexport function makeMultiple(actions) {\r\n  return {\r\n    actions,\r\n    type: MULTIPLE\r\n  };\r\n}\r\n\r\nexport function makeSet(path, data) {\r\n  return {\r\n    path,\r\n    data,\r\n    type: SET\r\n  };\r\n}\r\n\r\nexport function makeClearState() {\r\n  return {\r\n    type: CLEAR_STATE\r\n  };\r\n}\r\n","import {\r\n  makeMultiple,\r\n  makeMerge,\r\n  makeDelete,\r\n  makeSet,\r\n  makeClearState\r\n} from \"./make\";\r\n\r\nexport function updateId(data, newId, prevId) {\r\n  const action1 = makeDelete(data.path);\r\n  data.customId = newId;\r\n  let prevPath = data.path.split(\".\");\r\n  prevPath.pop();\r\n  prevPath.push(newId);\r\n  data.path = prevPath.join(\".\");\r\n  return makeMultiple([action1, makeMerge(data.path, data)]);\r\n}\r\n\r\nexport function mergeDataByPath(path, data) {\r\n  return makeMerge(path, data);\r\n}\r\n\r\nexport function deleteDataByPath(path) {\r\n  return makeDelete(path);\r\n}\r\n\r\nexport function setDataByPath(path, data) {\r\n  return makeSet(path, data);\r\n}\r\n\r\nexport function clearState() {\r\n  return makeClearState();\r\n}\r\n","import get from \"lodash/get\";\r\n\r\nlet netRoutes = null;\r\n// netRoutes = {\r\n//   block: require(\"./dev/block\"),\r\n//   user: require(\"./dev/user\")\r\n// };\r\n\r\nnetRoutes = {\r\n  block: require(\"./block\"),\r\n  user: require(\"./user\")\r\n};\r\n\r\nexport default async function netInterface(path, ...data) {\r\n  let route = get(netRoutes, path);\r\n  if (route) {\r\n    return await route(...data);\r\n  }\r\n\r\n  return null;\r\n}\r\n","import {\r\n  mergeDataByPath,\r\n  deleteDataByPath,\r\n  setDataByPath\r\n} from \"../../redux/actions/data\";\r\nimport netInterface from \"../../net/index\";\r\nimport randomColor from \"randomcolor\";\r\nimport { permittedChildrenTypes } from \"./block-utils\";\r\nimport { getCollaborationRequests } from \"../../net/user\";\r\n\r\nconst getId = require(\"uuid/v4\");\r\n// const getId = require(\"nanoid\");\r\n\r\nexport function makeBlockHandlers({ dispatch, user }) {\r\n  function prepareBlockFromEditData(block) {\r\n    if (block.expectedEndAt) {\r\n      block.expectedEndAt = block.expectedEndAt.valueOf();\r\n    }\r\n\r\n    return block;\r\n  }\r\n\r\n  return {\r\n    async onAdd(block, parent) {\r\n      block.createdAt = Date.now();\r\n      block.createdBy = user.customId;\r\n      block.customId = getId();\r\n      block.color = randomColor();\r\n\r\n      if (parent) {\r\n        block.path = `${parent.path}.${block.type}.${block.customId}`;\r\n        block.parents = [];\r\n        if (parent.parents) {\r\n          block.parents = block.parents.concat(parent.parents);\r\n        }\r\n\r\n        block.parents.push(parent.customId);\r\n      } else {\r\n        block.path = `${block.type}.${block.customId}`;\r\n      }\r\n\r\n      block = prepareBlockFromEditData(block);\r\n\r\n      if (block.type === \"org\") {\r\n        block.collaborators = [user];\r\n        block.path = `orgs.${block.customId}`;\r\n        dispatch(setDataByPath(\"user.user.orgs\", [block.customId]));\r\n      } else if (block.type === \"task\") {\r\n        if (!block.taskCollaborators) {\r\n          block.taskCollaborators = [];\r\n        }\r\n      }\r\n\r\n      if (permittedChildrenTypes[block.type]) {\r\n        permittedChildrenTypes[block.type].forEach(type => {\r\n          block[type] = {};\r\n        });\r\n      }\r\n\r\n      dispatch(setDataByPath(block.path, block));\r\n      netInterface(\"block.addBlock\", block);\r\n    },\r\n\r\n    onUpdate(block, data) {\r\n      data = prepareBlockFromEditData(data);\r\n      dispatch(mergeDataByPath(block.path, data));\r\n      netInterface(\"block.updateBlock\", block, data);\r\n    },\r\n\r\n    onToggle(block) {\r\n      const collaboratorIndex = block.taskCollaborators.findIndex(\r\n        c => c.userId === user.customId\r\n      );\r\n\r\n      const collaborator = block.taskCollaborators[collaboratorIndex];\r\n      const path = `${\r\n        block.path\r\n      }.taskCollaborators.${collaboratorIndex}.completedAt`;\r\n\r\n      dispatch(\r\n        setDataByPath(path, collaborator.completedAt ? null : Date.now())\r\n      );\r\n\r\n      netInterface(\"block.toggleTask\", block, true);\r\n    },\r\n\r\n    onDelete(block) {\r\n      dispatch(deleteDataByPath(block.path));\r\n      netInterface(\"block.deleteBlock\", block);\r\n    },\r\n\r\n    onAddCollaborators(block, { collaborators, message, expiresAt }) {\r\n      collaborators = collaborators.map(c => {\r\n        if (!c.message) {\r\n          c.message = message;\r\n        }\r\n\r\n        if (!c.expiresAt) {\r\n          c.expiresAt = expiresAt;\r\n        } else if (c.expiresAt.valueOf) {\r\n          c.expiresAt = c.expiresAt.valueOf();\r\n        }\r\n\r\n        c.customId = getId();\r\n        c.statusHistory = [{ status: \"pending\", date: Date.now() }];\r\n        return c;\r\n      });\r\n\r\n      dispatch(\r\n        mergeDataByPath(`${block.path}.collaborationRequests`, collaborators)\r\n      );\r\n\r\n      netInterface(\r\n        \"block.addCollaborators\",\r\n        block,\r\n        collaborators,\r\n        message,\r\n        expiresAt\r\n      );\r\n    },\r\n\r\n    onUpdateCollaborator(block, collaborator, data) {\r\n      collaborator = { ...collaborator, ...data };\r\n      let orgId =\r\n        Array.isArray(block.parents) && block.parents.length > 1\r\n          ? block.parents[0]\r\n          : block.customId;\r\n\r\n      dispatch(setDataByPath(`orgs.${orgId}.collaborators`));\r\n    },\r\n\r\n    async getBlockChildren(block) {\r\n      const { blocks } = await netInterface(\"block.getBlockChildren\", block);\r\n      let blockMappedToType = {};\r\n\r\n      if (permittedChildrenTypes[block.type]) {\r\n        permittedChildrenTypes[block.type].forEach(type => {\r\n          blockMappedToType[type] = {};\r\n        });\r\n      }\r\n\r\n      blocks.forEach(blk => {\r\n        blk.path = `${block.path}.${blk.type}.${blk.customId}`;\r\n        let typeMap = blockMappedToType[blk.type] || {};\r\n        typeMap[blk.customId] = blk;\r\n        blockMappedToType[blk.type] = typeMap;\r\n      });\r\n\r\n      dispatch(mergeDataByPath(block.path, blockMappedToType));\r\n    },\r\n\r\n    async getCollaborators(block) {\r\n      const { collaborators } = await netInterface(\r\n        \"block.getCollaborators\",\r\n        block\r\n      );\r\n\r\n      dispatch(mergeDataByPath(`${block.path}.collaborators`, collaborators));\r\n    },\r\n\r\n    async getCollaborationRequests(block) {\r\n      const { requests } = await netInterface(\"block.getCollabRequests\", block);\r\n      dispatch(\r\n        mergeDataByPath(`${block.path}.collaborationRequests`, requests)\r\n      );\r\n    }\r\n  };\r\n}\r\n","import React from \"react\";\r\nimport { Menu, Dropdown, Icon, Button } from \"antd\";\r\n\r\nconst MenuItem = Menu.Item;\r\n\r\nexport default function AddDropdownButton(props) {\r\n  const { types, onClick, label } = props;\r\n  const menu = (\r\n    <Menu onClick={event => onClick(event.key)}>\r\n      {types.map(type => {\r\n        type = typeof type === \"string\" ? { label: type } : type;\r\n        return (\r\n          <MenuItem key={type.label}>\r\n            {type.icon && <Icon type={type.icon} />}\r\n            {type.label}\r\n          </MenuItem>\r\n        );\r\n      })}\r\n    </Menu>\r\n  );\r\n\r\n  return (\r\n    <Dropdown overlay={menu} trigger={[\"click\"]}>\r\n      <Button icon=\"plus\">{label}</Button>\r\n    </Dropdown>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Row, Col, Button } from \"antd\";\r\nimport AddDropdownButton from \"../AddDropdownButton.jsx\";\r\nimport \"./group.css\";\r\nimport SimpleBar from \"simplebar-react\";\r\nimport { permittedChildrenTypes } from \"../../models/block/block-utils\";\r\n\r\nimport \"simplebar/dist/simplebar.min.css\";\r\n\r\nclass Group extends React.Component {\r\n  state = {\r\n    fetchingChildren: true\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.loadBlockData();\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    const { group } = this.props;\r\n\r\n    if (\r\n      group &&\r\n      prevProps.group &&\r\n      group.customId !== prevProps.group.customId\r\n    ) {\r\n      this.loadBlockData();\r\n    } else {\r\n      this.updateFetchingState();\r\n    }\r\n  }\r\n\r\n  updateFetchingState() {\r\n    const { fetchingChildren } = this.state;\r\n    let newState = {};\r\n\r\n    if (this.areBlockChildrenLoaded() && fetchingChildren) {\r\n      newState.fetchingChildren = false;\r\n    }\r\n\r\n    if (Object.keys(newState).length > 0) {\r\n      this.setState(newState);\r\n    }\r\n  }\r\n\r\n  loadBlockData() {\r\n    const { fetchingChildren } = this.state;\r\n    let newState = {};\r\n\r\n    if (!this.areBlockChildrenLoaded()) {\r\n      this.fetchChildren();\r\n    } else if (fetchingChildren) {\r\n      newState.fetchingChildren = false;\r\n    }\r\n\r\n    if (Object.keys(newState).length > 0) {\r\n      this.setState(newState);\r\n    }\r\n  }\r\n\r\n  areBlockChildrenLoaded() {\r\n    const { group } = this.props;\r\n\r\n    if (!group) {\r\n      return true;\r\n    }\r\n\r\n    if (permittedChildrenTypes[group.type]) {\r\n      const typeNotLoaded = permittedChildrenTypes[group.type].find(type => {\r\n        if (!group[type]) {\r\n          return true;\r\n        }\r\n      });\r\n\r\n      if (typeNotLoaded) {\r\n        return false;\r\n      }\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  async fetchChildren() {\r\n    const { group, blockHandlers } = this.props;\r\n    await blockHandlers.getBlockChildren(group);\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      group,\r\n      children,\r\n      blockHandlers,\r\n      onClickAddChild,\r\n      name,\r\n      onEdit\r\n    } = this.props;\r\n    const { fetchingChildren } = this.state;\r\n\r\n    const childrenTypes = group ? permittedChildrenTypes[group.type] : null;\r\n\r\n    return (\r\n      <div className=\"sk-group\">\r\n        <Row className=\"sk-group-head\">\r\n          <Col span={12} style={{ minHeight: \"32px\" }}>\r\n            <span style={{ fontWeight: \"bold\" }}>\r\n              {group ? group.name : name}\r\n            </span>\r\n          </Col>\r\n          {group ? (\r\n            <Col span={12} style={{ textAlign: \"right\" }}>\r\n              {childrenTypes && childrenTypes.length > 0 && (\r\n                <AddDropdownButton\r\n                  types={childrenTypes}\r\n                  onClick={type => onClickAddChild(type, group)}\r\n                />\r\n              )}\r\n              <Button\r\n                icon=\"edit\"\r\n                onClick={() => onEdit(group)}\r\n                style={{ marginLeft: \"2px\" }}\r\n              />\r\n              <Button\r\n                icon=\"delete\"\r\n                type=\"danger\"\r\n                onClick={() => blockHandlers.onDelete(group)}\r\n                style={{ marginLeft: \"2px\" }}\r\n              />\r\n            </Col>\r\n          ) : null}\r\n        </Row>\r\n        {fetchingChildren ? (\r\n          \"Loading\"\r\n        ) : (\r\n          <SimpleBar className=\"sk-group-children\">{children}</SimpleBar>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Group;\r\n","export function makeSubmitHandler(form, onSubmit, onError) {\r\n  return function(event) {\r\n    if (event) {\r\n      event.preventDefault();\r\n    }\r\n\r\n    form.validateFieldsAndScroll(async (errors, data) => {\r\n      if (!errors) {\r\n        try {\r\n          await onSubmit(data);\r\n        } catch (thrownError) {\r\n          if (onError) {\r\n            onError(thrownError);\r\n          } else {\r\n            applyErrors(form, thrownError);\r\n          }\r\n\r\n          if (process.env.NODE_ENV === \"development\") {\r\n            console.error(thrownError);\r\n          }\r\n        }\r\n      }\r\n    });\r\n  };\r\n}\r\n\r\nexport function applyErrors(form, errors) {\r\n  let formValuesObj = {};\r\n  if (Array.isArray(errors)) {\r\n    errors.forEach(error => {\r\n      formValuesObj[error.fieldName] = {\r\n        value: error.value || form.getFieldsValue(error.fieldName),\r\n        errors: error.errors\r\n      };\r\n    });\r\n\r\n    form.setFields(formValuesObj);\r\n  } else if (typeof errors === \"object\") {\r\n    Object.keys(errors).forEach(fieldName => {\r\n      let error = errors[fieldName];\r\n      if (!error.value) {\r\n        error.value = form.getFieldsValue(fieldName);\r\n      }\r\n    });\r\n\r\n    form.setFields(errors);\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport { Form } from \"antd\";\r\nimport { applyErrors } from \"./form-utils\";\r\nimport PropTypes from \"prop-types\";\r\nimport withSpinner from \"./withSpinner.jsx\";\r\n\r\nconst formWrapperPropTypes = {\r\n  onSubmit: PropTypes.func.isRequired,\r\n  form: PropTypes.object.isRequired,\r\n  title: PropTypes.node,\r\n  errors: PropTypes.oneOfType([\r\n    PropTypes.arrayOf(\r\n      PropTypes.shape({\r\n        fieldName: PropTypes.string,\r\n        value: PropTypes.any,\r\n        errors: PropTypes.oneOfType([\r\n          PropTypes.string,\r\n          PropTypes.instanceOf(Error),\r\n          PropTypes.arrayOf(\r\n            PropTypes.oneOfType([PropTypes.string, PropTypes.instanceOf(Error)])\r\n          )\r\n        ])\r\n      })\r\n    ),\r\n    PropTypes.shape({\r\n      fieldName: PropTypes.string,\r\n      value: PropTypes.any,\r\n      errors: PropTypes.oneOfType([\r\n        PropTypes.string,\r\n        PropTypes.instanceOf(Error),\r\n        PropTypes.arrayOf(\r\n          PropTypes.oneOfType([PropTypes.string, PropTypes.instanceOf(Error)])\r\n        )\r\n      ])\r\n    })\r\n  ]),\r\n  children: PropTypes.any,\r\n  // formError: PropTypes.node,\r\n  formProps: PropTypes.object\r\n};\r\n\r\nclass FormWrapper extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      stateError: null\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.applyFieldErrors();\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    this.applyFieldErrors();\r\n  }\r\n\r\n  handleSubmit = event => {\r\n    const { form, onSubmit, toggleSpinning } = this.props;\r\n    if (event) {\r\n      event.preventDefault();\r\n    }\r\n\r\n    form.validateFieldsAndScroll(async (errors, data) => {\r\n      if (!errors) {\r\n        try {\r\n          if (toggleSpinning) {\r\n            toggleSpinning();\r\n          }\r\n\r\n          await onSubmit(data);\r\n        } catch (thrownError) {\r\n          if (thrownError instanceof Error) {\r\n            this.setState({\r\n              stateError: thrownError.message\r\n            });\r\n          } else {\r\n            applyErrors(form, thrownError);\r\n          }\r\n\r\n          if (process.env.NODE_ENV === \"development\") {\r\n            console.error(thrownError);\r\n          }\r\n        } finally {\r\n          if (toggleSpinning) {\r\n            toggleSpinning();\r\n          }\r\n        }\r\n      }\r\n    });\r\n  };\r\n\r\n  applyFieldErrors() {\r\n    const { form, errors } = this.props;\r\n    if (errors) {\r\n      applyErrors(form, errors);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { title, children, formProps } = this.props;\r\n    const { stateError } = this.state;\r\n\r\n    return (\r\n      <Form {...formProps} onSubmit={this.handleSubmit}>\r\n        {title && <Form.Item>{title}</Form.Item>}\r\n        {stateError && (\r\n          <Form.Item style={{ color: \"red\" }}>\r\n            {typeof stateError === \"string\" ? (\r\n              <h3 style={{ color: \"red\", lineHeight: \"1.25em\" }}>\r\n                {stateError}\r\n              </h3>\r\n            ) : (\r\n              stateError\r\n            )}\r\n          </Form.Item>\r\n        )}\r\n        {children}\r\n      </Form>\r\n    );\r\n  }\r\n}\r\n\r\nFormWrapper.propTypes = formWrapperPropTypes;\r\n\r\nexport default withSpinner(FormWrapper);\r\n","import React from \"react\";\r\nimport { Spin, Icon } from \"antd\";\r\n\r\nexport default function withSpinner(component) {\r\n  const Component = component;\r\n  const displayName = `withSpinner(${component.displayName ||\r\n    component.name ||\r\n    \"Component\"})`;\r\n\r\n  class WithSpinner extends React.Component {\r\n    visible = null;\r\n    state = {\r\n      spinning: false\r\n    };\r\n\r\n    componentDidMount() {\r\n      this.visible = true;\r\n    }\r\n\r\n    componentDidUpdate() {\r\n      this.visible = true;\r\n    }\r\n\r\n    componentWillUnmount() {\r\n      this.visible = false;\r\n    }\r\n\r\n    toggleSpinning = () => {\r\n      if (this.visible) {\r\n        this.setState(state => {\r\n          return {\r\n            spinning: !state.spinning\r\n          };\r\n        });\r\n      }\r\n    };\r\n\r\n    render() {\r\n      const { spinning } = this.state;\r\n      const { forwardedRef } = this.props;\r\n\r\n      return (\r\n        <Spin\r\n          spinning={spinning}\r\n          indicator={<Icon type=\"loading\" style={{ fontSize: \"2em\" }} />}\r\n        >\r\n          <Component\r\n            {...this.props}\r\n            toggleSpinning={this.toggleSpinning}\r\n            ref={forwardedRef}\r\n          />\r\n        </Spin>\r\n      );\r\n    }\r\n  }\r\n\r\n  function forwardRef(props, ref) {\r\n    return <WithSpinner {...props} forwardedRef={ref} ref={props.spinnerRef} />;\r\n  }\r\n\r\n  WithSpinner.displayName = displayName;\r\n  forwardRef.displayName = displayName;\r\n  return React.forwardRef(forwardRef);\r\n}\r\n","import React from \"react\";\r\nimport { Form } from \"antd\";\r\nimport get from \"lodash/get\";\r\nimport FormWrapper from \"../FormWrapper\";\r\n\r\nconst FormItem = Form.Item;\r\n\r\nclass ComputeForm extends React.Component {\r\n  static defaultProps = {\r\n    data: {}\r\n  };\r\n\r\n  onSubmit = async data => {\r\n    const { form, model } = this.props;\r\n\r\n    if (model.onSubmit) {\r\n      return model.onSubmit(data, form);\r\n    }\r\n  };\r\n\r\n  renderField(field, key, form, data) {\r\n    if (field.render) {\r\n      return field.render(form, data, key, field);\r\n    } else if (field.component) {\r\n      const FieldComponent = field.component;\r\n      const renderedFieldComponent = <FieldComponent {...field.props} />;\r\n      return (\r\n        <FormItem\r\n          key={key}\r\n          label={field.label}\r\n          labelCol={field.labelCol}\r\n          wrapperCol={field.wrapperCol}\r\n          extra={field.extra}\r\n          hasFeedback={field.hasFeedback}\r\n        >\r\n          {field.noDecorate\r\n            ? renderedFieldComponent\r\n            : form.getFieldDecorator(key, {\r\n                rules: field.rules,\r\n                validateFirst: true,\r\n                initialValue: field.getValue\r\n                  ? field.getValue(data, key, field)\r\n                  : get(data, key) || field.initialValue,\r\n                valuePropName: field.valuePropName || \"value\"\r\n              })(renderedFieldComponent)}\r\n        </FormItem>\r\n      );\r\n    }\r\n  }\r\n\r\n  renderFields() {\r\n    const { form, model, data } = this.props;\r\n    let computedForm = [];\r\n    for (const key in model.fields) {\r\n      const field = model.fields[key];\r\n      computedForm.push(this.renderField(field, key, form, data));\r\n    }\r\n\r\n    return computedForm;\r\n  }\r\n\r\n  render() {\r\n    const { children, form } = this.props;\r\n\r\n    return (\r\n      <FormWrapper form={form} onSubmit={this.onSubmit}>\r\n        {this.renderFields()}\r\n        {children}\r\n      </FormWrapper>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ComputeForm;\r\n","export function makeDescriptorFieldsRequired(descriptor, fields = []) {\r\n  descriptor = { ...descriptor };\r\n  fields.forEach(field => {\r\n    let rule = descriptor[field];\r\n\r\n    if (rule) {\r\n      let replaceRule = [{ required: true, message: `${field} is required` }];\r\n\r\n      if (Array.isArray(rule)) {\r\n        replaceRule = replaceRule.concat(rule);\r\n      } else {\r\n        replaceRule.push(rule);\r\n      }\r\n\r\n      descriptor[field] = replaceRule;\r\n    }\r\n  });\r\n\r\n  return descriptor;\r\n}\r\n\r\nexport function makeConfirmValidator(\r\n  field0,\r\n  field1,\r\n  form,\r\n  msg = \"values do not match\"\r\n) {\r\n  return function validatePassword(rule, value, cb, source) {\r\n    const value0 = form.getFieldValue(field0);\r\n    const value1 = form.getFieldValue(field1);\r\n    let fieldToUpdate = null;\r\n    let fieldValue = null;\r\n    let error = null;\r\n\r\n    if (value0 && value1 && value0 === value1) {\r\n      cb();\r\n    } else {\r\n      cb(msg);\r\n      error = msg;\r\n    }\r\n\r\n    if (rule.field === field0) {\r\n      fieldToUpdate = field1;\r\n      fieldValue = value1;\r\n    } else {\r\n      fieldToUpdate = field0;\r\n      fieldValue = value0;\r\n    }\r\n\r\n    form.setFields({ [fieldToUpdate]: { error, value: fieldValue } });\r\n  };\r\n}\r\n\r\nexport function makeNameExistsValidator(\r\n  existingNames,\r\n  msg = \"name already exist\"\r\n) {\r\n  return function validatePassword(rule, value, cb, source) {\r\n    value = value.toLowerCase();\r\n    if (existingNames.find(name => nameExists(name))) {\r\n      cb(msg);\r\n    }\r\n\r\n    cb();\r\n\r\n    function nameExists(name) {\r\n      return name.toLowerCase() === value.toLowerCase();\r\n    }\r\n  };\r\n}\r\n\r\nexport function promisifyAsyncValidator(v) {\r\n  return function(data) {\r\n    return new Promise(function(success, reject) {\r\n      v(data, function(errors, fields) {\r\n        if (errors) {\r\n          reject({ errors, fields });\r\n        } else {\r\n          success(fields);\r\n        }\r\n      });\r\n    });\r\n  };\r\n}\r\n","import { makeDescriptorFieldsRequired } from \"../../utils/descriptor\";\r\nimport trim from \"../../utils/trim\";\r\n\r\nconst textPattern = {\r\n  pattern: /\\w+/,\r\n  message: \"only alphanumeric characters allowed\"\r\n};\r\n\r\nexport const blockDescriptor = {\r\n  name: [\r\n    {\r\n      type: \"string\",\r\n      max: 50,\r\n      transform: trim\r\n    },\r\n    textPattern\r\n  ],\r\n  description: [\r\n    {\r\n      type: \"string\",\r\n      max: 250\r\n    },\r\n    {\r\n      pattern: /[\\w\\s]+/,\r\n      message: \"only alphanumeric characters allowed\"\r\n    }\r\n  ],\r\n  expectedEndAt: [\r\n    {\r\n      type: \"number\"\r\n    }\r\n  ],\r\n  completedAt: [\r\n    {\r\n      type: \"number\"\r\n    }\r\n  ]\r\n};\r\n\r\nconst requiredTaskFields = [\"description\"];\r\nexport const taskDescriptor = makeDescriptorFieldsRequired(\r\n  blockDescriptor,\r\n  requiredTaskFields\r\n);\r\n\r\nconst requiredGroupFields = [\"name\"];\r\nexport const groupDescriptor = makeDescriptorFieldsRequired(\r\n  blockDescriptor,\r\n  requiredGroupFields\r\n);\r\n\r\nconst requiredProjectFields = [\"name\"];\r\nexport const projectDescriptor = makeDescriptorFieldsRequired(\r\n  blockDescriptor,\r\n  requiredProjectFields\r\n);\r\n\r\nconst requiredOrgFields = [\"name\"];\r\n\r\nexport const orgDescriptor = makeDescriptorFieldsRequired(\r\n  blockDescriptor,\r\n  requiredOrgFields\r\n);\r\n","export default function trim(value) {\r\n  if (value && value.trim) {\r\n    return value.trim();\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport { Drawer } from \"antd\";\r\nimport { getWindowWidth } from \"../utils/window\";\r\nimport throttle from \"lodash/throttle\";\r\n\r\nexport default function modalWrap(component, defaultTitle) {\r\n  class ModalWrappedComponent extends React.Component {\r\n    constructor(props) {\r\n      super(props);\r\n      this.updateWindowData();\r\n      this.updateWindowData = throttle(this.updateWindowData, 300);\r\n\r\n      this.state = {\r\n        currentDeviceWidth: getWindowWidth()\r\n      };\r\n    }\r\n\r\n    componentDidMount() {\r\n      window.addEventListener(\"resize\", this.updateWindowData);\r\n      this.modalIsMounted = true;\r\n    }\r\n\r\n    componentWillUnmount() {\r\n      window.removeEventListener(\"resize\", this.updateWindowData);\r\n      this.modalIsMounted = false;\r\n    }\r\n\r\n    updateWindowData = () => {\r\n      if (this.modalIsMounted) {\r\n        this.setState({ currentDeviceWidth: getWindowWidth() });\r\n      }\r\n    };\r\n\r\n    render() {\r\n      const WrappedComponent = component;\r\n      const { visible, onClose, title } = this.props;\r\n      const { currentDeviceWidth } = this.state;\r\n      // const windowWidth = getWindowWidth();\r\n      const windowWidth = currentDeviceWidth;\r\n      const divider = windowWidth <= 500 ? 1 : windowWidth <= 700 ? 3 / 2 : 2;\r\n      // : windowWidth <= 1020\r\n      // ? 2\r\n      // : 3;\r\n      let drawerWidth = windowWidth / divider;\r\n\r\n      if (!visible) {\r\n        return null;\r\n      }\r\n\r\n      return (\r\n        <Drawer\r\n          visible={visible}\r\n          onClose={onClose}\r\n          width={drawerWidth}\r\n          title={title || defaultTitle}\r\n        >\r\n          <WrappedComponent {...this.props} />\r\n        </Drawer>\r\n      );\r\n    }\r\n  }\r\n\r\n  ModalWrappedComponent.displayName = `modalWrap(${component.displayName ||\r\n    component.name ||\r\n    \"Component\"})`;\r\n\r\n  return ModalWrappedComponent;\r\n}\r\n","import React from \"react\";\r\nimport ComputeForm from \"../compute-form/ComputeForm.jsx\";\r\nimport { Input, Button, Form } from \"antd\";\r\nimport { groupDescriptor as blockDescriptor } from \"../../models/block/descriptor\";\r\nimport { makeNameExistsValidator } from \"../../utils/descriptor\";\r\nimport modalWrap from \"../modalWrap.jsx\";\r\n\r\nconst TextArea = Input.TextArea;\r\n\r\nclass EditGroup extends React.Component {\r\n  static defaultProps = {\r\n    data: {}\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    const data = props.data || {};\r\n    const self = this;\r\n    this.model = {\r\n      fields: {\r\n        name: {\r\n          component: Input,\r\n          props: { autoComplete: \"off\" },\r\n          label: \"Name\",\r\n          labelCol: null,\r\n          wrapperCol: null,\r\n          rules: [\r\n            ...blockDescriptor.name,\r\n            {\r\n              validator: makeNameExistsValidator(\r\n                props.existingGroups,\r\n                \"group exists\"\r\n              )\r\n            }\r\n          ],\r\n          initialValue: data.name\r\n        },\r\n        description: {\r\n          component: TextArea,\r\n          props: { autosize: { minRows: 2, maxRows: 6 } },\r\n          label: \"Description\",\r\n          labelCol: null,\r\n          wrapperCol: null,\r\n          rules: blockDescriptor.description,\r\n          initialValue: data.description\r\n        },\r\n        submit: {\r\n          component: Button,\r\n          props: {\r\n            type: \"primary\",\r\n            children: \"Submit\",\r\n            block: true,\r\n            htmlType: \"submit\"\r\n          },\r\n          labelCol: null,\r\n          wrapperCol: null,\r\n          noDecorate: true\r\n        }\r\n      },\r\n      formProps: {\r\n        hideRequiredMark: true\r\n      },\r\n      onSubmit: self.onSubmit\r\n    };\r\n  }\r\n\r\n  onSubmit = data => {\r\n    data.type = \"group\";\r\n    return this.props.onSubmit(data);\r\n  };\r\n\r\n  render() {\r\n    return <ComputeForm model={this.model} form={this.props.form} />;\r\n  }\r\n}\r\n\r\nexport default modalWrap(Form.create()(EditGroup), \"Group\");\r\n","import React from \"react\";\r\nimport \"./priority.css\";\r\n\r\nexport const priorityToColorMap = {\r\n  \"not important\": \"#EACA2C\",\r\n  important: \"#7ED321\",\r\n  \"very important\": \"#EB5424\"\r\n};\r\n\r\nexport default function Priority(props) {\r\n  const { level, cover } = props;\r\n  const style = {\r\n    [cover ? \"backgroundColor\" : \"color\"]: priorityToColorMap[level]\r\n  };\r\n\r\n  return (\r\n    <span className=\"sk-priority\" style={style}>\r\n      {level}\r\n    </span>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Dropdown, Menu } from \"antd\";\r\nimport Priority, { priorityToColorMap } from \"./Priority.jsx\";\r\n\r\nexport default class EditPriority extends React.Component {\r\n  render() {\r\n    const { value, onChange } = this.props;\r\n    const menu = (\r\n      <Menu onClick={({ key }) => onChange(key)}>\r\n        <Menu.Item key=\"not important\">\r\n          <Priority level=\"not important\" cover />\r\n        </Menu.Item>\r\n        <Menu.Item key=\"important\">\r\n          <Priority level=\"important\" cover />\r\n        </Menu.Item>\r\n        <Menu.Item key=\"very important\">\r\n          <Priority level=\"very important\" cover />\r\n        </Menu.Item>\r\n      </Menu>\r\n    );\r\n\r\n    return (\r\n      <Dropdown overlay={menu} trigger={[\"click\"]}>\r\n        <span\r\n          className=\"sk-priority\"\r\n          style={{\r\n            backgroundColor: priorityToColorMap[value],\r\n            cursor: \"pointer\"\r\n          }}\r\n        >\r\n          {value}\r\n        </span>\r\n      </Dropdown>\r\n    );\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport { Row, Col } from \"antd\";\r\nimport \"./thumbnail.css\";\r\n\r\nexport default function Thumbnail(props) {\r\n  const {\r\n    data,\r\n    renderInfo,\r\n    onClick,\r\n    className,\r\n    style,\r\n    colorStyle,\r\n    colorClassName,\r\n    colorSpan,\r\n    hoverable\r\n  } = props;\r\n  const cSpan = colorSpan;\r\n  const hov = typeof hoverable !== \"boolean\" ? true : hoverable;\r\n\r\n  return (\r\n    <div\r\n      className={\r\n        \"sk-thumbnail \" +\r\n        (hov ? \"sk-thumbnail-hoverable \" : \"\") +\r\n        (className || \"\")\r\n      }\r\n      style={style}\r\n      onClick={onClick}\r\n    >\r\n      <Row gutter={16} style={{ height: \"100%\" }}>\r\n        <Col span={cSpan} style={{ height: \"100%\" }}>\r\n          <span\r\n            style={{ backgroundColor: data.color, ...colorStyle }}\r\n            className={\"sk-thumbnail-color \" + colorClassName}\r\n          />\r\n        </Col>\r\n        <Col span={24 - cSpan} style={{ height: \"100%\" }}>\r\n          {renderInfo(data, props)}\r\n        </Col>\r\n      </Row>\r\n    </div>\r\n  );\r\n}\r\n\r\nThumbnail.defaultProps = {\r\n  className: \"\",\r\n  colorSpan: 8,\r\n  colorClassName: \"\"\r\n};\r\n","import React from \"react\";\r\nimport { Row, Col, Switch, Button } from \"antd\";\r\nimport Thumbnail from \"../thumbnail/Thumbnail.jsx\";\r\n\r\nexport default class TaskCollaborator extends React.Component {\r\n  render() {\r\n    const { collaborator, collaboratorTaskData, onUnassign } = this.props;\r\n\r\n    return (\r\n      <Thumbnail\r\n        data={collaborator}\r\n        colorSpan={4}\r\n        renderInfo={() => {\r\n          return (\r\n            <Row>\r\n              <Col span={14}>{collaborator.name}</Col>\r\n              <Col span={10} style={{ textAlign: \"right\" }}>\r\n                <Switch\r\n                  disabled={true}\r\n                  checked={collaboratorTaskData.data}\r\n                  onChange={null}\r\n                  style={{ marginRight: \"16px\" }}\r\n                />\r\n                <Button type=\"danger\" icon=\"close\" onClick={onUnassign} />\r\n              </Col>\r\n            </Row>\r\n          );\r\n        }}\r\n        style={{\r\n          height: \"60px\",\r\n          padding: \"4px\",\r\n          cursor: \"inherit\"\r\n        }}\r\n        hoverable={false}\r\n      />\r\n    );\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport Thumbnail from \"../thumbnail/Thumbnail.jsx\";\r\nimport moment from \"moment\";\r\n\r\nexport default class CollaboratorThumbnail extends React.Component {\r\n  getLatestStatus(statusHistory = []) {\r\n    return statusHistory[statusHistory.length - 1];\r\n  }\r\n\r\n  render() {\r\n    const { collaborator, style, onClick } = this.props;\r\n    let headerValue = collaborator.name || collaborator.email;\r\n    let latestStatus = this.getLatestStatus(collaborator.statusHistory);\r\n\r\n    return (\r\n      <Thumbnail\r\n        data={collaborator}\r\n        onClick={onClick}\r\n        renderInfo={() => {\r\n          return (\r\n            <React.Fragment>\r\n              <h5>{headerValue}</h5>\r\n              {collaborator.name && (\r\n                <span className=\"sk-gl-thumbnail-text\">\r\n                  {collaborator.email}\r\n                </span>\r\n              )}\r\n              {collaborator.expiresAt && (\r\n                <span className=\"sk-gl-thumbnail-text\">\r\n                  expires {moment(collaborator.expiresAt).fromNow()}\r\n                </span>\r\n              )}\r\n              {latestStatus && (\r\n                <span className=\"sk-gl-thumbnail-text\">\r\n                  {latestStatus.status}\r\n                </span>\r\n              )}\r\n            </React.Fragment>\r\n          );\r\n        }}\r\n        style={{\r\n          padding: \"4px\",\r\n          maxWidth: \"300px\",\r\n          height: \"80px\",\r\n          ...style\r\n        }}\r\n        colorSpan={collaborator.color ? 4 : 0}\r\n        hoverable={!!onClick}\r\n      />\r\n    );\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport TaskCollaborator from \"./TaskCollaborator.jsx\";\r\nimport { Form, Select } from \"antd\";\r\nimport dotProp from \"dot-prop-immutable\";\r\nimport CollaboratorThumbnail from \"../collaborator/Thumnail.jsx\";\r\n\r\nexport default class AssignTask extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.existingTaskCollaboratorsIdMap = {};\r\n    this.collaboratorsIdMap = {};\r\n    const defaultTaskCollaborators = props.defaultTaskCollaborators || [];\r\n    defaultTaskCollaborators.forEach(c => {\r\n      this.existingTaskCollaboratorsIdMap[c.userId] = c;\r\n    });\r\n\r\n    const collaborators = props.collaborators || [];\r\n    collaborators.forEach(c => {\r\n      this.collaboratorsIdMap[c.customId] = c;\r\n    });\r\n\r\n    this.error = null;\r\n  }\r\n\r\n  onAddCollaborator = collaborator => {\r\n    const { form, user } = this.props;\r\n    if (this.existingTaskCollaboratorsIdMap[collaborator.customId]) {\r\n      this.error = \"collaborator is already assigned\";\r\n      return;\r\n    }\r\n\r\n    let collaborators = form.getFieldValue(\"taskCollaborators\");\r\n    collaborators.push({\r\n      userId: collaborator.customId,\r\n      assignedAt: Date.now(),\r\n      completedAt: 0,\r\n      assignedBy: user.customId\r\n    });\r\n\r\n    this.error = null;\r\n    this.existingTaskCollaboratorsIdMap[collaborator.customId] = collaborator;\r\n    form.setFieldsValue({ taskCollaborators: collaborators });\r\n  };\r\n\r\n  onUnassignCollaborator = (collaborator, index) => {\r\n    const { form } = this.props;\r\n\r\n    if (!this.existingTaskCollaboratorsIdMap[collaborator.userId]) {\r\n      this.error = \"collaborator is not assigned\";\r\n      return;\r\n    }\r\n\r\n    let collaborators = form.getFieldValue(\"taskCollaborators\");\r\n    collaborators = dotProp.delete(collaborators, `${index}`);\r\n    this.error = null;\r\n    delete this.existingTaskCollaboratorsIdMap[collaborator.userId];\r\n    form.setFieldsValue({ taskCollaborators: collaborators });\r\n  };\r\n\r\n  renderSelectCollaborators(collaborators) {\r\n    let options = [];\r\n\r\n    collaborators.forEach((c, index) => {\r\n      if (!this.existingTaskCollaboratorsIdMap[c.customId]) {\r\n        options.push(\r\n          <Select.Option value={index} key={c.customId}>\r\n            <CollaboratorThumbnail collaborator={c} />\r\n          </Select.Option>\r\n        );\r\n      }\r\n    });\r\n\r\n    return options.length > 0 ? (\r\n      <Form.Item>\r\n        <Select\r\n          placeholder=\"Assign collaborator\"\r\n          onChange={i => {\r\n            this.onAddCollaborator(collaborators[i]);\r\n          }}\r\n        >\r\n          {options}\r\n        </Select>\r\n      </Form.Item>\r\n    ) : null;\r\n  }\r\n\r\n  renderCollaborators(taskCollaborators) {\r\n    return taskCollaborators.map((c, i) => {\r\n      return (\r\n        <TaskCollaborator\r\n          key={c.userId}\r\n          collaborator={this.collaboratorsIdMap[c.userId]}\r\n          collaboratorTaskData={c}\r\n          onToggle={null}\r\n          onUnassign={() => this.onUnassignCollaborator(c, i)}\r\n        />\r\n      );\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const { form, collaborators, defaultTaskCollaborators } = this.props;\r\n\r\n    form.getFieldDecorator(\"taskCollaborators\", {\r\n      initialValue: defaultTaskCollaborators || []\r\n    });\r\n\r\n    const taskCollaborators = form.getFieldValue(\"taskCollaborators\");\r\n    return (\r\n      <div>\r\n        {this.renderCollaborators(taskCollaborators)}\r\n        {this.renderSelectCollaborators(collaborators)}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport EditPriority from \"./EditPriority.jsx\";\r\nimport ComputeForm from \"../compute-form/ComputeForm.jsx\";\r\nimport { Input, Button, DatePicker, Form } from \"antd\";\r\nimport { taskDescriptor as blockDescriptor } from \"../../models/block/descriptor\";\r\nimport modalWrap from \"../modalWrap.jsx\";\r\nimport AssignTask from \"./AssignTask.jsx\";\r\n\r\nconst TextArea = Input.TextArea;\r\n\r\nclass EditTask extends React.Component {\r\n  static defaultProps = {\r\n    data: {}\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    const self = this;\r\n    const data = props.data || {};\r\n\r\n    this.model = {\r\n      fields: {\r\n        description: {\r\n          component: TextArea,\r\n          props: { autosize: { minRows: 2, maxRows: 6 } },\r\n          label: \"Description\",\r\n          labelCol: null,\r\n          wrapperCol: null,\r\n          rules: blockDescriptor.description,\r\n          initialValue: data.description\r\n        },\r\n        priority: {\r\n          component: EditPriority,\r\n          props: {},\r\n          label: \"Priority\",\r\n          labelCol: null,\r\n          wrapperCol: null,\r\n          initialValue: data.data\r\n            ? data.data.find(d => d.dataType === \"priority\")\r\n            : \"not important\"\r\n        },\r\n        taskCollaborators: {\r\n          render(form) {\r\n            return (\r\n              <Form.Item label=\"Collaborators\" key=\"taskCollaborators\">\r\n                <AssignTask\r\n                  key=\"assignTasks\"\r\n                  form={form}\r\n                  collaborators={props.collaborators}\r\n                  defaultTaskCollaborators={\r\n                    data.taskCollaborators || props.defaultAssignedTo\r\n                  }\r\n                  user={props.user}\r\n                />\r\n              </Form.Item>\r\n            );\r\n          }\r\n        },\r\n        expectedEndAt: {\r\n          component: DatePicker,\r\n          props: {\r\n            showTime: true,\r\n            format: \"YYYY-MM-DD HH:mm:ss\",\r\n            placeholder: \"Complete At\"\r\n          },\r\n          label: \"Complete At\",\r\n          labelCol: null,\r\n          wrapperCol: null,\r\n          initialValue: data.completeAt\r\n        },\r\n        submit: {\r\n          component: Button,\r\n          props: {\r\n            type: \"primary\",\r\n            children: \"Submit\",\r\n            block: true,\r\n            htmlType: \"submit\"\r\n          },\r\n          labelCol: null,\r\n          wrapperCol: null,\r\n          noDecorate: true\r\n        }\r\n      },\r\n      formProps: {\r\n        hideRequiredMark: true\r\n      },\r\n      onSubmit: self.onSubmit\r\n    };\r\n  }\r\n\r\n  onSubmit = submittedData => {\r\n    submittedData.type = \"task\";\r\n    return this.props.onSubmit(submittedData);\r\n  };\r\n\r\n  render() {\r\n    return <ComputeForm model={this.model} form={this.props.form} />;\r\n  }\r\n}\r\n\r\nexport default modalWrap(Form.create()(EditTask), \"Task\");\r\n","import React from \"react\";\r\nimport { Button, Switch, Row, Col } from \"antd\";\r\nimport Priority from \"./Priority.jsx\";\r\nimport \"./minitask.css\";\r\n\r\nclass Task extends React.Component {\r\n  getCollaborator() {\r\n    const { task, user } = this.props;\r\n    if (task.taskCollaborators) {\r\n      return task.taskCollaborators.find(\r\n        collaborator => collaborator.userId === user.customId\r\n      );\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { task, blockHandlers, onEdit } = this.props;\r\n    const collaborator = this.getCollaborator();\r\n\r\n    return (\r\n      <div className=\"sk-minitask\">\r\n        <Row>\r\n          <Col span={4}>\r\n            <Switch\r\n              checked={collaborator && !!collaborator.completedAt}\r\n              onChange={() => blockHandlers.onToggle(task)}\r\n              disabled={collaborator ? false : true}\r\n              title={collaborator ? \"toggle task\" : \"task is not yet assigned\"}\r\n            />\r\n          </Col>\r\n          <Col span={16} className=\"sk-minitask-priority\">\r\n            <Priority level={task.priority} cover />\r\n          </Col>\r\n          <Col span={4} className=\"sk-minitask-top-extra\">\r\n            <Button\r\n              icon=\"delete\"\r\n              type=\"danger\"\r\n              className=\"sk-minitask-close\"\r\n              onClick={() => blockHandlers.onDelete(task)}\r\n              title=\"delete task\"\r\n            />\r\n          </Col>\r\n        </Row>\r\n        <Row className=\"sk-minitask-desc\">\r\n          <Col span={16} offset={4}>\r\n            <p>{task.description}</p>\r\n          </Col>\r\n        </Row>\r\n        <Row>\r\n          <Col span={24} className=\"sk-minitask-footer-right\">\r\n            <Button\r\n              icon=\"edit\"\r\n              onClick={() => onEdit(task)}\r\n              title=\"edit task\"\r\n            />\r\n          </Col>\r\n        </Row>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Task;\r\n","import React from \"react\";\r\nimport ComputeForm from \"../compute-form/ComputeForm.jsx\";\r\nimport { Input, Button, Form } from \"antd\";\r\nimport { projectDescriptor as blockDescriptor } from \"../../models/block/descriptor\";\r\nimport { makeNameExistsValidator } from \"../../utils/descriptor\";\r\nimport modalWrap from \"../modalWrap.jsx\";\r\n\r\nconst TextArea = Input.TextArea;\r\n\r\nclass EditProject extends React.Component {\r\n  static defaultProps = {\r\n    data: {}\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    const self = this;\r\n    const data = props.data || {};\r\n\r\n    this.model = {\r\n      fields: {\r\n        name: {\r\n          component: Input,\r\n          props: { autoComplete: \"off\" },\r\n          label: \"Name\",\r\n          labelCol: null,\r\n          wrapperCol: null,\r\n          rules: [\r\n            ...blockDescriptor.name,\r\n            {\r\n              validator: makeNameExistsValidator(\r\n                props.existingProjects,\r\n                \"project exists\"\r\n              )\r\n            }\r\n          ],\r\n          initialValue: data.name\r\n        },\r\n        description: {\r\n          component: TextArea,\r\n          props: { autosize: { minRows: 2, maxRows: 6 } },\r\n          label: \"Description\",\r\n          labelCol: null,\r\n          wrapperCol: null,\r\n          rules: blockDescriptor.description,\r\n          initialValue: data.description\r\n        },\r\n        submit: {\r\n          component: Button,\r\n          props: {\r\n            type: \"primary\",\r\n            children: \"Submit\",\r\n            block: true,\r\n            htmlType: \"submit\"\r\n          },\r\n          labelCol: null,\r\n          wrapperCol: null,\r\n          noDecorate: true\r\n        }\r\n      },\r\n      formProps: {\r\n        hideRequiredMark: true\r\n      },\r\n      onSubmit: self.onSubmit\r\n    };\r\n  }\r\n\r\n  onSubmit = data => {\r\n    data.type = \"project\";\r\n    return this.props.onSubmit(data);\r\n  };\r\n\r\n  render() {\r\n    return <ComputeForm model={this.model} form={this.props.form} />;\r\n  }\r\n}\r\n\r\nexport default modalWrap(Form.create()(EditProject), \"Project\");\r\n","import React from \"react\";\r\nimport Thumbnail from \"../thumbnail/Thumbnail.jsx\";\r\nimport \"./project-thumbnail.css\";\r\n\r\nexport default function ProjectThumbnail(props) {\r\n  const { project, onClick, className, style } = props;\r\n  return (\r\n    <Thumbnail\r\n      data={project}\r\n      onClick={onClick}\r\n      renderInfo={() => {\r\n        return <h3>{project.name}</h3>;\r\n      }}\r\n      className={className}\r\n      style={{\r\n        height: \"70px\",\r\n        padding: \"4px\",\r\n        ...style\r\n      }}\r\n      colorSpan={5}\r\n    />\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport dotProp from \"dot-prop-immutable\";\r\nimport RootGroup from \"./RootGroup.jsx\";\r\n\r\nfunction mapStateToProps(state, props) {\r\n  return {\r\n    ...props,\r\n    rootBlock: dotProp.get(state, props.path) || props.rootBlock\r\n  };\r\n}\r\n\r\nfunction G(props) {\r\n  return <RootGroup {...props} />;\r\n}\r\n\r\nexport default connect(mapStateToProps)(G);\r\n","export function waitForPromises(promises) {\r\n  return new Promise(function(resolve, reject) {\r\n    function reportPromise(p) {\r\n      p.then(data => {\r\n        result.push({ data, success: true });\r\n        nextPromise();\r\n      }).catch(error => {\r\n        result.push({ error, failed: true });\r\n        nextPromise();\r\n      });\r\n    }\r\n\r\n    function nextPromise() {\r\n      if (index === promises.length) {\r\n        resolve(result);\r\n      } else {\r\n        let p = promises[index];\r\n        index += 1;\r\n        reportPromise(p);\r\n      }\r\n    }\r\n\r\n    let result = [];\r\n    let index = 0;\r\n    nextPromise();\r\n  });\r\n}\r\n","import React from \"react\";\r\nimport { DatePicker, Input, Form, Button, Divider, Row, Col } from \"antd\";\r\nimport dotProp from \"dot-prop-immutable\";\r\nimport asyncValidator from \"async-validator\";\r\nimport {\r\n  promisifyAsyncValidator,\r\n  makeNameExistsValidator\r\n} from \"../../utils/descriptor\";\r\nimport { waitForPromises } from \"../../utils/promise\";\r\nimport { indexArray } from \"../../utils/object\";\r\nimport moment from \"moment\";\r\n\r\nexport default class CollaboratorForm extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.errors = {};\r\n    let existingEmailAddrs = Object.keys({\r\n      ...indexArray(props.existingCollaborators, { path: \"email\" }),\r\n      ...indexArray(props.existingCollaborationRequests, { path: \"email\" })\r\n    });\r\n\r\n    const emailDescriptor = [\r\n      {\r\n        type: \"email\",\r\n        required: true,\r\n        validator: makeNameExistsValidator(\r\n          existingEmailAddrs,\r\n          \"collaborator already exists, or has been previously sent a request\"\r\n        )\r\n      }\r\n    ];\r\n    const messageDescriptor = [{ type: \"string\", max: 250 }];\r\n    const descriptor = {\r\n      email: emailDescriptor,\r\n      message: messageDescriptor\r\n    };\r\n\r\n    this.validateCollaborator = new asyncValidator(descriptor);\r\n    this.emailValidator = new asyncValidator({ email: emailDescriptor });\r\n    this.messageValidator = new asyncValidator({ message: messageDescriptor });\r\n    this.pValidator = promisifyAsyncValidator(\r\n      this.validateCollaborator.validate.bind(this.validateCollaborator)\r\n    );\r\n  }\r\n\r\n  clearHelpers = (index, type) => {\r\n    if (type) {\r\n      if (this.errors[index]) {\r\n        this.errors[index][type] = null;\r\n      }\r\n    } else {\r\n      delete this.errors[index];\r\n    }\r\n  };\r\n\r\n  clearErrors = () => {\r\n    this.errors = {};\r\n  };\r\n\r\n  setError = (index, emailError, messageError) => {\r\n    this.errors[index] = { email: emailError, message: messageError };\r\n  };\r\n\r\n  hasError = () => {\r\n    return !!Object.keys(this.errors).length;\r\n  };\r\n\r\n  getError = (index, type = \"email\") => {\r\n    return dotProp.get(this.errors, `${index}.${type}`);\r\n  };\r\n\r\n  validate = async () => {\r\n    const { form } = this.props;\r\n    this.clearErrors();\r\n    let collaborators = form.getFieldValue(\"collaborators\");\r\n    let validationPromises = [];\r\n    collaborators.forEach(c => {\r\n      validationPromises.push(this.pValidator(c));\r\n    });\r\n\r\n    let result = await waitForPromises(validationPromises);\r\n    result.forEach((r, index) => {\r\n      if (r.failed) {\r\n        this.setError(\r\n          index,\r\n          dotProp.get(r.error.fields, `email.0.message`),\r\n          dotProp.get(r.error.fields, `message.0.message`)\r\n        );\r\n      }\r\n    });\r\n\r\n    const hasError = this.hasError();\r\n\r\n    // to force the form to re-render\r\n    if (hasError) {\r\n      form.setFieldsValue({ collaborators });\r\n    }\r\n\r\n    return !hasError;\r\n  };\r\n\r\n  onAddField = () => {\r\n    const { form } = this.props;\r\n    let collaborators = form.getFieldValue(\"collaborators\");\r\n    collaborators = collaborators.concat([{ email: \"\", expiresAt: null }]);\r\n    form.setFieldsValue({ collaborators });\r\n  };\r\n\r\n  onDeleteField = index => {\r\n    const { form } = this.props;\r\n    let collaborators = form.getFieldValue(\"collaborators\");\r\n    collaborators = dotProp.delete(collaborators, index);\r\n    this.clearHelpers(index);\r\n    form.setFieldsValue({ collaborators });\r\n  };\r\n\r\n  onUpdateField = (index, field, data, validator) => {\r\n    const { form } = this.props;\r\n    let collaborators = form.getFieldValue(\"collaborators\");\r\n    validator.validate({ [field]: data }, errors => {\r\n      if (errors) {\r\n        this.setError(index, errors[0].message);\r\n      } else {\r\n        this.clearHelpers(index, field);\r\n      }\r\n\r\n      collaborators = dotProp.set(collaborators, `${index}.${field}`, data);\r\n      form.setFieldsValue({ collaborators });\r\n    });\r\n  };\r\n\r\n  onUpdateEmail = (index, email) => {\r\n    this.onUpdateField(index, \"email\", email, this.emailValidator);\r\n  };\r\n\r\n  onUpdateMessage = (index, message) => {\r\n    this.onUpdateField(index, \"message\", message, this.messageValidator);\r\n  };\r\n\r\n  onUpdateExpiresAt = (index, momentDate) => {\r\n    const { form } = this.props;\r\n    let collaborators = form.getFieldValue(\"collaborators\");\r\n    collaborators = dotProp.set(\r\n      collaborators,\r\n      `${index}.expiresAt`,\r\n      momentDate\r\n    );\r\n    form.setFieldsValue({ collaborators });\r\n  };\r\n\r\n  render() {\r\n    const { form } = this.props;\r\n    form.getFieldDecorator(\"collaborators\", {\r\n      initialValue: [],\r\n      rules: [\r\n        {\r\n          type: \"array\",\r\n          required: true,\r\n          message: \"collaborators are required\"\r\n        }\r\n      ]\r\n    });\r\n\r\n    const collaborators = form.getFieldValue(\"collaborators\");\r\n    const error = form.getFieldError(\"collaborators\");\r\n    const dateFormat = \"MMM DD, YYYY\";\r\n\r\n    return (\r\n      <div>\r\n        {collaborators.map((c, index) => {\r\n          return (\r\n            <div key={index}>\r\n              <Row gutter={16}>\r\n                <Col span={20}>\r\n                  <Form.Item\r\n                    label=\"Email address\"\r\n                    help={\r\n                      <span style={{ color: \"red\" }}>\r\n                        {this.getError(index, \"email\")}\r\n                      </span>\r\n                    }\r\n                    style={{ marginBottom: \"4px\" }}\r\n                  >\r\n                    <Input\r\n                      value={c.email}\r\n                      onChange={event => {\r\n                        this.onUpdateEmail(index, event.target.value);\r\n                      }}\r\n                      autoComplete=\"email\"\r\n                    />\r\n                  </Form.Item>\r\n                  <Form.Item\r\n                    label=\"Message\"\r\n                    help={\r\n                      <span style={{ color: \"red\" }}>\r\n                        {this.getError(index, \"message\")}\r\n                      </span>\r\n                    }\r\n                  >\r\n                    <Input.TextArea\r\n                      autosize\r\n                      autoComplete=\"off\"\r\n                      value={c.message}\r\n                      onChange={event => {\r\n                        this.onUpdateMessage(index, event.target.value);\r\n                      }}\r\n                    />\r\n                  </Form.Item>\r\n                  <Form.Item\r\n                    label=\"Expires at\"\r\n                    help={\r\n                      <span style={{ color: \"red\" }}>\r\n                        {this.getError(index, \"expiresAt\")}\r\n                      </span>\r\n                    }\r\n                  >\r\n                    <DatePicker\r\n                      format={dateFormat}\r\n                      disabledDate={current => {\r\n                        return (\r\n                          current &&\r\n                          current <\r\n                            moment()\r\n                              .subtract(1, \"day\")\r\n                              .endOf(\"day\")\r\n                        );\r\n                      }}\r\n                      onChange={(...args) => {\r\n                        this.onUpdateExpiresAt(index, ...args);\r\n                      }}\r\n                      value={c.expiresAt && moment(c.expiresAt, dateFormat)}\r\n                    />\r\n                  </Form.Item>\r\n                </Col>\r\n                <Col span={4}>\r\n                  <Button\r\n                    icon=\"close\"\r\n                    onClick={() => this.onDeleteField(index)}\r\n                    type=\"danger\"\r\n                  />\r\n                </Col>\r\n              </Row>\r\n              {index !== collaborators.length - 1 && <Divider />}\r\n            </div>\r\n          );\r\n        })}\r\n        <span style={{ color: \"red\" }}>{error}</span>\r\n        <Button block icon=\"plus\" onClick={this.onAddField}>\r\n          Add Collaborator\r\n        </Button>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport ComputeForm from \"../compute-form/ComputeForm.jsx\";\r\nimport { Button, Form } from \"antd\";\r\nimport modalWrap from \"../modalWrap.jsx\";\r\nimport CollaboratorForm from \"./AddCollaboratorForm.jsx\";\r\nimport moment from \"moment\";\r\n\r\nclass AddCollaborator extends React.Component {\r\n  static defaultProps = {\r\n    data: {}\r\n  };\r\n\r\n  formRef = React.createRef();\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    const self = this;\r\n\r\n    this.model = {\r\n      fields: {\r\n        collaborators: {\r\n          render(form) {\r\n            return (\r\n              <div key=\"add-collaborator\">\r\n                <p>\r\n                  If request expiration date is not provided, the default\r\n                  expiration duration is 1 month.\r\n                </p>\r\n                <Form.Item>\r\n                  <CollaboratorForm\r\n                    ref={self.formRef}\r\n                    form={form}\r\n                    existingCollaborators={props.existingCollaborators}\r\n                    existingCollaborationRequests={\r\n                      props.existingCollaborationRequests\r\n                    }\r\n                  />\r\n                </Form.Item>\r\n              </div>\r\n            );\r\n          }\r\n        },\r\n        submit: {\r\n          component: Button,\r\n          props: {\r\n            type: \"primary\",\r\n            children: \"Submit\",\r\n            block: true,\r\n            htmlType: \"submit\"\r\n          },\r\n          labelCol: null,\r\n          wrapperCol: null,\r\n          noDecorate: true\r\n        }\r\n      },\r\n      formProps: {\r\n        hideRequiredMark: true\r\n      },\r\n      onSubmit: self.onSubmit\r\n    };\r\n  }\r\n\r\n  onSubmit = async submittedData => {\r\n    if (this.formRef.current) {\r\n      let success = await this.formRef.current.validate();\r\n\r\n      if (success) {\r\n        submittedData.message = null;\r\n        submittedData.expiresAt = moment()\r\n          .add(1, \"months\")\r\n          .valueOf();\r\n\r\n        this.props.onSubmit(submittedData);\r\n      }\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return <ComputeForm model={this.model} form={this.props.form} />;\r\n  }\r\n}\r\n\r\nexport default modalWrap(\r\n  Form.create()(AddCollaborator),\r\n  \"Collaboration Request\"\r\n);\r\n","import React from \"react\";\r\nimport { Switch } from \"antd\";\r\n\r\nexport default class BitSwitch extends React.Component {\r\n  static defaultProps = {\r\n    options: [\"No\", \"Yes\"]\r\n  };\r\n\r\n  render() {\r\n    const { onChange, disabled, options, defaultValue } = this.props;\r\n    let value =\r\n      this.props.value !== undefined ? this.props.value : defaultValue;\r\n    let option1Style = {\r\n      marginRight: \"8px\",\r\n      fontWeight: !value ? \"bold\" : \"500\"\r\n    };\r\n\r\n    let option2Style = {\r\n      marginLeft: \"8px\",\r\n      fontWeight: value ? \"bold\" : \"500\"\r\n    };\r\n\r\n    return (\r\n      <span>\r\n        <span style={option1Style}>{options[0]}</span>\r\n        <Switch checked={!!value} onChange={onChange} disabled={disabled} />\r\n        <span style={option2Style}>{options[1]}</span>\r\n      </span>\r\n    );\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport { Col, Form, Input, Select, DatePicker, InputNumber } from \"antd\";\r\nimport FormWrapper from \"./FormWrapper.jsx\";\r\nimport BitSwitch from \"./BitSwitch\";\r\nimport moment from \"moment\";\r\n\r\nclass ExtFormWrapper extends React.Component {\r\n  renderField = ({\r\n    fieldName,\r\n    labelName,\r\n    type,\r\n    value,\r\n    options,\r\n    placeholder,\r\n    dateFormat,\r\n    immutable,\r\n    min,\r\n    max,\r\n    block,\r\n    rule,\r\n    props\r\n  }) => {\r\n    const { form, editing } = this.props;\r\n    let field = null;\r\n    let span = block\r\n      ? {\r\n          xs: 24,\r\n          sm: 24,\r\n          md: 24\r\n        }\r\n      : {\r\n          xs: 24,\r\n          sm: 24,\r\n          md: 12\r\n        };\r\n\r\n    if (editing && !immutable) {\r\n      if (type === \"text\") {\r\n        field = <Input {...props} placeholder={placeholder} />;\r\n      } else if (type === \"textarea\") {\r\n        field = <Input.TextArea {...props} placeholder={placeholder} />;\r\n      } else if (type === \"select\") {\r\n        field = (\r\n          <Select {...props} placeholder={placeholder}>\r\n            {options.map(option => {\r\n              return <Select.Option key={option}>{option}</Select.Option>;\r\n            })}\r\n          </Select>\r\n        );\r\n      } else if (type === \"datepicker\") {\r\n        field = (\r\n          <DatePicker\r\n            {...props}\r\n            format={dateFormat}\r\n            placeholder={placeholder}\r\n          />\r\n        );\r\n        value = moment(value);\r\n      } else if (type === \"switch\") {\r\n        field = <BitSwitch {...props} options={options} />;\r\n      } else if (type === \"number\") {\r\n        field = (\r\n          <InputNumber\r\n            {...props}\r\n            min={min}\r\n            max={max}\r\n            placeholder={placeholder}\r\n          />\r\n        );\r\n      } else {\r\n        field = <Input {...props} placeholder={placeholder} />;\r\n      }\r\n\r\n      field = (\r\n        <Form.Item label={labelName || fieldName}>\r\n          {form.getFieldDecorator(fieldName, { rule, initialValue: value })(\r\n            field\r\n          )}\r\n        </Form.Item>\r\n      );\r\n    } else {\r\n      if (type === \"switch\") {\r\n        value = <BitSwitch disabled options={options} defaultValue={value} />;\r\n      }\r\n\r\n      field = <Form.Item label={labelName}>{value}</Form.Item>;\r\n    }\r\n\r\n    if (type === \"textarea\") {\r\n      span.md = 24;\r\n    }\r\n\r\n    return <Col {...span}>{field}</Col>;\r\n  };\r\n\r\n  renderForm() {\r\n    const { form, render, editing, onSubmit } = this.props;\r\n    let data = form.getFieldsValue();\r\n    let content = render({ renderField: this.renderField, data, editing });\r\n\r\n    if (editing) {\r\n      content = (\r\n        <FormWrapper form={form} onSubmit={onSubmit}>\r\n          {content}\r\n        </FormWrapper>\r\n      );\r\n    }\r\n\r\n    return content;\r\n  }\r\n\r\n  render() {\r\n    return this.renderForm();\r\n  }\r\n}\r\n\r\nexport default Form.create()(ExtFormWrapper);\r\n","import React from \"react\";\r\nimport ExtFormWrapper from \"../ExtFormWrapper\";\r\nimport { Form } from \"antd\";\r\nimport modalWrap from \"../modalWrap\";\r\n\r\nclass CollaboratorForm extends React.Component {\r\n  renderForm = ({ renderField, data }) => {\r\n    const { collaborator } = this.props;\r\n\r\n    return (\r\n      <React.Fragment>\r\n        {renderField({\r\n          fieldName: \"name\",\r\n          labelName: \"Name\",\r\n          type: \"input\",\r\n          value: collaborator.name,\r\n          immutable: true,\r\n          block: true\r\n        })}\r\n        {renderField({\r\n          fieldName: \"email\",\r\n          labelName: \"Email address\",\r\n          type: \"input\",\r\n          value: collaborator.email,\r\n          immutable: true,\r\n          block: true\r\n        })}\r\n      </React.Fragment>\r\n    );\r\n  };\r\n\r\n  render() {\r\n    const { form, onSubmit } = this.props;\r\n\r\n    return (\r\n      <ExtFormWrapper\r\n        editing\r\n        render={this.renderForm}\r\n        onSubmit={onSubmit}\r\n        form={form}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\n// TODO: change \"Collaborator to collaborator name\"\r\nexport default modalWrap(Form.create()(CollaboratorForm), \"Collaborator\");\r\n","import React from \"react\";\r\nimport CollaboratorThumbnail from \"./Thumnail.jsx\";\r\nimport { List, Button, Tabs } from \"antd\";\r\nimport AddCollaborator from \"./AddCollaborator.jsx\";\r\nimport CollaboratorForm from \"./CollaboratorForm\";\r\nimport \"./collaborators.css\";\r\n\r\nexport default class Collaborators extends React.Component {\r\n  state = {\r\n    showAddCollaboratorForm: false,\r\n    showCollaborator: null\r\n  };\r\n\r\n  toggleCollaboratorForm = () => {\r\n    this.setState(prevState => {\r\n      return {\r\n        showAddCollaboratorForm: !prevState.showAddCollaboratorForm\r\n      };\r\n    });\r\n  };\r\n\r\n  renderList(items, renderItem) {\r\n    return (\r\n      <List\r\n        dataSource={items}\r\n        renderItem={renderItem}\r\n        grid={{\r\n          gutter: 16,\r\n          xs: 1,\r\n          sm: 2,\r\n          md: 3,\r\n          lg: 4\r\n        }}\r\n        style={{ alignItems: \"flex-start\" }}\r\n      />\r\n    );\r\n  }\r\n\r\n  renderCollaborators(collaborators = []) {\r\n    return this.renderList(collaborators, c => {\r\n      return (\r\n        <List.Item key={c.customId}>\r\n          <CollaboratorThumbnail\r\n            collaborator={c}\r\n            onClick={() => {\r\n              this.setState({ showCollaborator: c });\r\n            }}\r\n          />\r\n        </List.Item>\r\n      );\r\n    });\r\n  }\r\n\r\n  renderCollaborationRequests(collaborationRequests = []) {\r\n    return this.renderList(collaborationRequests, c => {\r\n      return (\r\n        <List.Item key={c.customId}>\r\n          <CollaboratorThumbnail collaborator={c} />\r\n        </List.Item>\r\n      );\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      collaborators,\r\n      onBack,\r\n      onAddCollaborators,\r\n      collaborationRequests,\r\n      block,\r\n      onUpdateCollaborator\r\n    } = this.props;\r\n    const { showAddCollaboratorForm, showCollaborator } = this.state;\r\n\r\n    return (\r\n      <div className=\"sk-collaborators\">\r\n        <CollaboratorForm\r\n          visible={!!showCollaborator}\r\n          onClose={() => this.setState({ showCollaborator: null })}\r\n          collaborator={showCollaborator}\r\n          onSubmit={data => {\r\n            onUpdateCollaborator(showCollaborator, data);\r\n            this.setState({ showCollaborator: null });\r\n          }}\r\n          block={block}\r\n        />\r\n        <AddCollaborator\r\n          onSubmit={data => {\r\n            onAddCollaborators(data);\r\n            this.toggleCollaboratorForm();\r\n          }}\r\n          visible={showAddCollaboratorForm}\r\n          onClose={this.toggleCollaboratorForm}\r\n          existingCollaborators={collaborators}\r\n          existingCollaborationRequests={collaborationRequests}\r\n        />\r\n        <div className=\"sk-collaborators-header\">\r\n          <Button icon=\"arrow-left\" onClick={onBack} />\r\n          <Button\r\n            icon=\"plus\"\r\n            onClick={this.toggleCollaboratorForm}\r\n            style={{ marginLeft: \"1em\" }}\r\n          >\r\n            Add collaborator\r\n          </Button>\r\n          <span className=\"sk-gl-block-name\">{block.name}</span>\r\n        </div>\r\n        <div className=\"sk-collaborators-content\">\r\n          <Tabs>\r\n            <Tabs.TabPane tab=\"Collaborators\" key=\"collaborators\">\r\n              {this.renderCollaborators(collaborators)}\r\n            </Tabs.TabPane>\r\n            <Tabs.TabPane\r\n              tab=\"Collaboration Requests\"\r\n              key=\"collaboration-requests\"\r\n            >\r\n              {this.renderCollaborationRequests(collaborationRequests)}\r\n            </Tabs.TabPane>\r\n          </Tabs>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport Group from \"./Group.jsx\";\r\nimport EditGroup from \"./EditGroup.jsx\";\r\nimport EditTask from \"../task/EditTask.jsx\";\r\nimport MiniTask from \"../task/MiniTask.jsx\";\r\nimport EditProject from \"../project/EditProject.jsx\";\r\nimport AddDropdownButton from \"../AddDropdownButton.jsx\";\r\nimport ProjectThumbnail from \"../project/ProjectThumbnail.jsx\";\r\nimport { Button } from \"antd\";\r\nimport {\r\n  assignTask,\r\n  permittedChildrenTypes\r\n} from \"../../models/block/block-utils\";\r\nimport RootGroupGenericContainer from \"./RootGroupGenericContainer.jsx\";\r\nimport Collaborators from \"../collaborator/Collaborators.jsx\";\r\nimport \"./root-group.css\";\r\n\r\nclass RootGroup extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      form: {\r\n        task: false,\r\n        project: false,\r\n        group: false\r\n      },\r\n      project: null,\r\n      block: null,\r\n      parent: null,\r\n      showCollaborators: false,\r\n      fetchingChildren: true,\r\n      fetchingCollaborators: true,\r\n      fetchingCollaborationRequests: true\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.loadBlockData();\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (this.props.rootBlock.customId !== prevProps.rootBlock.customId) {\r\n      this.loadBlockData();\r\n    } else {\r\n      this.updateFetchingState();\r\n    }\r\n  }\r\n\r\n  updateFetchingState() {\r\n    const {\r\n      fetchingChildren,\r\n      fetchingCollaborators,\r\n      fetchingCollaborationRequests\r\n    } = this.state;\r\n    let newState = {};\r\n\r\n    if (this.areBlockChildrenLoaded() && fetchingChildren) {\r\n      newState.fetchingChildren = false;\r\n    }\r\n\r\n    if (this.areBlockCollaboratorsLoaded() && fetchingCollaborators) {\r\n      newState.fetchingCollaborators = false;\r\n    }\r\n\r\n    if (\r\n      this.areBlockCollaborationRequestsLoaded() &&\r\n      fetchingCollaborationRequests\r\n    ) {\r\n      newState.fetchingCollaborationRequests = false;\r\n    }\r\n\r\n    if (Object.keys(newState).length > 0) {\r\n      this.setState(newState);\r\n    }\r\n  }\r\n\r\n  loadBlockData() {\r\n    const {\r\n      fetchingChildren,\r\n      fetchingCollaborators,\r\n      fetchingCollaborationRequests\r\n    } = this.state;\r\n    let newState = {};\r\n\r\n    if (!this.areBlockChildrenLoaded()) {\r\n      this.fetchChildren();\r\n    } else if (fetchingChildren) {\r\n      newState.fetchingChildren = false;\r\n    }\r\n\r\n    if (!this.areBlockCollaboratorsLoaded()) {\r\n      this.fetchCollaborators();\r\n    } else if (fetchingCollaborators) {\r\n      newState.fetchingCollaborators = false;\r\n    }\r\n\r\n    if (!this.areBlockCollaborationRequestsLoaded()) {\r\n      this.fetchCollaborationRequests();\r\n    } else if (fetchingCollaborationRequests) {\r\n      newState.fetchingCollaborationRequests = false;\r\n    }\r\n\r\n    if (Object.keys(newState).length > 0) {\r\n      this.setState(newState);\r\n    }\r\n  }\r\n\r\n  areBlockChildrenLoaded() {\r\n    const { rootBlock } = this.props;\r\n\r\n    if (permittedChildrenTypes[rootBlock.type]) {\r\n      const typeNotLoaded = permittedChildrenTypes[rootBlock.type].find(\r\n        type => {\r\n          if (!rootBlock[type]) {\r\n            return true;\r\n          }\r\n        }\r\n      );\r\n\r\n      if (typeNotLoaded) {\r\n        return false;\r\n      }\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  areBlockCollaboratorsLoaded() {\r\n    const { rootBlock } = this.props;\r\n    if (rootBlock.type === \"org\" && !rootBlock.collaborators) {\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  areBlockCollaborationRequestsLoaded() {\r\n    const { rootBlock } = this.props;\r\n    if (rootBlock.type === \"org\" && !rootBlock.collaborationRequests) {\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  async fetchChildren() {\r\n    const { rootBlock, blockHandlers } = this.props;\r\n    await blockHandlers.getBlockChildren(rootBlock);\r\n  }\r\n\r\n  async fetchCollaborators() {\r\n    const { rootBlock, blockHandlers } = this.props;\r\n    await blockHandlers.getCollaborators(rootBlock);\r\n  }\r\n\r\n  async fetchCollaborationRequests() {\r\n    const { rootBlock, blockHandlers } = this.props;\r\n    await blockHandlers.getCollaborationRequests(rootBlock);\r\n  }\r\n\r\n  onSubmitData = (data, formType) => {\r\n    const { parent, block } = this.state;\r\n\r\n    if (block) {\r\n      this.props.blockHandlers.onUpdate(block, data);\r\n    } else {\r\n      this.props.blockHandlers.onAdd(data, parent);\r\n    }\r\n\r\n    this.toggleForm(formType);\r\n  };\r\n\r\n  toggleForm = (type, parent = null, block = null) => {\r\n    this.setState(prevState => {\r\n      return {\r\n        parent: parent,\r\n        block: block,\r\n        form: { ...prevState.form, [type]: !prevState.form[type] }\r\n      };\r\n    });\r\n  };\r\n\r\n  setCurrentProject = project => {\r\n    this.setState({ project });\r\n  };\r\n\r\n  toggleShowCollaborators = () => {\r\n    this.setState(prevState => {\r\n      return {\r\n        showCollaborators: !prevState.showCollaborators\r\n      };\r\n    });\r\n  };\r\n\r\n  hasChildren(obj) {\r\n    if (obj && typeof obj === \"object\") {\r\n      return Object.keys(obj).length > 0;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  getCollaborators() {\r\n    const { user, rootBlock, collaborators } = this.props;\r\n    return rootBlock.collaborators || collaborators || [user];\r\n  }\r\n\r\n  getExistingNames(blocks = {}) {\r\n    return Object.keys(blocks).map(customId => blocks[customId].name);\r\n  }\r\n\r\n  renderTasks(tasks = {}, parent) {\r\n    const { blockHandlers, user, rootBlock } = this.props;\r\n    const collaborators = this.getCollaborators();\r\n    return Object.keys(tasks).map(taskId => {\r\n      const task = tasks[taskId];\r\n      return (\r\n        <MiniTask\r\n          user={user}\r\n          key={task.customId}\r\n          task={task}\r\n          collaborators={collaborators}\r\n          blockHandlers={blockHandlers}\r\n          onEdit={task => this.toggleForm(\"task\", parent || rootBlock, task)}\r\n        />\r\n      );\r\n    });\r\n  }\r\n\r\n  renderProjects(projects = {}) {\r\n    return Object.keys(projects).map(projectId => {\r\n      const project = projects[projectId];\r\n      return (\r\n        <ProjectThumbnail\r\n          key={project.customId}\r\n          project={project}\r\n          onClick={() => this.setCurrentProject(project)}\r\n          className=\"sk-root-group-thumbnail\"\r\n        />\r\n      );\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const { rootBlock, blockHandlers, user, onBack, isFromRoot } = this.props;\r\n    const {\r\n      form,\r\n      project,\r\n      block,\r\n      showCollaborators,\r\n      parent,\r\n      fetchingChildren,\r\n      fetchingCollaborators,\r\n      fetchingCollaborationRequests\r\n    } = this.state;\r\n    const collaborators = this.getCollaborators();\r\n    const childrenTypes = permittedChildrenTypes[rootBlock.type];\r\n    const isUserRootBlock =\r\n      isFromRoot !== undefined\r\n        ? isFromRoot\r\n        : rootBlock.type === \"root\"\r\n        ? true\r\n        : false;\r\n\r\n    if (showCollaborators) {\r\n      return (\r\n        <Collaborators\r\n          block={rootBlock}\r\n          onBack={this.toggleShowCollaborators}\r\n          collaborators={rootBlock.collaborators}\r\n          onAddCollaborators={data => {\r\n            blockHandlers.onAddCollaborators(rootBlock, data);\r\n          }}\r\n          collaborationRequests={rootBlock.collaborationRequests}\r\n          bench={rootBlock.bench}\r\n          onUpdateCollaborator={(collaborator, data) => {\r\n            blockHandlers.onUpdateCollaborator(rootBlock, collaborator, data);\r\n          }}\r\n        />\r\n      );\r\n    }\r\n\r\n    if (project) {\r\n      return (\r\n        <RootGroupGenericContainer\r\n          path={project.path}\r\n          collaborators={collaborators}\r\n          user={user}\r\n          onBack={() => this.setCurrentProject(null)}\r\n          blockHandlers={blockHandlers}\r\n          parentBlock={rootBlock}\r\n          isFromRoot={isUserRootBlock || isFromRoot}\r\n        />\r\n      );\r\n    }\r\n\r\n    return (\r\n      <div className=\"sk-root-group\">\r\n        <EditProject\r\n          visible={form.project}\r\n          onSubmit={data => this.onSubmitData(data, \"project\")}\r\n          onClose={() => this.toggleForm(\"project\")}\r\n          data={block}\r\n          existingProjects={\r\n            form.project && this.getExistingNames(parent.project)\r\n          }\r\n        />\r\n        <EditGroup\r\n          visible={form.group}\r\n          onSubmit={data => this.onSubmitData(data, \"group\")}\r\n          onClose={() => this.toggleForm(\"group\")}\r\n          data={block}\r\n          existingGroups={form.group && this.getExistingNames(parent.group)}\r\n        />\r\n        <EditTask\r\n          defaultAssignedTo={isFromRoot && [assignTask(user)]}\r\n          collaborators={collaborators}\r\n          visible={form.task}\r\n          onSubmit={data => this.onSubmitData(data, \"task\")}\r\n          onClose={() => this.toggleForm(\"task\")}\r\n          data={block}\r\n          user={user}\r\n        />\r\n        <div className=\"sk-root-group-header\">\r\n          {onBack && (\r\n            <Button\r\n              onClick={onBack}\r\n              icon=\"arrow-left\"\r\n              style={{ marginRight: \"1em\" }}\r\n            />\r\n          )}\r\n          {childrenTypes.length > 0 && (\r\n            <AddDropdownButton\r\n              types={childrenTypes}\r\n              label=\"Create\"\r\n              onClick={type => this.toggleForm(type, rootBlock)}\r\n            />\r\n          )}\r\n          {rootBlock.type === \"org\" &&\r\n            (fetchingCollaborators && fetchingCollaborationRequests ? (\r\n              \"Loading\"\r\n            ) : (\r\n              <Button\r\n                style={{ marginLeft: \"1em\" }}\r\n                onClick={this.toggleShowCollaborators}\r\n              >\r\n                Collaborators\r\n              </Button>\r\n            ))}\r\n          <span className=\"sk-root-group-name\">\r\n            {isUserRootBlock ? \"Root\" : rootBlock.name}\r\n          </span>\r\n        </div>\r\n        <div className=\"sk-root-group-content\">\r\n          <div className=\"sk-root-group-content-inner\">\r\n            {fetchingChildren && \"Loading\"}\r\n            {(this.hasChildren(rootBlock.task) ||\r\n              this.hasChildren(rootBlock.project)) && (\r\n              <div className=\"sk-root-group-content-group\" key=\"ungrouped\">\r\n                <Group name=\"Ungrouped\" user={user}>\r\n                  {this.renderTasks(rootBlock.task, rootBlock)}\r\n                  {this.renderProjects(rootBlock.project)}\r\n                </Group>\r\n              </div>\r\n            )}\r\n            {this.hasChildren(rootBlock.group) &&\r\n              Object.keys(rootBlock.group).map(groupId => {\r\n                let group = rootBlock.group[groupId];\r\n                return (\r\n                  <div className=\"sk-root-group-content-group\" key={groupId}>\r\n                    <Group\r\n                      group={group}\r\n                      onClickAddChild={this.toggleForm}\r\n                      blockHandlers={blockHandlers}\r\n                      onEdit={group =>\r\n                        this.toggleForm(\"group\", rootBlock, group)\r\n                      }\r\n                      user={user}\r\n                    >\r\n                      {this.renderTasks(group.task, group)}\r\n                      {this.renderProjects(group.project)}\r\n                    </Group>\r\n                  </div>\r\n                );\r\n              })}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default RootGroup;\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { sortBlocks } from \"../../models/block/block-utils\";\r\nimport { makeBlockHandlers } from \"../../models/block/block-handlers\";\r\nimport RootGroup from \"./RootGroup.jsx\";\r\nimport netInterface from \"../../net\";\r\nimport { makeMultiple } from \"../../redux/actions/make\";\r\nimport { mergeDataByPath } from \"../../redux/actions/data\";\r\nimport get from \"lodash/get\";\r\n\r\nclass RootGroupContainer extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      error: null\r\n    };\r\n  }\r\n\r\n  async componentDidMount() {\r\n    if (!this.props.rootBlock) {\r\n      try {\r\n        await this.props.fetchRootData();\r\n      } catch (error) {\r\n        this.setState({ error });\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { rootBlock, blockHandlers, user } = this.props;\r\n    const { error } = this.state;\r\n\r\n    if (!rootBlock) {\r\n      return \"Loading\";\r\n    } else if (error) {\r\n      return \"An error occurred\";\r\n    }\r\n\r\n    return (\r\n      <RootGroup\r\n        rootBlock={rootBlock}\r\n        blockHandlers={blockHandlers}\r\n        user={user}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return { state };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n  return { dispatch };\r\n}\r\n\r\nfunction mergeProps({ state }, { dispatch }, ownProps) {\r\n  const user = state.user.user;\r\n  const blockHandlers = makeBlockHandlers({\r\n    dispatch,\r\n    user,\r\n    parent: state.rootBlock\r\n  });\r\n\r\n  return {\r\n    blockHandlers,\r\n    user,\r\n    rootBlock: state.rootBlock,\r\n    async fetchRootData() {\r\n      const { blocks } = await netInterface(\"block.getRoleBlocks\");\r\n\r\n      let rootBlock = null;\r\n      let orgs = {};\r\n      blocks.forEach(blk => {\r\n        if (blk.type === \"root\") {\r\n          rootBlock = blk;\r\n          rootBlock.path = `rootBlock`;\r\n        } else if (blk.type === \"orgs\") {\r\n          orgs[blk.customId] = blk;\r\n          blk.path = `orgs.${blk.customId}`;\r\n        }\r\n      });\r\n\r\n      let actions = [\r\n        mergeDataByPath(rootBlock.path, rootBlock),\r\n        mergeDataByPath(\"orgs\", orgs)\r\n      ];\r\n\r\n      dispatch(makeMultiple(actions));\r\n    }\r\n  };\r\n}\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps,\r\n  mergeProps\r\n)(RootGroupContainer);\r\n","import React from \"react\";\r\nimport Thumbnail from \"../thumbnail/Thumbnail.jsx\";\r\n\r\nexport default function OrgThumbnail(props) {\r\n  const { org, className, style, onClick } = props;\r\n  return (\r\n    <Thumbnail\r\n      className={className}\r\n      data={org}\r\n      onClick={onClick}\r\n      renderInfo={() => {\r\n        return <h3>{org.name}</h3>;\r\n      }}\r\n      style={{\r\n        height: \"70px\",\r\n        padding: \"4px\",\r\n        ...style\r\n      }}\r\n      colorSpan={5}\r\n    />\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport ComputeForm from \"../compute-form/ComputeForm.jsx\";\r\nimport { Input, Button, Form } from \"antd\";\r\nimport { orgDescriptor as blockDescriptor } from \"../../models/block/descriptor\";\r\nimport { makeNameExistsValidator } from \"../../utils/descriptor\";\r\nimport modalWrap from \"../modalWrap.jsx\";\r\n\r\nconst TextArea = Input.TextArea;\r\n\r\nclass EditOrg extends React.Component {\r\n  static defaultProps = {\r\n    data: {}\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    const self = this;\r\n    const data = props.data || {};\r\n\r\n    this.model = {\r\n      fields: {\r\n        name: {\r\n          component: Input,\r\n          props: { autoComplete: \"off\" },\r\n          label: \"Name\",\r\n          labelCol: null,\r\n          wrapperCol: null,\r\n          rules: [\r\n            ...blockDescriptor.name,\r\n            {\r\n              validator: makeNameExistsValidator(\r\n                props.existingOrgs,\r\n                \"orgs exist\"\r\n              )\r\n            }\r\n          ],\r\n          initialValue: data.name\r\n        },\r\n        description: {\r\n          component: TextArea,\r\n          props: { autosize: { minRows: 2, maxRows: 6 } },\r\n          label: \"Description\",\r\n          rules: blockDescriptor.description,\r\n          initialValue: data.description\r\n        },\r\n        submit: {\r\n          component: Button,\r\n          props: {\r\n            type: \"primary\",\r\n            children: \"Submit\",\r\n            block: true,\r\n            htmlType: \"submit\"\r\n          },\r\n          labelCol: null,\r\n          wrapperCol: null,\r\n          noDecorate: true\r\n        }\r\n      },\r\n      formProps: {\r\n        hideRequiredMark: true\r\n      },\r\n      onSubmit: self.onSubmit\r\n    };\r\n  }\r\n\r\n  onSubmit = data => {\r\n    data.type = \"org\";\r\n    return this.props.onSubmit(data);\r\n  };\r\n\r\n  render() {\r\n    return <ComputeForm model={this.model} form={this.props.form} />;\r\n  }\r\n}\r\n\r\nexport default modalWrap(Form.create()(EditOrg), \"Org\");\r\n","import React from \"react\";\r\nimport OrgThumbnail from \"./OrgThumbnail.jsx\";\r\nimport RootGroup from \"../group/RootGroup.jsx\";\r\nimport EditOrg from \"./EditOrg.jsx\";\r\nimport { Button } from \"antd\";\r\nimport \"./orgs.css\";\r\n\r\nclass Orgs extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      currentOrg: null,\r\n      showNewOrgForm: false\r\n    };\r\n  }\r\n\r\n  setCurrentOrg = id => {\r\n    this.setState({ currentOrg: id });\r\n  };\r\n\r\n  toggleNewOrgForm = () => {\r\n    this.setState(prevState => {\r\n      return {\r\n        showNewOrgForm: !prevState.showNewOrgForm\r\n      };\r\n    });\r\n  };\r\n\r\n  onCreateOrg = org => {\r\n    this.props.blockHandlers.onAdd(org);\r\n    this.toggleNewOrgForm();\r\n  };\r\n\r\n  render() {\r\n    const { orgs, blockHandlers, user } = this.props;\r\n    const { currentOrg, showNewOrgForm } = this.state;\r\n\r\n    if (currentOrg) {\r\n      return (\r\n        <RootGroup\r\n          rootBlock={orgs[currentOrg]}\r\n          onBack={() => this.setCurrentOrg(null)}\r\n          blockHandlers={blockHandlers}\r\n          user={user}\r\n        />\r\n      );\r\n    }\r\n\r\n    return (\r\n      <div className=\"sk-orgs\">\r\n        <EditOrg\r\n          visible={showNewOrgForm}\r\n          onSubmit={this.onCreateOrg}\r\n          onClose={this.toggleNewOrgForm}\r\n          existingOrgs={Object.keys(orgs).map(orgId => orgs[orgId].name)}\r\n        />\r\n        <div className=\"sk-orgs-header\">\r\n          <Button onClick={this.toggleNewOrgForm} icon=\"plus\">\r\n            Create Org\r\n          </Button>\r\n        </div>\r\n        <div className=\"sk-orgs-content\">\r\n          {Object.keys(orgs).map(orgId => {\r\n            const org = orgs[orgId];\r\n            return (\r\n              <OrgThumbnail\r\n                key={org.customId}\r\n                org={org}\r\n                onClick={() => this.setCurrentOrg(orgId)}\r\n                className=\"sk-orgs-thumbnail\"\r\n              />\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Orgs;\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { makeBlockHandlers } from \"../../models/block/block-handlers\";\r\nimport Orgs from \"./Orgs.jsx\";\r\nimport netInterface from \"../../net\";\r\nimport { mergeDataByPath } from \"../../redux/actions/data\";\r\nimport { makeMultiple } from \"../../redux/actions/make\";\r\n\r\nclass OrgsContainer extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      error: null\r\n    };\r\n  }\r\n\r\n  async componentDidMount() {\r\n    if (!this.props.rootBlock) {\r\n      try {\r\n        await this.props.fetchRootData();\r\n      } catch (error) {\r\n        this.setState({ error });\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { orgs } = this.props;\r\n    const { error } = this.state;\r\n\r\n    if (!orgs) {\r\n      return \"Loading\";\r\n    } else if (error) {\r\n      return \"An error occurred\";\r\n    }\r\n\r\n    return <Orgs {...this.props} />;\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return { state };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n  return { dispatch };\r\n}\r\n\r\nfunction mergeProps({ state }, { dispatch }) {\r\n  const blockHandlers = makeBlockHandlers({\r\n    dispatch,\r\n    user: state.user.user\r\n  });\r\n\r\n  return {\r\n    blockHandlers,\r\n    rootBlock: state.rootBlock,\r\n    user: state.user.user,\r\n    orgs: state.orgs,\r\n    async fetchRootData() {\r\n      const { blocks } = await netInterface(\"block.getRoleBlocks\");\r\n\r\n      let rootBlock = null;\r\n      let orgs = {};\r\n      blocks.forEach(blk => {\r\n        if (blk.type === \"root\") {\r\n          rootBlock = blk;\r\n          rootBlock.path = `rootBlock`;\r\n        } else if (blk.type === \"org\") {\r\n          orgs[blk.customId] = blk;\r\n          blk.path = `orgs.${blk.customId}`;\r\n        }\r\n      });\r\n\r\n      let actions = [\r\n        mergeDataByPath(rootBlock.path, rootBlock),\r\n        mergeDataByPath(\"orgs\", orgs)\r\n      ];\r\n\r\n      dispatch(makeMultiple(actions));\r\n    }\r\n  };\r\n}\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps,\r\n  mergeProps\r\n)(OrgsContainer);\r\n","import React from \"react\";\r\nimport { Button } from \"antd\";\r\nimport \"./notification-body.css\";\r\n\r\nconst accepted = \"accepted\";\r\nconst declined = \"declined\";\r\n\r\nclass NotificationBody extends React.Component {\r\n  getUserResponse(notification) {\r\n    if (Array.isArray(notification.statusHistory)) {\r\n      const possibleUserResponses = {\r\n        [accepted]: true,\r\n        [declined]: true\r\n      };\r\n\r\n      return notification.statusHistory.find(({ status }) => {\r\n        return possibleUserResponses[status];\r\n      });\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  render() {\r\n    const { notification, onRespond } = this.props;\r\n    const response = this.getUserResponse(notification);\r\n\r\n    return (\r\n      <div className=\"notification-body\">\r\n        <div className=\"notification-body-head\">\r\n          <h4>Collaboration Request From {notification.from.blockName}</h4>\r\n          <span>{new Date(notification.createdAt).toDateString()}</span>\r\n        </div>\r\n        <p className=\"notification-body-body\">{notification.body}</p>\r\n        <div className=\"notification-body-btns\">\r\n          {!response ? (\r\n            <>\r\n              <Button\r\n                type=\"primary\"\r\n                onClick={() => onRespond(notification, accepted)}\r\n              >\r\n                Accept\r\n              </Button>\r\n              <Button\r\n                type=\"danger\"\r\n                onClick={() => onRespond(notification, accepted)}\r\n                style={{ margin: \"0 1em\" }}\r\n              >\r\n                Decline\r\n              </Button>\r\n            </>\r\n          ) : (\r\n            <p>\r\n              You -{\" \"}\r\n              <span\r\n                style={{\r\n                  backgroundColor: \"#ccc\",\r\n                  padding: \"8px\",\r\n                  borderRadius: \"4px\"\r\n                }}\r\n              >\r\n                {response.status}\r\n              </span>\r\n            </p>\r\n          )}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default NotificationBody;\r\n","import React from \"react\";\r\nimport { getWindowWidth } from \"../../utils/window\";\r\nimport throttle from \"lodash/throttle\";\r\nimport { Row, Col } from \"antd\";\r\nimport NotificationBody from \"./NotificationBody.jsx\";\r\nimport \"./notification-list.css\";\r\n\r\nfunction NotificationListItem(props) {\r\n  const { notification, isSelected, onClick } = props;\r\n  const style = isSelected\r\n    ? {\r\n        backgroundColor: \"rgb(66,133,244)\",\r\n        color: \"white\"\r\n      }\r\n    : notification.readAt > 0\r\n    ? {\r\n        color: \"grey\"\r\n      }\r\n    : null;\r\n\r\n  return (\r\n    <div onClick={onClick} className=\"notifications-list-item\" style={style}>\r\n      <h5>Collaboration Request From {notification.from.blockName}</h5>\r\n      <span>{new Date(notification.createdAt).toDateString()}</span>\r\n    </div>\r\n  );\r\n}\r\n\r\nclass NotificationList extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      renderType: this.getRenderType(),\r\n      currentNotification: null\r\n    };\r\n\r\n    this.setRenderType = throttle(this.setRenderType, 100, { leading: true });\r\n  }\r\n\r\n  componentDidMount() {\r\n    window.addEventListener(\"resize\", this.setRenderType);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener(\"resize\", this.setRenderType);\r\n  }\r\n\r\n  onClickNotication = id => {\r\n    if (this.state.currentNotification !== id) {\r\n      this.setState({ currentNotification: id });\r\n      this.props.onClickNotification(this.props.notifications[id]);\r\n    }\r\n  };\r\n\r\n  setRenderType() {\r\n    const renderType = this.getRenderType();\r\n    if (this.state.renderType !== renderType) {\r\n      this.setRenderType({ renderType });\r\n    }\r\n  }\r\n\r\n  getRenderType() {\r\n    return getWindowWidth() > 500 ? \"desktop\" : \"mobile\";\r\n  }\r\n\r\n  renderCurrentNotification() {\r\n    const { notifications, onRespond } = this.props;\r\n    const { currentNotification } = this.state;\r\n\r\n    return (\r\n      <NotificationBody\r\n        notification={notifications[currentNotification]}\r\n        onRespond={onRespond}\r\n      />\r\n    );\r\n  }\r\n\r\n  renderNotifications() {\r\n    const { notifications } = this.props;\r\n    const { currentNotification } = this.state;\r\n    return (\r\n      <div className=\"notifications-list-list\">\r\n        {Object.keys(notifications).map(notificationId => {\r\n          const notification = notifications[notificationId];\r\n          return (\r\n            <NotificationListItem\r\n              key={notificationId}\r\n              notification={notification}\r\n              onClick={() => this.onClickNotication(notification.customId)}\r\n              isSelected={\r\n                currentNotification === notification.customId ? true : false\r\n              }\r\n            />\r\n          );\r\n        })}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const { renderType, currentNotification } = this.state;\r\n\r\n    if (renderType === \"mobile\") {\r\n      if (currentNotification) {\r\n        return this.renderCurrentNotification();\r\n      }\r\n\r\n      return this.renderNotifications();\r\n    }\r\n\r\n    return (\r\n      <Row style={{ height: \"100%\" }}>\r\n        <Col style={{ height: \"100%\" }} span={8}>\r\n          {this.renderNotifications()}\r\n        </Col>\r\n        <Col style={{ height: \"100%\" }} span={16}>\r\n          {currentNotification ? this.renderCurrentNotification() : null}\r\n        </Col>\r\n      </Row>\r\n    );\r\n  }\r\n}\r\n\r\nexport default NotificationList;\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport netInterface from \"../../net\";\r\nimport { setDataByPath, mergeDataByPath } from \"../../redux/actions/data\";\r\nimport { makeMultiple } from \"../../redux/actions/make\";\r\nimport NotificationList from \"./NotificationList.jsx\";\r\n\r\nclass NotificationsContainer extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      error: null\r\n    };\r\n  }\r\n\r\n  async componentDidMount() {\r\n    if (!this.props.notifications) {\r\n      try {\r\n        await this.props.fetchNotifications();\r\n      } catch (error) {\r\n        this.setState({ error });\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { notifications, onRespond, onClickNotification } = this.props;\r\n    const { error } = this.state;\r\n\r\n    if (!notifications) {\r\n      return \"Loading\";\r\n    } else if (error) {\r\n      return error.message || \"An error occurred\";\r\n    }\r\n\r\n    return (\r\n      <NotificationList\r\n        notifications={notifications}\r\n        onRespond={onRespond}\r\n        onClickNotification={onClickNotification}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return { state };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n  return { dispatch };\r\n}\r\n\r\nfunction mergeProps({ state }, { dispatch }, ownProps) {\r\n  return {\r\n    notifications: state.notifications,\r\n    async onClickNotification(notification) {\r\n      if (!notification.readAt) {\r\n        let update = { readAt: Date.now() };\r\n        dispatch(\r\n          mergeDataByPath(`notifications.${notification.customId}`, update)\r\n        );\r\n        netInterface(\"user.updateCollaborationRequest\", notification, update);\r\n      }\r\n    },\r\n\r\n    async onRespond(notification, response) {\r\n      function requestIsValid(statusHistory) {\r\n        const invalidStatuses = {\r\n          accepted: true,\r\n          declined: true,\r\n          revoked: true\r\n        };\r\n\r\n        if (Array.isArray(statusHistory)) {\r\n          return !!!statusHistory.find(({ status }) => {\r\n            return invalidStatuses[status];\r\n          });\r\n        }\r\n\r\n        return false;\r\n      }\r\n\r\n      let statusHistory = notification.statusHistory;\r\n\r\n      if (requestIsValid(statusHistory)) {\r\n        statusHistory.push({\r\n          status: response,\r\n          date: Date.now()\r\n        });\r\n\r\n        let update = { statusHistory };\r\n        dispatch(\r\n          mergeDataByPath(`notifications.${notification.customId}`, update)\r\n        );\r\n\r\n        let result = await netInterface(\r\n          \"user.respondToCollaborationRequest\",\r\n          notification,\r\n          response\r\n        );\r\n\r\n        if (response === \"accepted\" && result && result.block) {\r\n          const { block } = result;\r\n          block.path = `orgs.${block.customId}`;\r\n          dispatch(\r\n            makeMultiple([\r\n              setDataByPath(block.path, block),\r\n              mergeDataByPath(`user.user.orgs`, [block.customId])\r\n            ])\r\n          );\r\n        }\r\n      }\r\n    },\r\n\r\n    async fetchNotifications() {\r\n      let result = await netInterface(\"user.getCollaborationRequests\");\r\n      let { requests: notifications } = result;\r\n      notifications = notifications || [];\r\n      let notificationsObj = {};\r\n      notifications.forEach(notification => {\r\n        notificationsObj[notification.customId] = notification;\r\n      });\r\n\r\n      dispatch(mergeDataByPath(\"notifications\", notificationsObj));\r\n    }\r\n  };\r\n}\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps,\r\n  mergeProps\r\n)(NotificationsContainer);\r\n","import React from \"react\";\r\nimport ComputeForm from \"../compute-form/ComputeForm.jsx\";\r\nimport { Input, Button, Form } from \"antd\";\r\nimport { userDescriptor } from \"../../models/user/descriptor\";\r\nimport { makeConfirmValidator } from \"../../utils/descriptor\";\r\n\r\nclass Signup extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    const confirmPasswordValidator = makeConfirmValidator(\r\n      \"password\",\r\n      \"confirmPassword\",\r\n      props.form,\r\n      \"password do not match\"\r\n    );\r\n\r\n    const confirmEmailValidator = makeConfirmValidator(\r\n      \"email\",\r\n      \"confirmEmail\",\r\n      props.form,\r\n      \"email does not match\"\r\n    );\r\n\r\n    this.model = {\r\n      fields: {\r\n        name: {\r\n          component: Input,\r\n          label: \"Name\",\r\n          props: { autoComplete: \"name\" },\r\n          labelCol: null,\r\n          wrapperCol: null,\r\n          rules: userDescriptor.name\r\n        },\r\n        email: {\r\n          component: Input,\r\n          label: \"Email\",\r\n          props: { autoComplete: \"email\" },\r\n          labelCol: null,\r\n          wrapperCol: null,\r\n          rules: userDescriptor.email\r\n        },\r\n        confirmEmail: {\r\n          component: Input,\r\n          label: \"Confirm Email\",\r\n          props: { autoComplete: \"email\" },\r\n          labelCol: null,\r\n          wrapperCol: null,\r\n          rules: [\r\n            { required: true, type: \"string\", validator: confirmEmailValidator }\r\n          ]\r\n        },\r\n        password: {\r\n          hasFeedback: true,\r\n          component: Input,\r\n          props: { type: \"password\", autoComplete: \"new-password\" },\r\n          label: \"Password\",\r\n          labelCol: null,\r\n          wrapperCol: null,\r\n          rules: [\r\n            ...userDescriptor.password,\r\n            {\r\n              required: true,\r\n              type: \"string\",\r\n              validator: confirmPasswordValidator\r\n            }\r\n          ],\r\n          extra: \"min of 5 chars including an alphabet, a number, and a symbol\"\r\n        },\r\n        confirmPassword: {\r\n          hasFeedback: true,\r\n          component: Input,\r\n          props: { type: \"password\", autoComplete: \"new-password\" },\r\n          label: \"Confirm Password\",\r\n          labelCol: null,\r\n          wrapperCol: null,\r\n          rules: [\r\n            {\r\n              required: true,\r\n              type: \"string\",\r\n              validator: confirmPasswordValidator\r\n            }\r\n          ]\r\n        },\r\n        submit: {\r\n          component: Button,\r\n          props: {\r\n            type: \"primary\",\r\n            children: \"Signup\",\r\n            block: true,\r\n            htmlType: \"submit\"\r\n          },\r\n          labelCol: null,\r\n          wrapperCol: null,\r\n          noDecorate: true\r\n        }\r\n      },\r\n      formProps: {\r\n        hideRequiredMark: true\r\n      },\r\n      onSubmit: this.onSubmit\r\n    };\r\n  }\r\n\r\n  onSubmit = async data => {\r\n    return this.props.onSubmit(data);\r\n  };\r\n\r\n  render() {\r\n    return <ComputeForm model={this.model} form={this.props.form} />;\r\n  }\r\n}\r\n\r\nexport default Form.create()(Signup);\r\n","import netInterface from \"../../net\";\r\nimport { mergeDataByPath } from \"../../redux/actions/data\";\r\nimport { connect } from \"react-redux\";\r\nimport Signup from \"./Signup\";\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n  return {\r\n    onSubmit: async data => {\r\n      let result = await netInterface(\"user.signup\", data);\r\n\r\n      if (result.user && result.token) {\r\n        dispatch(mergeDataByPath(\"user\", result));\r\n      } else {\r\n        throw new Error(\"an error occurred\");\r\n      }\r\n    }\r\n  };\r\n}\r\n\r\nexport default connect(\r\n  null,\r\n  mapDispatchToProps\r\n)(Signup);\r\n","import React from \"react\";\r\nimport ComputeForm from \"../compute-form/ComputeForm.jsx\";\r\nimport { Input, Button, Checkbox, Form } from \"antd\";\r\nimport { userDescriptor } from \"../../models/user/descriptor\";\r\n\r\nclass Login extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    const self = this;\r\n    this.model = {\r\n      fields: {\r\n        email: {\r\n          component: Input,\r\n          props: { autoComplete: \"email\" },\r\n          label: \"Email\",\r\n          labelCol: null,\r\n          wrapperCol: null,\r\n          rules: userDescriptor.email\r\n        },\r\n        password: {\r\n          component: Input,\r\n          props: { type: \"password\", autoComplete: \"current-password\" },\r\n          label: \"Password\",\r\n          labelCol: null,\r\n          wrapperCol: null,\r\n          rules: userDescriptor.password\r\n        },\r\n        remember: {\r\n          component: Checkbox,\r\n          valuePropName: \"checked\",\r\n          props: { children: \"Remember me\" },\r\n          initialValue: true\r\n        },\r\n        submit: {\r\n          component: Button,\r\n          props: {\r\n            type: \"primary\",\r\n            children: \"Login\",\r\n            block: true,\r\n            htmlType: \"submit\"\r\n          },\r\n          labelCol: null,\r\n          wrapperCol: null,\r\n          noDecorate: true\r\n        }\r\n      },\r\n      formProps: {\r\n        hideRequiredMark: true\r\n      },\r\n      onSubmit: self.onSubmit\r\n    };\r\n  }\r\n\r\n  onSubmit = async data => {\r\n    return this.props.onSubmit(data);\r\n  };\r\n\r\n  render() {\r\n    return <ComputeForm model={this.model} form={this.props.form} />;\r\n  }\r\n}\r\n\r\nexport default Form.create()(Login);\r\n","import netInterface from \"../../net\";\r\nimport { mergeDataByPath } from \"../../redux/actions/data\";\r\nimport { connect } from \"react-redux\";\r\nimport Login from \"./Login\";\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n  return {\r\n    onSubmit: async data => {\r\n      let result = await netInterface(\"user.login\", data);\r\n\r\n      if (result && result.user && result.token) {\r\n        dispatch(mergeDataByPath(\"user\", result));\r\n      } else {\r\n        throw new Error(\"an error occurred\");\r\n      }\r\n    }\r\n  };\r\n}\r\n\r\nexport default connect(\r\n  null,\r\n  mapDispatchToProps\r\n)(Login);\r\n","import React from \"react\";\r\nimport ComputeForm from \"../compute-form/ComputeForm.jsx\";\r\nimport { Input, Button, Form, message } from \"antd\";\r\nimport { userDescriptor } from \"../../models/user/descriptor\";\r\nimport { makeConfirmValidator } from \"../../utils/descriptor\";\r\n\r\nclass ForgotPassword extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    const confirmEmailValidator = makeConfirmValidator(\r\n      \"email\",\r\n      \"confirmEmail\",\r\n      props.form,\r\n      \"email does not match\"\r\n    );\r\n\r\n    this.model = {\r\n      fields: {\r\n        email: {\r\n          component: Input.Password,\r\n          label: \"Email\",\r\n          labelCol: null,\r\n          wrapperCol: null,\r\n          rules: [...userDescriptor.email, { validator: confirmEmailValidator }]\r\n        },\r\n        confirmEmail: {\r\n          component: Input,\r\n          label: \"Confirm Email\",\r\n          labelCol: null,\r\n          wrapperCol: null,\r\n          rules: [...userDescriptor.email, { validator: confirmEmailValidator }]\r\n        },\r\n        submit: {\r\n          component: Button,\r\n          props: {\r\n            type: \"primary\",\r\n            children: \"Submit\",\r\n            block: true,\r\n            htmlType: \"submit\"\r\n          },\r\n          labelCol: null,\r\n          wrapperCol: null,\r\n          noDecorate: true\r\n        }\r\n      },\r\n      formProps: {\r\n        hideRequiredMark: true\r\n      },\r\n      onSubmit: this.onSubmit\r\n    };\r\n  }\r\n\r\n  onSubmit = async data => {\r\n    await this.props.onSubmit(data);\r\n    message.success(\"request successful\");\r\n  };\r\n\r\n  render() {\r\n    return <ComputeForm model={this.model} form={this.props.form} />;\r\n  }\r\n}\r\n\r\nexport default Form.create()(ForgotPassword);\r\n","import netInterface from \"../../net\";\r\nimport { connect } from \"react-redux\";\r\nimport ForgotPassword from \"./ForgotPassword\";\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n  return {\r\n    onSubmit: async data => {\r\n      await netInterface(\"user.forgotPassword\", data);\r\n    }\r\n  };\r\n}\r\n\r\nexport default connect(\r\n  null,\r\n  mapDispatchToProps\r\n)(ForgotPassword);\r\n","import React from \"react\";\r\nimport ComputeForm from \"../compute-form/ComputeForm.jsx\";\r\nimport { Input, Button, Form, message } from \"antd\";\r\nimport { userDescriptor } from \"../../models/user/descriptor\";\r\nimport { makeConfirmValidator } from \"../../utils/descriptor\";\r\n\r\nclass ChangePassword extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    const confirmPasswordValidator = makeConfirmValidator(\r\n      \"password\",\r\n      \"confirmPassword\",\r\n      props.form,\r\n      \"password do not match\"\r\n    );\r\n\r\n    this.model = {\r\n      fields: {\r\n        password: {\r\n          component: Input.Password,\r\n          props: { type: \"password\" },\r\n          label: \"Password\",\r\n          labelCol: null,\r\n          wrapperCol: null,\r\n          rules: [\r\n            ...userDescriptor.password,\r\n            { validator: confirmPasswordValidator }\r\n          ]\r\n        },\r\n        confirmPassword: {\r\n          component: Input.Password,\r\n          props: { type: \"password\" },\r\n          label: \"Confirm Password\",\r\n          labelCol: null,\r\n          wrapperCol: null,\r\n          rules: [\r\n            ...userDescriptor.password,\r\n            { validator: confirmPasswordValidator }\r\n          ]\r\n        },\r\n        submit: {\r\n          component: Button,\r\n          props: {\r\n            type: \"primary\",\r\n            children: \"Submit\",\r\n            block: true,\r\n            htmlType: \"submit\"\r\n          },\r\n          labelCol: null,\r\n          wrapperCol: null,\r\n          noDecorate: true\r\n        }\r\n      },\r\n      formProps: {\r\n        hideRequiredMark: true\r\n      },\r\n      onSubmit: this.onSubmit\r\n    };\r\n  }\r\n\r\n  onSubmit = async data => {\r\n    await this.props.onSubmit(data);\r\n    message.success(\"change password succeeded\");\r\n  };\r\n\r\n  render() {\r\n    return <ComputeForm model={this.model} form={this.props.form} />;\r\n  }\r\n}\r\n\r\nexport default Form.create()(ChangePassword);\r\n","import netInterface from \"../../net\";\r\nimport { mergeDataByPath } from \"../../redux/actions/data\";\r\nimport { connect } from \"react-redux\";\r\nimport ChangePassword from \"./ChangePassword\";\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n  return {\r\n    onSubmit: async data => {\r\n      let result = await netInterface(\"user.changePasswordWithToken\", data);\r\n\r\n      if (result.user && result.token) {\r\n        dispatch(mergeDataByPath(\"user\", result));\r\n      } else {\r\n        throw new Error(\"an error occurred\");\r\n      }\r\n    }\r\n  };\r\n}\r\n\r\nexport default connect(\r\n  null,\r\n  mapDispatchToProps\r\n)(ChangePassword);\r\n","import React from \"react\";\r\nimport { Switch, Route, withRouter, Redirect } from \"react-router-dom\";\r\nimport Web from \"./Web.jsx\";\r\nimport AppMenu from \"./components/app-menu/AppMenu.jsx\";\r\nimport RootGroupContainer from \"./components/group/RootGroupContainer.jsx\";\r\nimport OrgsContainer from \"./components/org/OrgsContainer.jsx\";\r\nimport NotificationsContainer from \"./components/notification/NotificationsContainer.jsx\";\r\nimport SignupContainer from \"./components/signup/SignupContainer.jsx\";\r\nimport LoginContainer from \"./components/login/LoginContainer.jsx\";\r\nimport ForgotPasswordContainer from \"./components/password/ForgotPsContainer.jsx\";\r\nimport ChangePasswordWithTokenContainer from \"./components/password/ChangePsWithTokenContainer.jsx\";\r\nimport { Col, Row, notification } from \"antd\";\r\nimport { connect } from \"react-redux\";\r\nimport { mergeDataByPath, clearState } from \"./redux/actions/data\";\r\nimport netInterface from \"./net/index\";\r\n\r\nfunction MainApp(props) {\r\n  const { onLogout } = props;\r\n\r\n  return (\r\n    <AppMenu\r\n      currentItemKey=\"orgs\"\r\n      menuItems={[\r\n        {\r\n          key: \"notifications\",\r\n          label: \"Notifications\",\r\n          component: NotificationsContainer\r\n        },\r\n        {\r\n          key: \"personal\",\r\n          label: \"Personal\",\r\n          component: RootGroupContainer\r\n        },\r\n        {\r\n          key: \"orgs\",\r\n          label: \"Orgs\",\r\n          component: OrgsContainer\r\n        },\r\n        {\r\n          key: \"logout\",\r\n          label: \"Logout\",\r\n          component: null\r\n        }\r\n      ]}\r\n      onSelectMenu={key => {\r\n        if (key === \"logout\" && onLogout) {\r\n          onLogout();\r\n        }\r\n      }}\r\n    />\r\n  );\r\n}\r\n\r\nfunction mainAppMapStateToProps(state, props) {\r\n  return {\r\n    ...props\r\n  };\r\n}\r\n\r\nfunction mainAppMapDispatchToProps(dispatch) {\r\n  return {\r\n    onLogout() {\r\n      dispatch(clearState());\r\n      netInterface(\"user.logout\");\r\n    }\r\n  };\r\n}\r\n\r\nconst MainAppContainer = connect(\r\n  mainAppMapStateToProps,\r\n  mainAppMapDispatchToProps\r\n)(MainApp);\r\n\r\nfunction renderComponent(component) {\r\n  return function() {\r\n    const ComponentX = component;\r\n    return (\r\n      <Row type=\"flex\" justify=\"center\">\r\n        <Col sm={24} md={12} lg={8} style={{ padding: \"1em\" }}>\r\n          <ComponentX />\r\n        </Col>\r\n      </Row>\r\n    );\r\n  };\r\n}\r\n\r\nclass App extends React.Component {\r\n  async componentDidMount() {\r\n    const { userIsLoggedIn, history, getSavedUserData } = this.props;\r\n\r\n    if (!userIsLoggedIn) {\r\n      if (window.location.pathname.indexOf(\"app\") !== -1) {\r\n        console.log(\"/\");\r\n        history.push(\"/\");\r\n      }\r\n\r\n      getSavedUserData();\r\n    } else {\r\n      if (window.location.pathname === \"/\") {\r\n        history.push(\"/app\");\r\n      }\r\n    }\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    const { userIsLoggedIn, history } = this.props;\r\n\r\n    if (userIsLoggedIn) {\r\n      if (window.location.pathname.indexOf(\"app\") === -1) {\r\n        history.push(\"/app\");\r\n      }\r\n    }\r\n  }\r\n\r\n  componentDidCatch(error) {\r\n    notification.error({\r\n      title: \"Error\",\r\n      message: \"An error ocurred\"\r\n    });\r\n\r\n    if (process.env.NODE_ENV !== \"production\") {\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { userIsLoggedIn } = this.props;\r\n\r\n    if (!userIsLoggedIn && window.location.pathname.indexOf(\"app\") !== -1) {\r\n      return <Redirect to=\"/\" />;\r\n    }\r\n\r\n    return (\r\n      <div style={{ height: \"100%\" }} className=\"app\">\r\n        <Switch>\r\n          <Route path=\"/signup\" render={renderComponent(SignupContainer)} />\r\n          <Route path=\"/login\" render={renderComponent(LoginContainer)} />\r\n          <Route\r\n            path=\"/forgot-password\"\r\n            render={renderComponent(ForgotPasswordContainer)}\r\n          />\r\n          <Route\r\n            path=\"/change-password\"\r\n            render={renderComponent(ChangePasswordWithTokenContainer)}\r\n          />\r\n          <Route path=\"/app\" component={MainAppContainer} />\r\n          <Route path=\"/\" exact component={Web} />\r\n        </Switch>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state, props) {\r\n  return {\r\n    ...props,\r\n    userIsLoggedIn: state.user && !!state.user.token\r\n  };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n  return {\r\n    async getSavedUserData() {\r\n      let result = await netInterface(\"user.getSavedUserData\");\r\n\r\n      if (result) {\r\n        dispatch(mergeDataByPath(\"user\", result));\r\n      }\r\n    }\r\n  };\r\n}\r\n\r\nexport default withRouter(\r\n  connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n  )(App)\r\n);\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport store from \"./redux/store\";\r\nimport { Provider } from \"react-redux\";\r\nimport App from \"./App\";\r\nimport { BrowserRouter } from \"react-router-dom\";\r\nimport \"./styles.css\";\r\nimport \"./sk-global.css\";\r\n\r\nif (process.env.NODE_ENV === \"development\") {\r\n  require(\"antd/dist/antd.css\");\r\n}\r\n\r\nconst rootElement = document.getElementById(\"root\");\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <BrowserRouter>\r\n      <App />\r\n    </BrowserRouter>\r\n  </Provider>,\r\n  rootElement\r\n);\r\n","const { errorFragment } = require(\"./error\");\r\n\r\nconst blockFragment = `\r\n  fragment blockFragment on Block {\r\n    customId\r\n    name\r\n    description\r\n    priority\r\n    expectedEndAt\r\n    createdAt\r\n    color\r\n    updatedAt\r\n    type\r\n    parents\r\n    createdBy\r\n    taskCollaborators {\r\n      userId\r\n      assignedAt\r\n      assignedBy\r\n      completedAt\r\n    }\r\n  }\r\n`;\r\n\r\nconst addBlockMutation = `\r\n  mutation AddBlockMutation ($block: AddBlockInput!) {\r\n    block {\r\n      addBlock (block: $block) {\r\n        errors {\r\n          field\r\n          message\r\n        }\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nconst updateBlockMutation = `\r\n  mutation UpdateBlockMutation ($block: BlockParamInput!, $data: UpdateBlockInput!) {\r\n    block {\r\n      updateBlock (block: $block, data: $data) {\r\n        errors {\r\n          field\r\n          message\r\n        }\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nconst deleteBlockMutation = `\r\n  mutation DeleteBlockMutation ($block: BlockParamInput!) {\r\n    block {\r\n      deleteBlock (block: $block) {\r\n        errors {\r\n          field\r\n          message\r\n        }\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nconst getRoleBlocksQuery = `\r\n  ${blockFragment}\r\n  ${errorFragment}\r\n  query GetRoleBlocksQuery {\r\n    block {\r\n      getRoleBlocks {\r\n        errors {\r\n          ...errorFragment\r\n        }\r\n        blocks {\r\n          ...blockFragment\r\n        }\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nconst getBlockChildrenQuery = `\r\n  ${blockFragment}\r\n  ${errorFragment}\r\n  query GetBlockChildrenQuery ($block: BlockParamInput!, $types: [String!]) {\r\n    block {\r\n      getBlockChildren (block: $block, types: $types) {\r\n        errors {\r\n          ...errorFragment\r\n        }\r\n        blocks {\r\n          ...blockFragment\r\n        }\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nconst addCollaboratorsMutation = `\r\n  mutation AddCollaborators (\r\n    $block: BlockParamInput!, \r\n    $collaborators: [AddCollaboratorInput!]!,\r\n    $body: String,\r\n    $expiresAt: Float\r\n  ) {\r\n    block {\r\n      addCollaborators (block: $block, collaborators: $collaborators, body: $body, expiresAt: $expiresAt) {\r\n        errors {\r\n          field\r\n          message\r\n        }\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nconst getCollaboratorsQuery = `\r\n  ${errorFragment}\r\n  query GetCollaboratorsQuery ($block: BlockParamInput!) {\r\n    block {\r\n      getCollaborators (block: $block) {\r\n        errors {\r\n          ...errorFragment\r\n        }\r\n        collaborators {\r\n          name\r\n          email\r\n          customId\r\n        }\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nconst getCollabRequestsQuery = `\r\n  ${errorFragment}\r\n  query GetCollabRequestsQuery ($block: BlockParamInput!) {\r\n    block {\r\n      getCollabRequests (block: $block) {\r\n        errors {\r\n          ...errorFragment\r\n        }\r\n        requests {\r\n          customId\r\n          from {\r\n            userId\r\n            name\r\n            blockId\r\n            blockName\r\n            blockType\r\n          }\r\n          createdAt\r\n          body\r\n          readAt\r\n          to {\r\n            email\r\n            userId\r\n          }\r\n          statusHistory {\r\n            status\r\n            date\r\n          }\r\n          sentEmailHistory {\r\n            date\r\n          }\r\n          type\r\n          root\r\n        }\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nconst removeCollaboratorMutation = `\r\n  ${errorFragment}\r\n  mutation RemoveCollaboratorsMutation ($block: BlockParamInput!, $collaborator: String!) {\r\n    block {\r\n      removeCollaborator (block: $block, collaborator: $collaborator) {\r\n        errors {\r\n          ...errorFragment\r\n        }\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nconst toggleTaskMutation = `\r\n  ${errorFragment}\r\n  mutation ToggleTaskMutation ($block: BlockParamInput!,  $data: Boolean!) {\r\n    block {\r\n       toggleTask (block: $block, data: $data) {\r\n        errors {\r\n          ...errorFragment\r\n        }\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nconst revokeRequestMutation = `\r\n  ${errorFragment}\r\n  mutation RevokeRequestMutation ($block: BlockParamInput!, $request: String!) {\r\n    block {\r\n       revokeRequest (block: $block, request: $request) {\r\n        errors {\r\n          ...errorFragment\r\n        }\r\n      }\r\n    }\r\n  }\r\n  `;\r\n\r\nmodule.exports = {\r\n  addBlockMutation,\r\n  updateBlockMutation,\r\n  deleteBlockMutation,\r\n  getBlockChildrenQuery,\r\n  blockFragment,\r\n  addCollaboratorsMutation,\r\n  getCollabRequestsQuery,\r\n  getCollaboratorsQuery,\r\n  getRoleBlocksQuery,\r\n  removeCollaboratorMutation,\r\n  toggleTaskMutation,\r\n  revokeRequestMutation\r\n};\r\n","function trim(value) {\r\n  if (value.trim) {\r\n    return value.trim();\r\n  }\r\n}\r\n\r\nconst textPattern = {\r\n  pattern: /\\w+/,\r\n  message: \"only alphanumeric characters allowed\"\r\n};\r\n\r\n// const passwordPattern = /^(?=.*[A-Za-z])(?=.*\\d)(?=.*[$@$!%*#?&])[A-Za-z\\d$@$!%*#?&]{5,}$/;\r\nconst passwordPattern = /^[A-Za-z\\d$@$!%*#?&]$/;\r\nconst userDescriptor = {\r\n  name: [\r\n    { type: \"string\", required: true, max: 50, transform: trim },\r\n    textPattern\r\n  ],\r\n  email: [{ type: \"email\", required: true, max: 250, transform: trim }],\r\n  password: [\r\n    {\r\n      required: true,\r\n      type: \"string\"\r\n    },\r\n    {\r\n      max: 50,\r\n      message: \"password is too long\"\r\n    },\r\n    {\r\n      pattern: passwordPattern,\r\n      message: \"password is invalid\"\r\n    }\r\n  ]\r\n};\r\n\r\nmodule.exports = {\r\n  userDescriptor\r\n};\r\n","export const MERGE = \"MERGE\";\r\nexport const DELETE = \"DELETE\";\r\nexport const MULTIPLE = \"MULTIPLE\";\r\nexport const SET = \"SET\";\r\nexport const CLEAR_STATE = \"CLEAR_STATE\";\r\n","export function devConsole(type, location = \"--\") {\r\n  return function(...args) {\r\n    if (process.env.NODE_ENV === \"development\") {\r\n      console.log(`-- ${location} --`);\r\n      console[type](...args);\r\n    }\r\n  };\r\n}\r\n\r\nexport function devLog(...args) {\r\n  devConsole(\"log\")(...args);\r\n}\r\n\r\nexport function devError(...args) {\r\n  devConsole(\"error\")(...args);\r\n}\r\n","import NetError from \"./NetError\";\r\nimport get from \"lodash/get\";\r\nimport { devError } from \"../utils/log\";\r\n// import dotProp from \"dot-prop-immutable\";\r\n\r\nconst serverAddr =\r\n  process.env.NODE_ENV === \"development\"\r\n    ? `http://localhost:5000/graphql`\r\n    : \"/graphql\";\r\n\r\n// function getDataFromResult(result, path) {\r\n//   return dotProp.get(result, path);\r\n// }\r\n\r\nexport default async function query(headers, netQuery, variables, process) {\r\n  try {\r\n    let hd = {\r\n      \"Content-Type\": \"application/json\",\r\n      ...headers\r\n    };\r\n\r\n    const result = await fetch(serverAddr, {\r\n      headers: hd,\r\n      body: JSON.stringify({\r\n        query: netQuery,\r\n        variables\r\n      }),\r\n      method: \"POST\",\r\n      mode: \"cors\"\r\n    });\r\n\r\n    if (result.ok) {\r\n      let resultBody = await result.json();\r\n\r\n      resultBody =\r\n        typeof process === \"string\"\r\n          ? get(resultBody, process)\r\n          : process(resultBody);\r\n\r\n      if (resultBody && resultBody.errors) {\r\n        throw new NetError(resultBody.errors);\r\n      }\r\n\r\n      return resultBody;\r\n    }\r\n\r\n    throw new NetError(result.statusText || \"an error occurred\");\r\n  } catch (error) {\r\n    devError(error);\r\n\r\n    if (error.name === \"NetError\") {\r\n      throw error;\r\n    }\r\n\r\n    throw new NetError(\"an error occurred\");\r\n  }\r\n}\r\n","class NetFieldError {\r\n  constructor(field, errors) {\r\n    this.field = field;\r\n    this.errors = Array.isArray(errors) ? errors : [JSON.stringify(errors)];\r\n    this.name = \"NetFieldError\";\r\n  }\r\n}\r\n\r\nexport default class NetError extends Error {\r\n  constructor(errors) {\r\n    super();\r\n    this.name = \"NetError\";\r\n    this.errors = [];\r\n    if (Array.isArray(errors)) {\r\n      this.errors = errors.map(\r\n        error => new NetFieldError(error.field, error.errors)\r\n      );\r\n    } else if (typeof errors === \"object\") {\r\n      this.errors.push(new NetFieldError(errors.field, errors.errors));\r\n    } else {\r\n      this.errors.push(new NetFieldError(\"error\", errors));\r\n    }\r\n  }\r\n}\r\n","import { createStore } from \"redux\";\r\nimport reducer from \"./reducers/index\";\r\n\r\nlet storeData = {};\r\n\r\n// if (process.env.NODE_ENV === \"development\") {\r\n//   let storeDataStr = sessionStorage.getItem(\"store\");\r\n//   try {\r\n//     storeData = storeDataStr ? JSON.parse(storeDataStr) : {};\r\n//   } catch (error) {\r\n//     console.error(error);\r\n//     storeData = {};\r\n//   }\r\n// }\r\n\r\nconst store = createStore(\r\n  reducer,\r\n  storeData,\r\n  window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__()\r\n);\r\n\r\nif (process.env.NODE_ENV === \"development\") {\r\n  // store.subscribe(() => {\r\n  //   console.log(store.getState());\r\n  // });\r\n  // document.addEventListener(\"beforeunload\", () => {\r\n  //   console.log(\"error\");\r\n  //   sessionStorage.setItem(\"store\", JSON.stringify(store));\r\n  // });\r\n  // document.addEventListener(\"error\", () => {\r\n  //   console.log(\"error\");\r\n  //   //sessionStorage.setItem(\"store\", JSON.stringify(store));\r\n  // });\r\n}\r\n\r\nexport default store;\r\n","import {\r\n  MERGE,\r\n  DELETE,\r\n  MULTIPLE,\r\n  SET,\r\n  CLEAR_STATE\r\n} from \"../constants/reducer\";\r\nimport dotProp from \"dot-prop-immutable\";\r\n\r\nexport default function reducer(state = {}, action) {\r\n  switch (action.type) {\r\n    case MERGE:\r\n      return dotProp.merge(state, action.path, action.data);\r\n\r\n    case SET:\r\n      return dotProp.set(state, action.path, action.data);\r\n\r\n    case DELETE:\r\n      return dotProp.delete(state, action.path);\r\n\r\n    case MULTIPLE:\r\n      return action.actions.reduce(\r\n        (accumulator, todo) => reducer(accumulator, todo, true),\r\n        state\r\n      );\r\n\r\n    case CLEAR_STATE:\r\n      return {};\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n"],"sourceRoot":""}