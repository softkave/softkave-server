(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{106:function(e,t,r){"use strict";var n=r(126),a=r(55),o=r(38),l=r.n(o);var s=Object(n.b)(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;switch(r.type){case a.c:return l.a.merge(t,r.path,r.data);case a.e:return l.a.set(t,r.path,r.data);case a.b:return l.a.delete(t,r.path);case a.d:return r.actions.reduce(function(t,r){return e(t,r,!0)},t);case a.a:return{};default:return t}},{},window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());t.a=s},226:function(e,t,r){"use strict";r.r(t);var n=r(7),a=r.n(n),o=r(15),l=r(48),s="\n  query UserExistsQuery (email: String!) {\n    user {\n      userExists(email: $email) {\n        errors {\n          field\n          message\n        }\n        userExists\n      }\n    }\n  }\n",c="\n  mutation UpdateUserMutation($data: UpdateUserInput!) {\n    user {\n      updateUser(user: $user) {\n        errors {\n          field\n          message\n        }\n      }\n    }\n  }\n",i="\n  fragment userQueryResult on UserQueryResult {\n    errors {\n      field\n      message\n    }\n    user {\n      name\n      email\n      customId\n      createdAt\n      lastNotificationCheckTime\n    }\n    token\n  }\n",u="\n  ".concat(i,"\n  mutation UserSignupMutation ($user: UserSignupInput!) {\n    user {\n      signup (user: $user) {\n        ...userQueryResult\n      }\n    }\n  }\n"),p="\n  ".concat(i,"\n  mutation UserLoginMutation ($email: String!, $password: String!) {\n    user {\n      login (email: $email, password: $password) {\n        ...userQueryResult\n      }\n    }\n  }\n"),d="\n  mutation UserForgotPasswordMutation ($email: String!) {\n    user {\n      forgotPassword {\n        errors {\n          field\n          message\n        }\n      }\n    }\n  }\n",m="\n  ".concat(i,"\n  mutation UserChangePasswordMutation ($password: String!) {\n    user {\n      changePassword (password: $password) {\n        ...userQueryResult\n      }\n    }\n  }\n"),b="\n  ".concat(i,"\n  mutation UserChangeWithTokenPasswordMutation (\n    $password: String!\n  ) {\n    user {\n      changePasswordWithToken(password: $password) {\n        ...userQueryResult\n      }\n    }\n  }\n"),f="\n  query GetCollaborationRequestsQuery {\n    user {\n      getCollaborationRequests {\n        errors {\n          field\n          message\n        }\n        requests {\n          customId\n          from {\n            userId\n            name\n            blockId\n            blockName\n            blockType\n          }\n          createdAt\n          body\n          readAt\n          to {\n            email\n            userId\n          }\n          statusHistory {\n            status\n            date\n          }\n          sentEmailHistory {\n            date\n          }\n          type\n          root\n        }\n      }\n    }\n  }\n",h="\n  ".concat(i,"\n  query GetUserDataQuery {\n    user {\n      getUserData {\n        ...userQueryResult\n      }\n    }\n  }\n"),g="\n  mutation UpdateCollaborationRequestMutation (\n    $customId: String!, $data: UpdateCollaborationRequestInput!\n  ) {\n    user {\n      updateCollaborationRequest (customId: $customId, data: $data) {\n        errors {\n          field\n          message\n        }\n      }\n    }\n  }\n",k="\n  ".concat(l.blockFragment,"\n  mutation RespondToCollaborationRequestMutation (\n    $customId: String!, $response: String!\n  ) {\n    user {\n      respondToCollaborationRequest (customId: $customId, response: $response) {\n        errors {\n          field\n          message\n        }\n        block {\n          ...blockFragment\n        }\n      }\n    }\n  }\n"),v=r(73),y=r(37),C=r(36);function O(e){try{var t=window[e],r="__storage_test__";return t.setItem(r,r),t.removeItem(r),!0}catch(n){return n instanceof DOMException&&(22===n.code||1014===n.code||"QuotaExceededError"===n.name||"NS_ERROR_DOM_QUOTA_REACHED"===n.name)&&0!==t.length}}var j=O("localStorage")?window.localStorage:null,E=O("sessionStorage")?window.sessionStorage:null;function w(e){switch(e){case"local":case"localStorage":return j;case"session":case"sessionStorage":default:return E}}var x="local";function S(e,t){var r=w(arguments.length>2&&void 0!==arguments[2]?arguments[2]:x);r&&r.setItem(e,t)}function I(e){var t=w(arguments.length>1&&void 0!==arguments[1]?arguments[1]:x);if(t)return t.getItem(e)}r.d(t,"signup",function(){return A}),r.d(t,"login",function(){return D}),r.d(t,"logout",function(){return B}),r.d(t,"updateUser",function(){return q}),r.d(t,"changePassword",function(){return T}),r.d(t,"forgotPassword",function(){return P}),r.d(t,"userExists",function(){return U}),r.d(t,"updateCollaborationRequest",function(){return $}),r.d(t,"changePasswordWithToken",function(){return L}),r.d(t,"respondToCollaborationRequest",function(){return V}),r.d(t,"getCollaborationRequests",function(){return H}),r.d(t,"getUserData",function(){return W}),r.d(t,"getSavedUserData",function(){return Q});var R="t";function A(e){return N.apply(this,arguments)}function N(){return(N=Object(o.a)(a.a.mark(function e(t){var r,n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=["name","password","email"],e.next=3,Object(v.a)(null,u,{user:Object(C.a)(t,r)},"data.user.signup");case 3:return n=e.sent,S(R,n.token,"local"),e.abrupt("return",n);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function D(e){return F.apply(this,arguments)}function F(){return(F=Object(o.a)(a.a.mark(function e(t){var r,n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(v.a)(null,p,{email:t.email,password:t.password},"data.user.login");case 2:return r=e.sent,console.log(r),n=I(R),(t.remember||n)&&S(R,r.token,"local"),e.abrupt("return",r);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function B(){!function(e){var t=w(arguments.length>1&&void 0!==arguments[1]?arguments[1]:x);t&&t.removeItem(e)}(R,"local")}function q(e){return Object(y.a)(null,c,{user:Object(C.a)(e,["name","lastNotificationCheckTime"])},"data.user.updateUser")}function T(e){return M.apply(this,arguments)}function M(){return(M=Object(o.a)(a.a.mark(function e(t){var r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.a)(null,m,{password:t},"data.user.changePassword");case 2:return r=e.sent,I(R)&&S(R,r.token,"local"),e.abrupt("return",r);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function P(e){return Object(v.a)(null,d,{email:e},"data.user.forgotPassword")}function U(e){return Object(v.a)(null,s,{email:e},"data.user.userExists")}function $(e,t){return Object(y.a)(null,g,{customId:e.customId,data:Object(C.a)(t,["readAt"])},"data.user.updateCollaborationRequest")}function L(e){return Object(v.a)(null,b,{password:e},"data.user.changePasswordWithToken")}function V(e,t){return Object(y.a)(null,k,{response:t,customId:e.customId},"data.user.respondToCollaborationRequest")}function H(){return Object(y.a)(null,f,{},"data.user.getCollaborationRequests")}function W(e){return Object(y.a)(null,h,{},"data.user.getUserData",e)}function Q(){return _.apply(this,arguments)}function _(){return(_=Object(o.a)(a.a.mark(function e(){var t,r,n,o;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=I(R))){e.next=9;break}return e.next=4,W(t);case 4:return r=e.sent,n=r.user,o=r.token,S(R,o),e.abrupt("return",{user:n,token:o});case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}},246:function(e,t,r){e.exports=r(458)},258:function(e,t,r){},265:function(e,t,r){},357:function(e,t,r){"use strict";r.r(t),r.d(t,"addBlock",function(){return s}),r.d(t,"updateBlock",function(){return c}),r.d(t,"deleteBlock",function(){return i}),r.d(t,"getBlockChildren",function(){return u}),r.d(t,"addCollaborators",function(){return p}),r.d(t,"removeCollaborator",function(){return d}),r.d(t,"getCollaborators",function(){return m}),r.d(t,"getCollabRequests",function(){return b}),r.d(t,"getRoleBlocks",function(){return f}),r.d(t,"toggleTask",function(){return h}),r.d(t,"revokeRequest",function(){return g});var n=r(37),a=r(48),o=r(36),l=["customId"];function s(e){return Object(n.a)(null,a.addBlockMutation,{block:Object(o.a)(e,["name","customId","description","expectedEndAt","completedAt","color","type","parents","data","priority","taskCollaborators"])},"data.block.addBlock")}function c(e,t){var r=["name","description","expectedEndAt","completedAt","color","priority","data","taskCollaborators"];return console.log(t,Object(o.a)(t,r)),Object(n.a)(null,a.updateBlockMutation,{block:Object(o.a)(e,l),data:Object(o.a)(t,r)},"data.block.updateBlock")}function i(e){return Object(n.a)(null,a.deleteBlockMutation,{block:Object(o.a)(e,l)},"data.block.deleteBlock")}function u(e,t){return Object(n.a)(null,a.getBlockChildrenQuery,{types:t,block:Object(o.a)(e,l)},"data.block.getBlockChildren")}function p(e,t,r,s){var c=["email","body","expiresAt","customId"];return Object(n.a)(null,a.addCollaboratorsMutation,{body:r,expiresAt:s,block:Object(o.a)(e,l),collaborators:t.map(function(e){return Object(o.a)(e,c)})},"data.block.addCollaborators")}function d(e,t){return Object(n.a)(null,a.removeCollaboratorMutation,{block:Object(o.a)(e,l),collaborator:t.customId},"data.block.removeCollaborator")}function m(e){return Object(n.a)(null,a.getCollaboratorsQuery,{block:Object(o.a)(e,l)},"data.block.getCollaborators")}function b(e){return Object(n.a)(null,a.getCollabRequestsQuery,{block:Object(o.a)(e,l)},"data.block.getCollabRequests")}function f(){return Object(n.a)(null,a.getRoleBlocksQuery,{},"data.block.getRoleBlocks")}function h(e,t){return Object(n.a)(null,a.toggleTaskMutation,{data:t,block:Object(o.a)(e,l)},"data.block.toggleTask")}function g(e,t){return Object(n.a)(null,a.revokeRequestMutation,{request:t.customId,block:Object(o.a)(e,l)},"data.block.revokeRequest")}},358:function(e,t){e.exports={errorFragment:"\n  fragment errorFragment on Error {\n    field\n    message\n  }\n"}},36:function(e,t,r){"use strict";r.d(t,"a",function(){return o}),r.d(t,"b",function(){return s});var n=r(38),a=r.n(n);function o(e,t,r){var n={};return t.forEach(function(t){var o=a.a.get(e,t);(o||r)&&(n[t]=o)}),n}function l(e,t){return t?a.a.get(e,t):JSON.stringify(e)}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.path,n=t.indexer,a=void 0===n?l:n;return e.reduce(function(t,n){return t[a(n,r,e)]=n,t},{})}},363:function(e,t,r){},37:function(e,t,r){"use strict";r.d(t,"a",function(){return m});var n=r(7),a=r.n(n),o=r(29),l=r(15),s=r(106),c=r(50),i=r.n(c),u=r(73),p=r(95),d=null;function m(e,t,r,n,a){return b.apply(this,arguments)}function b(){return(b=Object(l.a)(a.a.mark(function e(t,r,n,l,s){var c;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(c=d&&d.token||s){e.next=3;break}throw new p.a("error, please try again");case 3:return e.next=5,Object(u.a)(Object(o.a)({Authorization:"Bearer ".concat(c)},t),r,n,l);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}s.a.subscribe(function(){var e=s.a.getState();d=i()(e,"user")})},427:function(e,t,r){},431:function(e,t,r){},433:function(e,t,r){},434:function(e,t,r){},443:function(e,t,r){},444:function(e,t,r){},445:function(e,t,r){},446:function(e,t,r){},447:function(e,t,r){},456:function(e,t,r){},457:function(e,t,r){},458:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),o=r(13),l=r.n(o),s=r(106),c=r(31),i=(r(255),r(239)),u=r(7),p=r.n(u),d=r(15),m=r(9),b=r(14),f=r(12),h=r(8),g=r(11),k=(r(75),r(41)),v=(r(67),r(30)),y=r(29),C=r(463),O=r(466),j=r(462),E=r(465),w=r(461);r(258);var x=Object(c.b)(function(e){return{user:e.user}})(function(e){return e.user?a.a.createElement(C.a,{to:"/app"}):a.a.createElement("div",{className:"web"},a.a.createElement(w.a,{to:"/signup"},"Signup"),a.a.createElement(w.a,{to:"/login"},"Login"))}),S=(r(32),r(19)),I=(r(189),r(138)),R=(r(146),r(16)),A=(r(179),r(57));function N(){return window.innerWidth||document.body.clientWidth||document.documentElement.clientWidth}r(265);var D=A.a.Item,F=function(e){function t(e){var r;return Object(m.a)(this,t),(r=Object(f.a)(this,Object(h.a)(t).call(this,e))).onToggleMenu=function(){r.setState(function(e){return{collapsed:!e.collapsed}})},r.onSelectMenu=function(e){var t=r.props.onSelectMenu;r.setState({currentItemKey:e.key,collapsed:!0},function(){t&&t(e.key)})},r.state={collapsed:e.collapsed,currentItemKey:e.currentItemKey},r}return Object(g.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){var e=this.props.menuItems,t=this.state,r=t.currentItemKey,n=t.collapsed,o=e.find(function(e){return e.key===r}),l=o.component,s=N(),c=s/(s<300?1:2);return a.a.createElement("div",{style:{height:"100%",display:"flex",flexDirection:"column"}},a.a.createElement(I.a,{width:c,onClose:this.onToggleMenu,visible:!n,placement:"left"},a.a.createElement(A.a,{defaultSelectedKeys:[r],onClick:this.onSelectMenu,style:{marginTop:"2em"}},e.map(function(e){return a.a.createElement(D,{key:e.key},e.icon&&a.a.createElement(R.a,{type:e.icon,theme:e.iconTheme}),a.a.createElement("span",null,e.label))}))),a.a.createElement("div",{className:"app-menu-header"},a.a.createElement(S.a,{icon:n?"menu-unfold":"menu-fold",onClick:this.onToggleMenu})),a.a.createElement("div",{className:"app-menu-content"},l&&a.a.createElement(l,o.props)))}}]),t}(a.a.Component);F.defaultProps={collapsed:!0};var B=F;var q={root:["project","group","task"],org:["project","group","task"],project:["group","task"],group:["project","task"],task:[]},T=r(55);function M(e,t){return{data:t,path:e,type:T.c}}function P(e){return{path:e,type:T.b}}function U(e){return{actions:e,type:T.d}}function $(e,t){return M(e,t)}function L(e,t){return function(e,t){return{path:e,data:t,type:T.e}}(e,t)}function V(){return{type:T.a}}var H=r(50),W=r.n(H),Q=null;function _(e){return Y.apply(this,arguments)}function Y(){return(Y=Object(d.a)(p.a.mark(function e(t){var r,n,a,o,l=arguments;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=W()(Q,t))){e.next=6;break}for(n=l.length,a=new Array(n>1?n-1:0),o=1;o<n;o++)a[o-1]=l[o];return e.next=5,r.apply(void 0,a);case 5:return e.abrupt("return",e.sent);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}Q={block:r(357),user:r(226)};var z=r(230),G=r.n(z),K=(r(226),r(359));function J(e){var t=e.dispatch,r=e.user;function n(e){return e.expectedEndAt&&(e.expectedEndAt=e.expectedEndAt.valueOf()),e}return{onAdd:function(){var e=Object(d.a)(p.a.mark(function e(a,o){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.createdAt=Date.now(),a.createdBy=r.customId,a.customId=K(),a.color=G()(),o?(a.path="".concat(o.path,".").concat(a.type,".").concat(a.customId),a.parents=[],o.parents&&(a.parents=a.parents.concat(o.parents)),a.parents.push(o.customId)):a.path="".concat(a.type,".").concat(a.customId),"org"===(a=n(a)).type?(a.collaborators=[r],a.path="orgs.".concat(a.customId),t(L("user.user.orgs",[a.customId]))):"task"===a.type&&(a.taskCollaborators||(a.taskCollaborators=[])),q[a.type]&&q[a.type].forEach(function(e){a[e]={}}),t(L(a.path,a)),_("block.addBlock",a);case 10:case"end":return e.stop()}},e)}));return function(t,r){return e.apply(this,arguments)}}(),onUpdate:function(e,r){r=n(r),t($(e.path,r)),_("block.updateBlock",e,r)},onToggle:function(e){var n=e.taskCollaborators.findIndex(function(e){return e.userId===r.customId}),a=e.taskCollaborators[n],o="".concat(e.path,".taskCollaborators.").concat(n,".completedAt");t(L(o,a.completedAt?null:Date.now())),_("block.toggleTask",e,!0)},onDelete:function(e){t(P(e.path)),_("block.deleteBlock",e)},onAddCollaborators:function(e,r){var n=r.collaborators,a=r.message,o=r.expiresAt;n=n.map(function(e){return e.message||(e.message=a),e.expiresAt?e.expiresAt.valueOf&&(e.expiresAt=e.expiresAt.valueOf()):e.expiresAt=o,e.customId=K(),e.statusHistory=[{status:"pending",date:Date.now()}],e}),t($("".concat(e.path,".collaborationRequests"),n)),_("block.addCollaborators",e,n,a,o)},onUpdateCollaborator:function(e,r,n){r=Object(y.a)({},r,n);var a=Array.isArray(e.parents)&&e.parents.length>1?e.parents[0]:e.customId;t(L("orgs.".concat(a,".collaborators")))},getBlockChildren:function(){var e=Object(d.a)(p.a.mark(function e(r){var n,a,o;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_("block.getBlockChildren",r);case 2:n=e.sent,a=n.blocks,o={},q[r.type]&&q[r.type].forEach(function(e){o[e]={}}),a.forEach(function(e){e.path="".concat(r.path,".").concat(e.type,".").concat(e.customId);var t=o[e.type]||{};t[e.customId]=e,o[e.type]=t}),t($(r.path,o));case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),getCollaborators:function(){var e=Object(d.a)(p.a.mark(function e(r){var n,a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_("block.getCollaborators",r);case 2:n=e.sent,a=n.collaborators,t($("".concat(r.path,".collaborators"),a));case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),getCollaborationRequests:function(){var e=Object(d.a)(p.a.mark(function e(r){var n,a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_("block.getCollabRequests",r);case 2:n=e.sent,a=n.requests,t($("".concat(r.path,".collaborationRequests"),a));case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}}var X=r(49),Z=(r(205),r(137)),ee=A.a.Item;function te(e){var t=e.types,r=e.onClick,n=e.label,o=a.a.createElement(A.a,{onClick:function(e){return r(e.key)}},t.map(function(e){return e="string"===typeof e?{label:e}:e,a.a.createElement(ee,{key:e.label},e.icon&&a.a.createElement(R.a,{type:e.icon}),e.label)}));return a.a.createElement(Z.a,{overlay:o,trigger:["click"]},a.a.createElement(S.a,{icon:"plus"},n))}r(363);var re=r(244),ne=(r(393),function(e){function t(){var e,r;Object(m.a)(this,t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(r=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(a)))).state={fetchingChildren:!0},r}return Object(g.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){this.loadBlockData()}},{key:"componentDidUpdate",value:function(e){var t=this.props.group;t&&e.group&&t.customId!==e.group.customId?this.loadBlockData():this.updateFetchingState()}},{key:"updateFetchingState",value:function(){var e=this.state.fetchingChildren,t={};this.areBlockChildrenLoaded()&&e&&(t.fetchingChildren=!1),Object.keys(t).length>0&&this.setState(t)}},{key:"loadBlockData",value:function(){var e=this.state.fetchingChildren,t={};this.areBlockChildrenLoaded()?e&&(t.fetchingChildren=!1):this.fetchChildren(),Object.keys(t).length>0&&this.setState(t)}},{key:"areBlockChildrenLoaded",value:function(){var e=this.props.group;if(!e)return!0;if(q[e.type]&&q[e.type].find(function(t){if(!e[t])return!0}))return!1;return!0}},{key:"fetchChildren",value:function(){var e=Object(d.a)(p.a.mark(function e(){var t,r,n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,r=t.group,n=t.blockHandlers,e.next=3,n.getBlockChildren(r);case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.group,r=e.children,n=e.blockHandlers,o=e.onClickAddChild,l=e.name,s=e.onEdit,c=this.state.fetchingChildren,i=t?q[t.type]:null;return a.a.createElement("div",{className:"sk-group"},a.a.createElement(k.a,{className:"sk-group-head"},a.a.createElement(v.a,{span:12,style:{minHeight:"32px"}},a.a.createElement("span",{style:{fontWeight:"bold"}},t?t.name:l)),t?a.a.createElement(v.a,{span:12,style:{textAlign:"right"}},i&&i.length>0&&a.a.createElement(te,{types:i,onClick:function(e){return o(e,t)}}),a.a.createElement(S.a,{icon:"edit",onClick:function(){return s(t)},style:{marginLeft:"2px"}}),a.a.createElement(S.a,{icon:"delete",type:"danger",onClick:function(){return n.onDelete(t)},style:{marginLeft:"2px"}})):null),c?"Loading":a.a.createElement(re.a,{className:"sk-group-children"},r))}}]),t}(a.a.Component)),ae=(r(42),r(23)),oe=r(45),le=r(44),se=(r(43),r(25));function ce(e,t){var r={};Array.isArray(t)?(t.forEach(function(t){r[t.fieldName]={value:t.value||e.getFieldsValue(t.fieldName),errors:t.errors}}),e.setFields(r)):"object"===typeof t&&(Object.keys(t).forEach(function(r){var n=t[r];n.value||(n.value=e.getFieldsValue(r))}),e.setFields(t))}r(222);var ie=r(132);var ue=function(e){var t=e,r="withSpinner(".concat(e.displayName||e.name||"Component",")"),n=function(e){function r(){var e,t;Object(m.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(t=Object(f.a)(this,(e=Object(h.a)(r)).call.apply(e,[this].concat(a)))).visible=null,t.state={spinning:!1},t.toggleSpinning=function(){t.visible&&t.setState(function(e){return{spinning:!e.spinning}})},t}return Object(g.a)(r,e),Object(b.a)(r,[{key:"componentDidMount",value:function(){this.visible=!0}},{key:"componentDidUpdate",value:function(){this.visible=!0}},{key:"componentWillUnmount",value:function(){this.visible=!1}},{key:"render",value:function(){var e=this.state.spinning,r=this.props.forwardedRef;return a.a.createElement(ie.a,{spinning:e,indicator:a.a.createElement(R.a,{type:"loading",style:{fontSize:"2em"}})},a.a.createElement(t,Object.assign({},this.props,{toggleSpinning:this.toggleSpinning,ref:r})))}}]),r}(a.a.Component);function o(e,t){return a.a.createElement(n,Object.assign({},e,{forwardedRef:t,ref:e.spinnerRef}))}return n.displayName=r,o.displayName=r,a.a.forwardRef(o)}(function(e){function t(e){var r;return Object(m.a)(this,t),(r=Object(f.a)(this,Object(h.a)(t).call(this,e))).handleSubmit=function(e){var t=r.props,n=t.form,a=t.onSubmit,o=t.toggleSpinning;e&&e.preventDefault(),n.validateFieldsAndScroll(function(){var e=Object(d.a)(p.a.mark(function e(t,l){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=14;break}return e.prev=1,o&&o(),e.next=5,a(l);case 5:e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),e.t0 instanceof Error?r.setState({stateError:e.t0.message}):ce(n,e.t0);case 11:return e.prev=11,o&&o(),e.finish(11);case 14:case"end":return e.stop()}},e,null,[[1,7,11,14]])}));return function(t,r){return e.apply(this,arguments)}}())},r.state={stateError:null},r}return Object(g.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){this.applyFieldErrors()}},{key:"componentDidUpdate",value:function(){this.applyFieldErrors()}},{key:"applyFieldErrors",value:function(){var e=this.props,t=e.form,r=e.errors;r&&ce(t,r)}},{key:"render",value:function(){var e=this.props,t=e.title,r=e.children,n=e.formProps,o=this.state.stateError;return a.a.createElement(ae.a,Object.assign({},n,{onSubmit:this.handleSubmit}),t&&a.a.createElement(ae.a.Item,null,t),o&&a.a.createElement(ae.a.Item,{style:{color:"red"}},"string"===typeof o?a.a.createElement("h3",{style:{color:"red",lineHeight:"1.25em"}},o):o),r)}}]),t}(a.a.Component)),pe=ae.a.Item,de=function(e){function t(){var e,r;Object(m.a)(this,t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(r=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(a)))).onSubmit=function(){var e=Object(d.a)(p.a.mark(function e(t){var n,a,o;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.props,a=n.form,!(o=n.model).onSubmit){e.next=3;break}return e.abrupt("return",o.onSubmit(t,a));case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),r}return Object(g.a)(t,e),Object(b.a)(t,[{key:"renderField",value:function(e,t,r,n){if(e.render)return e.render(r,n,t,e);if(e.component){var o=e.component,l=a.a.createElement(o,e.props);return a.a.createElement(pe,{key:t,label:e.label,labelCol:e.labelCol,wrapperCol:e.wrapperCol,extra:e.extra,hasFeedback:e.hasFeedback},e.noDecorate?l:r.getFieldDecorator(t,{rules:e.rules,validateFirst:!0,initialValue:e.getValue?e.getValue(n,t,e):W()(n,t)||e.initialValue,valuePropName:e.valuePropName||"value"})(l))}}},{key:"renderFields",value:function(){var e=this.props,t=e.form,r=e.model,n=e.data,a=[];for(var o in r.fields){var l=r.fields[o];a.push(this.renderField(l,o,t,n))}return a}},{key:"render",value:function(){var e=this.props,t=e.children,r=e.form;return a.a.createElement(ue,{form:r,onSubmit:this.onSubmit},this.renderFields(),t)}}]),t}(a.a.Component);de.defaultProps={data:{}};var me=de;function be(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e=Object(y.a)({},e),t.forEach(function(t){var r=e[t];if(r){var n=[{required:!0,message:"".concat(t," is required")}];Array.isArray(r)?n=n.concat(r):n.push(r),e[t]=n}}),e}function fe(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"values do not match";return function(a,o,l,s){var c=r.getFieldValue(e),i=r.getFieldValue(t),u=null,p=null,d=null;c&&i&&c===i?l():(l(n),d=n),a.field===e?(u=t,p=i):(u=e,p=c),r.setFields(Object(X.a)({},u,{error:d,value:p}))}}function he(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"name already exist";return function(r,n,a,o){n=n.toLowerCase(),e.find(function(e){return function(e){return e.toLowerCase()===n.toLowerCase()}(e)})&&a(t),a()}}var ge={name:[{type:"string",max:50,transform:function(e){if(e&&e.trim)return e.trim()}},{pattern:/\w+/,message:"only alphanumeric characters allowed"}],description:[{type:"string",max:250},{pattern:/[\w\s]+/,message:"only alphanumeric characters allowed"}],expectedEndAt:[{type:"number"}],completedAt:[{type:"number"}]},ke=be(ge,["description"]),ve=be(ge,["name"]),ye=be(ge,["name"]),Ce=be(ge,["name"]),Oe=r(133),je=r.n(Oe);function Ee(e,t){var r=function(r){function n(e){var t;return Object(m.a)(this,n),(t=Object(f.a)(this,Object(h.a)(n).call(this,e))).updateWindowData=function(){t.modalIsMounted&&t.setState({currentDeviceWidth:N()})},t.updateWindowData(),t.updateWindowData=je()(t.updateWindowData,300),t.state={currentDeviceWidth:N()},t}return Object(g.a)(n,r),Object(b.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.updateWindowData),this.modalIsMounted=!0}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateWindowData),this.modalIsMounted=!1}},{key:"render",value:function(){var r=e,n=this.props,o=n.visible,l=n.onClose,s=n.title,c=this.state.currentDeviceWidth,i=c/(c<=500?1:c<=700?1.5:2);return o?a.a.createElement(I.a,{visible:o,onClose:l,width:i,title:s||t},a.a.createElement(r,this.props)):null}}]),n}(a.a.Component);return r.displayName="modalWrap(".concat(e.displayName||e.name||"Component",")"),r}var we=se.a.TextArea,xe=function(e){function t(e){var r;Object(m.a)(this,t),(r=Object(f.a)(this,Object(h.a)(t).call(this,e))).onSubmit=function(e){return e.type="group",r.props.onSubmit(e)};var n=e.data||{},a=Object(le.a)(r);return r.model={fields:{name:{component:se.a,props:{autoComplete:"off"},label:"Name",labelCol:null,wrapperCol:null,rules:[].concat(Object(oe.a)(ve.name),[{validator:he(e.existingGroups,"group exists")}]),initialValue:n.name},description:{component:we,props:{autosize:{minRows:2,maxRows:6}},label:"Description",labelCol:null,wrapperCol:null,rules:ve.description,initialValue:n.description},submit:{component:S.a,props:{type:"primary",children:"Submit",block:!0,htmlType:"submit"},labelCol:null,wrapperCol:null,noDecorate:!0}},formProps:{hideRequiredMark:!0},onSubmit:a.onSubmit},r}return Object(g.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){return a.a.createElement(me,{model:this.model,form:this.props.form})}}]),t}(a.a.Component);xe.defaultProps={data:{}};var Se=Ee(ae.a.create()(xe),"Group"),Ie=(r(178),r(93)),Re=(r(427),{"not important":"#EACA2C",important:"#7ED321","very important":"#EB5424"});function Ae(e){var t=e.level,r=e.cover,n=Object(X.a)({},r?"backgroundColor":"color",Re[t]);return a.a.createElement("span",{className:"sk-priority",style:n},t)}var Ne=function(e){function t(){return Object(m.a)(this,t),Object(f.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){var e=this.props,t=e.value,r=e.onChange,n=a.a.createElement(A.a,{onClick:function(e){var t=e.key;return r(t)}},a.a.createElement(A.a.Item,{key:"not important"},a.a.createElement(Ae,{level:"not important",cover:!0})),a.a.createElement(A.a.Item,{key:"important"},a.a.createElement(Ae,{level:"important",cover:!0})),a.a.createElement(A.a.Item,{key:"very important"},a.a.createElement(Ae,{level:"very important",cover:!0})));return a.a.createElement(Z.a,{overlay:n,trigger:["click"]},a.a.createElement("span",{className:"sk-priority",style:{backgroundColor:Re[t],cursor:"pointer"}},t))}}]),t}(a.a.Component),De=(r(176),r(56)),Fe=(r(177),r(92));r(431);function Be(e){var t=e.data,r=e.renderInfo,n=e.onClick,o=e.className,l=e.style,s=e.colorStyle,c=e.colorClassName,i=e.colorSpan,u=e.hoverable,p=i,d="boolean"!==typeof u||u;return a.a.createElement("div",{className:"sk-thumbnail "+(d?"sk-thumbnail-hoverable ":"")+(o||""),style:l,onClick:n},a.a.createElement(k.a,{gutter:16,style:{height:"100%"}},a.a.createElement(v.a,{span:p,style:{height:"100%"}},a.a.createElement("span",{style:Object(y.a)({backgroundColor:t.color},s),className:"sk-thumbnail-color "+c})),a.a.createElement(v.a,{span:24-p,style:{height:"100%"}},r(t,e))))}Be.defaultProps={className:"",colorSpan:8,colorClassName:""};var qe=function(e){function t(){return Object(m.a)(this,t),Object(f.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){var e=this.props,t=e.collaborator,r=e.collaboratorTaskData,n=e.onUnassign;return a.a.createElement(Be,{data:t,colorSpan:4,renderInfo:function(){return a.a.createElement(k.a,null,a.a.createElement(v.a,{span:14},t.name),a.a.createElement(v.a,{span:10,style:{textAlign:"right"}},a.a.createElement(Fe.a,{disabled:!0,checked:r.data,onChange:null,style:{marginRight:"16px"}}),a.a.createElement(S.a,{type:"danger",icon:"close",onClick:n})))},style:{height:"60px",padding:"4px",cursor:"inherit"},hoverable:!1})}}]),t}(a.a.Component),Te=r(38),Me=r.n(Te),Pe=r(21),Ue=r.n(Pe),$e=function(e){function t(){return Object(m.a)(this,t),Object(f.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(b.a)(t,[{key:"getLatestStatus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e[e.length-1]}},{key:"render",value:function(){var e=this.props,t=e.collaborator,r=e.style,n=e.onClick,o=t.name||t.email,l=this.getLatestStatus(t.statusHistory);return a.a.createElement(Be,{data:t,onClick:n,renderInfo:function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement("h5",null,o),t.name&&a.a.createElement("span",{className:"sk-gl-thumbnail-text"},t.email),t.expiresAt&&a.a.createElement("span",{className:"sk-gl-thumbnail-text"},"expires ",Ue()(t.expiresAt).fromNow()),l&&a.a.createElement("span",{className:"sk-gl-thumbnail-text"},l.status))},style:Object(y.a)({padding:"4px",maxWidth:"300px",height:"80px"},r),colorSpan:t.color?4:0,hoverable:!!n})}}]),t}(a.a.Component),Le=function(e){function t(e){var r;return Object(m.a)(this,t),(r=Object(f.a)(this,Object(h.a)(t).call(this,e))).onAddCollaborator=function(e){var t=r.props,n=t.form,a=t.user;if(r.existingTaskCollaboratorsIdMap[e.customId])r.error="collaborator is already assigned";else{var o=n.getFieldValue("taskCollaborators");o.push({userId:e.customId,assignedAt:Date.now(),completedAt:0,assignedBy:a.customId}),r.error=null,r.existingTaskCollaboratorsIdMap[e.customId]=e,n.setFieldsValue({taskCollaborators:o})}},r.onUnassignCollaborator=function(e,t){var n=r.props.form;if(r.existingTaskCollaboratorsIdMap[e.userId]){var a=n.getFieldValue("taskCollaborators");a=Me.a.delete(a,"".concat(t)),r.error=null,delete r.existingTaskCollaboratorsIdMap[e.userId],n.setFieldsValue({taskCollaborators:a})}else r.error="collaborator is not assigned"},r.existingTaskCollaboratorsIdMap={},r.collaboratorsIdMap={},(e.defaultTaskCollaborators||[]).forEach(function(e){r.existingTaskCollaboratorsIdMap[e.userId]=e}),(e.collaborators||[]).forEach(function(e){r.collaboratorsIdMap[e.customId]=e}),r.error=null,r}return Object(g.a)(t,e),Object(b.a)(t,[{key:"renderSelectCollaborators",value:function(e){var t=this,r=[];return e.forEach(function(e,n){t.existingTaskCollaboratorsIdMap[e.customId]||r.push(a.a.createElement(De.a.Option,{value:n,key:e.customId},a.a.createElement($e,{collaborator:e})))}),r.length>0?a.a.createElement(ae.a.Item,null,a.a.createElement(De.a,{placeholder:"Assign collaborator",onChange:function(r){t.onAddCollaborator(e[r])}},r)):null}},{key:"renderCollaborators",value:function(e){var t=this;return e.map(function(e,r){return a.a.createElement(qe,{key:e.userId,collaborator:t.collaboratorsIdMap[e.userId],collaboratorTaskData:e,onToggle:null,onUnassign:function(){return t.onUnassignCollaborator(e,r)}})})}},{key:"render",value:function(){var e=this.props,t=e.form,r=e.collaborators,n=e.defaultTaskCollaborators;t.getFieldDecorator("taskCollaborators",{initialValue:n||[]});var o=t.getFieldValue("taskCollaborators");return a.a.createElement("div",null,this.renderCollaborators(o),this.renderSelectCollaborators(r))}}]),t}(a.a.Component),Ve=se.a.TextArea,He=function(e){function t(e){var r;Object(m.a)(this,t),(r=Object(f.a)(this,Object(h.a)(t).call(this,e))).onSubmit=function(e){return e.type="task",r.props.onSubmit(e)};var n=Object(le.a)(r),o=e.data||{};return r.model={fields:{description:{component:Ve,props:{autosize:{minRows:2,maxRows:6}},label:"Description",labelCol:null,wrapperCol:null,rules:ke.description,initialValue:o.description},priority:{component:Ne,props:{},label:"Priority",labelCol:null,wrapperCol:null,initialValue:o.data?o.data.find(function(e){return"priority"===e.dataType}):"not important"},taskCollaborators:{render:function(t){return a.a.createElement(ae.a.Item,{label:"Collaborators",key:"taskCollaborators"},a.a.createElement(Le,{key:"assignTasks",form:t,collaborators:e.collaborators,defaultTaskCollaborators:o.taskCollaborators||e.defaultAssignedTo,user:e.user}))}},expectedEndAt:{component:Ie.a,props:{showTime:!0,format:"YYYY-MM-DD HH:mm:ss",placeholder:"Complete At"},label:"Complete At",labelCol:null,wrapperCol:null,initialValue:o.completeAt},submit:{component:S.a,props:{type:"primary",children:"Submit",block:!0,htmlType:"submit"},labelCol:null,wrapperCol:null,noDecorate:!0}},formProps:{hideRequiredMark:!0},onSubmit:n.onSubmit},r}return Object(g.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){return a.a.createElement(me,{model:this.model,form:this.props.form})}}]),t}(a.a.Component);He.defaultProps={data:{}};var We=Ee(ae.a.create()(He),"Task"),Qe=(r(433),function(e){function t(){return Object(m.a)(this,t),Object(f.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(b.a)(t,[{key:"getCollaborator",value:function(){var e=this.props,t=e.task,r=e.user;if(t.taskCollaborators)return t.taskCollaborators.find(function(e){return e.userId===r.customId})}},{key:"render",value:function(){var e=this.props,t=e.task,r=e.blockHandlers,n=e.onEdit,o=this.getCollaborator();return a.a.createElement("div",{className:"sk-minitask"},a.a.createElement(k.a,null,a.a.createElement(v.a,{span:4},a.a.createElement(Fe.a,{checked:o&&!!o.completedAt,onChange:function(){return r.onToggle(t)},disabled:!o,title:o?"toggle task":"task is not yet assigned"})),a.a.createElement(v.a,{span:16,className:"sk-minitask-priority"},a.a.createElement(Ae,{level:t.priority,cover:!0})),a.a.createElement(v.a,{span:4,className:"sk-minitask-top-extra"},a.a.createElement(S.a,{icon:"delete",type:"danger",className:"sk-minitask-close",onClick:function(){return r.onDelete(t)},title:"delete task"}))),a.a.createElement(k.a,{className:"sk-minitask-desc"},a.a.createElement(v.a,{span:16,offset:4},a.a.createElement("p",null,t.description))),a.a.createElement(k.a,null,a.a.createElement(v.a,{span:24,className:"sk-minitask-footer-right"},a.a.createElement(S.a,{icon:"edit",onClick:function(){return n(t)},title:"edit task"}))))}}]),t}(a.a.Component)),_e=se.a.TextArea,Ye=function(e){function t(e){var r;Object(m.a)(this,t),(r=Object(f.a)(this,Object(h.a)(t).call(this,e))).onSubmit=function(e){return e.type="project",r.props.onSubmit(e)};var n=Object(le.a)(r),a=e.data||{};return r.model={fields:{name:{component:se.a,props:{autoComplete:"off"},label:"Name",labelCol:null,wrapperCol:null,rules:[].concat(Object(oe.a)(ye.name),[{validator:he(e.existingProjects,"project exists")}]),initialValue:a.name},description:{component:_e,props:{autosize:{minRows:2,maxRows:6}},label:"Description",labelCol:null,wrapperCol:null,rules:ye.description,initialValue:a.description},submit:{component:S.a,props:{type:"primary",children:"Submit",block:!0,htmlType:"submit"},labelCol:null,wrapperCol:null,noDecorate:!0}},formProps:{hideRequiredMark:!0},onSubmit:n.onSubmit},r}return Object(g.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){return a.a.createElement(me,{model:this.model,form:this.props.form})}}]),t}(a.a.Component);Ye.defaultProps={data:{}};var ze=Ee(ae.a.create()(Ye),"Project");r(434);function Ge(e){var t=e.project,r=e.onClick,n=e.className,o=e.style;return a.a.createElement(Be,{data:t,onClick:r,renderInfo:function(){return a.a.createElement("h3",null,t.name)},className:n,style:Object(y.a)({height:"70px",padding:"4px"},o),colorSpan:5})}var Ke=Object(c.b)(function(e,t){return Object(y.a)({},t,{rootBlock:Me.a.get(e,t.path)||t.rootBlock})})(function(e){return a.a.createElement(mt,e)}),Je=(r(435),r(142)),Xe=(r(459),r(143)),Ze=(r(439),r(235)),et=r(141);function tt(e){return new Promise(function(t,r){function n(){if(o===e.length)t(a);else{var r=e[o];o+=1,function(e){e.then(function(e){a.push({data:e,success:!0}),n()}).catch(function(e){a.push({error:e,failed:!0}),n()})}(r)}}var a=[],o=0;n()})}var rt=r(36),nt=function(e){function t(e){var r;Object(m.a)(this,t),(r=Object(f.a)(this,Object(h.a)(t).call(this,e))).clearHelpers=function(e,t){t?r.errors[e]&&(r.errors[e][t]=null):delete r.errors[e]},r.clearErrors=function(){r.errors={}},r.setError=function(e,t,n){r.errors[e]={email:t,message:n}},r.hasError=function(){return!!Object.keys(r.errors).length},r.getError=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"email";return Me.a.get(r.errors,"".concat(e,".").concat(t))},r.validate=Object(d.a)(p.a.mark(function e(){var t,n,a,o;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.props.form,r.clearErrors(),n=t.getFieldValue("collaborators"),a=[],n.forEach(function(e){a.push(r.pValidator(e))}),e.next=7,tt(a);case 7:return e.sent.forEach(function(e,t){e.failed&&r.setError(t,Me.a.get(e.error.fields,"email.0.message"),Me.a.get(e.error.fields,"message.0.message"))}),(o=r.hasError())&&t.setFieldsValue({collaborators:n}),e.abrupt("return",!o);case 12:case"end":return e.stop()}},e)})),r.onAddField=function(){var e=r.props.form,t=e.getFieldValue("collaborators");t=t.concat([{email:"",expiresAt:null}]),e.setFieldsValue({collaborators:t})},r.onDeleteField=function(e){var t=r.props.form,n=t.getFieldValue("collaborators");n=Me.a.delete(n,e),r.clearHelpers(e),t.setFieldsValue({collaborators:n})},r.onUpdateField=function(e,t,n,a){var o=r.props.form,l=o.getFieldValue("collaborators");a.validate(Object(X.a)({},t,n),function(a){a?r.setError(e,a[0].message):r.clearHelpers(e,t),l=Me.a.set(l,"".concat(e,".").concat(t),n),o.setFieldsValue({collaborators:l})})},r.onUpdateEmail=function(e,t){r.onUpdateField(e,"email",t,r.emailValidator)},r.onUpdateMessage=function(e,t){r.onUpdateField(e,"message",t,r.messageValidator)},r.onUpdateExpiresAt=function(e,t){var n=r.props.form,a=n.getFieldValue("collaborators");a=Me.a.set(a,"".concat(e,".expiresAt"),t),n.setFieldsValue({collaborators:a})},r.errors={};var n,a=[{type:"email",required:!0,validator:he(Object.keys(Object(y.a)({},Object(rt.b)(e.existingCollaborators,{path:"email"}),Object(rt.b)(e.existingCollaborationRequests,{path:"email"}))),"collaborator already exists, or has been previously sent a request")}],o=[{type:"string",max:250}],l={email:a,message:o};return r.validateCollaborator=new et.a(l),r.emailValidator=new et.a({email:a}),r.messageValidator=new et.a({message:o}),r.pValidator=(n=r.validateCollaborator.validate.bind(r.validateCollaborator),function(e){return new Promise(function(t,r){n(e,function(e,n){e?r({errors:e,fields:n}):t(n)})})}),r}return Object(g.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){var e=this,t=this.props.form;t.getFieldDecorator("collaborators",{initialValue:[],rules:[{type:"array",required:!0,message:"collaborators are required"}]});var r=t.getFieldValue("collaborators"),n=t.getFieldError("collaborators");return a.a.createElement("div",null,r.map(function(t,n){return a.a.createElement("div",{key:n},a.a.createElement(k.a,{gutter:16},a.a.createElement(v.a,{span:20},a.a.createElement(ae.a.Item,{label:"Email address",help:a.a.createElement("span",{style:{color:"red"}},e.getError(n,"email")),style:{marginBottom:"4px"}},a.a.createElement(se.a,{value:t.email,onChange:function(t){e.onUpdateEmail(n,t.target.value)},autoComplete:"email"})),a.a.createElement(ae.a.Item,{label:"Message",help:a.a.createElement("span",{style:{color:"red"}},e.getError(n,"message"))},a.a.createElement(se.a.TextArea,{autosize:!0,autoComplete:"off",value:t.message,onChange:function(t){e.onUpdateMessage(n,t.target.value)}})),a.a.createElement(ae.a.Item,{label:"Expires at",help:a.a.createElement("span",{style:{color:"red"}},e.getError(n,"expiresAt"))},a.a.createElement(Ie.a,{format:"MMM DD, YYYY",disabledDate:function(e){return e&&e<Ue()().subtract(1,"day").endOf("day")},onChange:function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];e.onUpdateExpiresAt.apply(e,[n].concat(r))},value:t.expiresAt&&Ue()(t.expiresAt,"MMM DD, YYYY")}))),a.a.createElement(v.a,{span:4},a.a.createElement(S.a,{icon:"close",onClick:function(){return e.onDeleteField(n)},type:"danger"}))),n!==r.length-1&&a.a.createElement(Ze.a,null))}),a.a.createElement("span",{style:{color:"red"}},n),a.a.createElement(S.a,{block:!0,icon:"plus",onClick:this.onAddField},"Add Collaborator"))}}]),t}(a.a.Component),at=function(e){function t(e){var r;Object(m.a)(this,t),(r=Object(f.a)(this,Object(h.a)(t).call(this,e))).formRef=a.a.createRef(),r.onSubmit=function(){var e=Object(d.a)(p.a.mark(function e(t){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.formRef.current){e.next=5;break}return e.next=3,r.formRef.current.validate();case 3:e.sent&&(t.message=null,t.expiresAt=Ue()().add(1,"months").valueOf(),r.props.onSubmit(t));case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();var n=Object(le.a)(r);return r.model={fields:{collaborators:{render:function(t){return a.a.createElement("div",{key:"add-collaborator"},a.a.createElement("p",null,"If request expiration date is not provided, the default expiration duration is 1 month."),a.a.createElement(ae.a.Item,null,a.a.createElement(nt,{ref:n.formRef,form:t,existingCollaborators:e.existingCollaborators,existingCollaborationRequests:e.existingCollaborationRequests})))}},submit:{component:S.a,props:{type:"primary",children:"Submit",block:!0,htmlType:"submit"},labelCol:null,wrapperCol:null,noDecorate:!0}},formProps:{hideRequiredMark:!0},onSubmit:n.onSubmit},r}return Object(g.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){return a.a.createElement(me,{model:this.model,form:this.props.form})}}]),t}(a.a.Component);at.defaultProps={data:{}};var ot=Ee(ae.a.create()(at),"Collaboration Request"),lt=(r(441),r(241)),st=function(e){function t(){return Object(m.a)(this,t),Object(f.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){var e=this.props,t=e.onChange,r=e.disabled,n=e.options,o=e.defaultValue,l=void 0!==this.props.value?this.props.value:o,s={marginRight:"8px",fontWeight:l?"500":"bold"},c={marginLeft:"8px",fontWeight:l?"bold":"500"};return a.a.createElement("span",null,a.a.createElement("span",{style:s},n[0]),a.a.createElement(Fe.a,{checked:!!l,onChange:t,disabled:r}),a.a.createElement("span",{style:c},n[1]))}}]),t}(a.a.Component);st.defaultProps={options:["No","Yes"]};var ct=function(e){function t(){var e,r;Object(m.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(r=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(o)))).renderField=function(e){var t=e.fieldName,n=e.labelName,o=e.type,l=e.value,s=e.options,c=e.placeholder,i=e.dateFormat,u=e.immutable,p=e.min,d=e.max,m=e.block,b=e.rule,f=e.props,h=r.props,g=h.form,k=null,y=m?{xs:24,sm:24,md:24}:{xs:24,sm:24,md:12};return h.editing&&!u?("text"===o?k=a.a.createElement(se.a,Object.assign({},f,{placeholder:c})):"textarea"===o?k=a.a.createElement(se.a.TextArea,Object.assign({},f,{placeholder:c})):"select"===o?k=a.a.createElement(De.a,Object.assign({},f,{placeholder:c}),s.map(function(e){return a.a.createElement(De.a.Option,{key:e},e)})):"datepicker"===o?(k=a.a.createElement(Ie.a,Object.assign({},f,{format:i,placeholder:c})),l=Ue()(l)):k="switch"===o?a.a.createElement(st,Object.assign({},f,{options:s})):"number"===o?a.a.createElement(lt.a,Object.assign({},f,{min:p,max:d,placeholder:c})):a.a.createElement(se.a,Object.assign({},f,{placeholder:c})),k=a.a.createElement(ae.a.Item,{label:n||t},g.getFieldDecorator(t,{rule:b,initialValue:l})(k))):("switch"===o&&(l=a.a.createElement(st,{disabled:!0,options:s,defaultValue:l})),k=a.a.createElement(ae.a.Item,{label:n},l)),"textarea"===o&&(y.md=24),a.a.createElement(v.a,y,k)},r}return Object(g.a)(t,e),Object(b.a)(t,[{key:"renderForm",value:function(){var e=this.props,t=e.form,r=e.render,n=e.editing,o=e.onSubmit,l=t.getFieldsValue(),s=r({renderField:this.renderField,data:l,editing:n});return n&&(s=a.a.createElement(ue,{form:t,onSubmit:o},s)),s}},{key:"render",value:function(){return this.renderForm()}}]),t}(a.a.Component),it=ae.a.create()(ct),ut=function(e){function t(){var e,r;Object(m.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(r=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(o)))).renderForm=function(e){var t=e.renderField,n=(e.data,r.props.collaborator);return a.a.createElement(a.a.Fragment,null,t({fieldName:"name",labelName:"Name",type:"input",value:n.name,immutable:!0,block:!0}),t({fieldName:"email",labelName:"Email address",type:"input",value:n.email,immutable:!0,block:!0}))},r}return Object(g.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){var e=this.props,t=e.form,r=e.onSubmit;return a.a.createElement(it,{editing:!0,render:this.renderForm,onSubmit:r,form:t})}}]),t}(a.a.Component),pt=Ee(ae.a.create()(ut),"Collaborator"),dt=(r(443),function(e){function t(){var e,r;Object(m.a)(this,t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(r=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(a)))).state={showAddCollaboratorForm:!1,showCollaborator:null},r.toggleCollaboratorForm=function(){r.setState(function(e){return{showAddCollaboratorForm:!e.showAddCollaboratorForm}})},r}return Object(g.a)(t,e),Object(b.a)(t,[{key:"renderList",value:function(e,t){return a.a.createElement(Xe.a,{dataSource:e,renderItem:t,grid:{gutter:16,xs:1,sm:2,md:3,lg:4},style:{alignItems:"flex-start"}})}},{key:"renderCollaborators",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.renderList(t,function(t){return a.a.createElement(Xe.a.Item,{key:t.customId},a.a.createElement($e,{collaborator:t,onClick:function(){e.setState({showCollaborator:t})}}))})}},{key:"renderCollaborationRequests",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.renderList(e,function(e){return a.a.createElement(Xe.a.Item,{key:e.customId},a.a.createElement($e,{collaborator:e}))})}},{key:"render",value:function(){var e=this,t=this.props,r=t.collaborators,n=t.onBack,o=t.onAddCollaborators,l=t.collaborationRequests,s=t.block,c=t.onUpdateCollaborator,i=this.state,u=i.showAddCollaboratorForm,p=i.showCollaborator;return a.a.createElement("div",{className:"sk-collaborators"},a.a.createElement(pt,{visible:!!p,onClose:function(){return e.setState({showCollaborator:null})},collaborator:p,onSubmit:function(t){c(p,t),e.setState({showCollaborator:null})},block:s}),a.a.createElement(ot,{onSubmit:function(t){o(t),e.toggleCollaboratorForm()},visible:u,onClose:this.toggleCollaboratorForm,existingCollaborators:r,existingCollaborationRequests:l}),a.a.createElement("div",{className:"sk-collaborators-header"},a.a.createElement(S.a,{icon:"arrow-left",onClick:n}),a.a.createElement(S.a,{icon:"plus",onClick:this.toggleCollaboratorForm,style:{marginLeft:"1em"}},"Add collaborator"),a.a.createElement("span",{className:"sk-gl-block-name"},s.name)),a.a.createElement("div",{className:"sk-collaborators-content"},a.a.createElement(Je.a,null,a.a.createElement(Je.a.TabPane,{tab:"Collaborators",key:"collaborators"},this.renderCollaborators(r)),a.a.createElement(Je.a.TabPane,{tab:"Collaboration Requests",key:"collaboration-requests"},this.renderCollaborationRequests(l)))))}}]),t}(a.a.Component)),mt=(r(444),function(e){function t(e){var r;return Object(m.a)(this,t),(r=Object(f.a)(this,Object(h.a)(t).call(this,e))).onSubmitData=function(e,t){var n=r.state,a=n.parent,o=n.block;o?r.props.blockHandlers.onUpdate(o,e):r.props.blockHandlers.onAdd(e,a),r.toggleForm(t)},r.toggleForm=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;r.setState(function(r){return{parent:t,block:n,form:Object(y.a)({},r.form,Object(X.a)({},e,!r.form[e]))}})},r.setCurrentProject=function(e){r.setState({project:e})},r.toggleShowCollaborators=function(){r.setState(function(e){return{showCollaborators:!e.showCollaborators}})},r.state={form:{task:!1,project:!1,group:!1},project:null,block:null,parent:null,showCollaborators:!1,fetchingChildren:!0,fetchingCollaborators:!0,fetchingCollaborationRequests:!0},r}return Object(g.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){this.loadBlockData()}},{key:"componentDidUpdate",value:function(e){this.props.rootBlock.customId!==e.rootBlock.customId?this.loadBlockData():this.updateFetchingState()}},{key:"updateFetchingState",value:function(){var e=this.state,t=e.fetchingChildren,r=e.fetchingCollaborators,n=e.fetchingCollaborationRequests,a={};this.areBlockChildrenLoaded()&&t&&(a.fetchingChildren=!1),this.areBlockCollaboratorsLoaded()&&r&&(a.fetchingCollaborators=!1),this.areBlockCollaborationRequestsLoaded()&&n&&(a.fetchingCollaborationRequests=!1),Object.keys(a).length>0&&this.setState(a)}},{key:"loadBlockData",value:function(){var e=this.state,t=e.fetchingChildren,r=e.fetchingCollaborators,n=e.fetchingCollaborationRequests,a={};this.areBlockChildrenLoaded()?t&&(a.fetchingChildren=!1):this.fetchChildren(),this.areBlockCollaboratorsLoaded()?r&&(a.fetchingCollaborators=!1):this.fetchCollaborators(),this.areBlockCollaborationRequestsLoaded()?n&&(a.fetchingCollaborationRequests=!1):this.fetchCollaborationRequests(),Object.keys(a).length>0&&this.setState(a)}},{key:"areBlockChildrenLoaded",value:function(){var e=this.props.rootBlock;if(q[e.type]&&q[e.type].find(function(t){if(!e[t])return!0}))return!1;return!0}},{key:"areBlockCollaboratorsLoaded",value:function(){var e=this.props.rootBlock;return!("org"===e.type&&!e.collaborators)}},{key:"areBlockCollaborationRequestsLoaded",value:function(){var e=this.props.rootBlock;return!("org"===e.type&&!e.collaborationRequests)}},{key:"fetchChildren",value:function(){var e=Object(d.a)(p.a.mark(function e(){var t,r,n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,r=t.rootBlock,n=t.blockHandlers,e.next=3,n.getBlockChildren(r);case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"fetchCollaborators",value:function(){var e=Object(d.a)(p.a.mark(function e(){var t,r,n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,r=t.rootBlock,n=t.blockHandlers,e.next=3,n.getCollaborators(r);case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"fetchCollaborationRequests",value:function(){var e=Object(d.a)(p.a.mark(function e(){var t,r,n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,r=t.rootBlock,n=t.blockHandlers,e.next=3,n.getCollaborationRequests(r);case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"hasChildren",value:function(e){return!(!e||"object"!==typeof e)&&Object.keys(e).length>0}},{key:"getCollaborators",value:function(){var e=this.props,t=e.user,r=e.rootBlock,n=e.collaborators;return r.collaborators||n||[t]}},{key:"getExistingNames",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).map(function(t){return e[t].name})}},{key:"renderTasks",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0,n=this.props,o=n.blockHandlers,l=n.user,s=n.rootBlock,c=this.getCollaborators();return Object.keys(t).map(function(n){var i=t[n];return a.a.createElement(Qe,{user:l,key:i.customId,task:i,collaborators:c,blockHandlers:o,onEdit:function(t){return e.toggleForm("task",r||s,t)}})})}},{key:"renderProjects",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(t).map(function(r){var n=t[r];return a.a.createElement(Ge,{key:n.customId,project:n,onClick:function(){return e.setCurrentProject(n)},className:"sk-root-group-thumbnail"})})}},{key:"render",value:function(){var e,t,r=this,n=this.props,o=n.rootBlock,l=n.blockHandlers,s=n.user,c=n.onBack,i=n.isFromRoot,u=this.state,p=u.form,d=u.project,m=u.block,b=u.showCollaborators,f=u.parent,h=u.fetchingChildren,g=u.fetchingCollaborators,k=u.fetchingCollaborationRequests,v=this.getCollaborators(),y=q[o.type],C=void 0!==i?i:"root"===o.type;return b?a.a.createElement(dt,{block:o,onBack:this.toggleShowCollaborators,collaborators:o.collaborators,onAddCollaborators:function(e){l.onAddCollaborators(o,e)},collaborationRequests:o.collaborationRequests,bench:o.bench,onUpdateCollaborator:function(e,t){l.onUpdateCollaborator(o,e,t)}}):d?a.a.createElement(Ke,{path:d.path,collaborators:v,user:s,onBack:function(){return r.setCurrentProject(null)},blockHandlers:l,parentBlock:o,isFromRoot:C||i}):a.a.createElement("div",{className:"sk-root-group"},a.a.createElement(ze,{visible:p.project,onSubmit:function(e){return r.onSubmitData(e,"project")},onClose:function(){return r.toggleForm("project")},data:m,existingProjects:p.project&&this.getExistingNames(f.project)}),a.a.createElement(Se,{visible:p.group,onSubmit:function(e){return r.onSubmitData(e,"group")},onClose:function(){return r.toggleForm("group")},data:m,existingGroups:p.group&&this.getExistingNames(f.group)}),a.a.createElement(We,{defaultAssignedTo:i&&[(e=s,{userId:e.customId,assignedAt:Date.now(),assignedBy:t?t.customId:null,completedAt:null})],collaborators:v,visible:p.task,onSubmit:function(e){return r.onSubmitData(e,"task")},onClose:function(){return r.toggleForm("task")},data:m,user:s}),a.a.createElement("div",{className:"sk-root-group-header"},c&&a.a.createElement(S.a,{onClick:c,icon:"arrow-left",style:{marginRight:"1em"}}),y.length>0&&a.a.createElement(te,{types:y,label:"Create",onClick:function(e){return r.toggleForm(e,o)}}),"org"===o.type&&(g&&k?"Loading":a.a.createElement(S.a,{style:{marginLeft:"1em"},onClick:this.toggleShowCollaborators},"Collaborators")),a.a.createElement("span",{className:"sk-root-group-name"},C?"Root":o.name)),a.a.createElement("div",{className:"sk-root-group-content"},a.a.createElement("div",{className:"sk-root-group-content-inner"},h&&"Loading",(this.hasChildren(o.task)||this.hasChildren(o.project))&&a.a.createElement("div",{className:"sk-root-group-content-group",key:"ungrouped"},a.a.createElement(ne,{name:"Ungrouped",user:s},this.renderTasks(o.task,o),this.renderProjects(o.project))),this.hasChildren(o.group)&&Object.keys(o.group).map(function(e){var t=o.group[e];return a.a.createElement("div",{className:"sk-root-group-content-group",key:e},a.a.createElement(ne,{group:t,onClickAddChild:r.toggleForm,blockHandlers:l,onEdit:function(e){return r.toggleForm("group",o,e)},user:s},r.renderTasks(t.task,t),r.renderProjects(t.project)))}))))}}]),t}(a.a.Component)),bt=function(e){function t(e){var r;return Object(m.a)(this,t),(r=Object(f.a)(this,Object(h.a)(t).call(this,e))).state={error:null},r}return Object(g.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){var e=Object(d.a)(p.a.mark(function e(){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.rootBlock){e.next=9;break}return e.prev=1,e.next=4,this.props.fetchRootData();case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),this.setState({error:e.t0});case 9:case"end":return e.stop()}},e,this,[[1,6]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.rootBlock,r=e.blockHandlers,n=e.user,o=this.state.error;return t?o?"An error occurred":a.a.createElement(mt,{rootBlock:t,blockHandlers:r,user:n}):"Loading"}}]),t}(a.a.Component);var ft=Object(c.b)(function(e){return{state:e}},function(e){return{dispatch:e}},function(e,t,r){var n=e.state,a=t.dispatch,o=n.user.user;return{blockHandlers:J({dispatch:a,user:o,parent:n.rootBlock}),user:o,rootBlock:n.rootBlock,fetchRootData:function(){var e=Object(d.a)(p.a.mark(function e(){var t,r,n,o,l;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_("block.getRoleBlocks");case 2:t=e.sent,r=t.blocks,n=null,o={},r.forEach(function(e){"root"===e.type?(n=e).path="rootBlock":"orgs"===e.type&&(o[e.customId]=e,e.path="orgs.".concat(e.customId))}),l=[$(n.path,n),$("orgs",o)],a(U(l));case 9:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()}})(bt);function ht(e){var t=e.org,r=e.className,n=e.style,o=e.onClick;return a.a.createElement(Be,{className:r,data:t,onClick:o,renderInfo:function(){return a.a.createElement("h3",null,t.name)},style:Object(y.a)({height:"70px",padding:"4px"},n),colorSpan:5})}var gt=se.a.TextArea,kt=function(e){function t(e){var r;Object(m.a)(this,t),(r=Object(f.a)(this,Object(h.a)(t).call(this,e))).onSubmit=function(e){return e.type="org",r.props.onSubmit(e)};var n=Object(le.a)(r),a=e.data||{};return r.model={fields:{name:{component:se.a,props:{autoComplete:"off"},label:"Name",labelCol:null,wrapperCol:null,rules:[].concat(Object(oe.a)(Ce.name),[{validator:he(e.existingOrgs,"orgs exist")}]),initialValue:a.name},description:{component:gt,props:{autosize:{minRows:2,maxRows:6}},label:"Description",rules:Ce.description,initialValue:a.description},submit:{component:S.a,props:{type:"primary",children:"Submit",block:!0,htmlType:"submit"},labelCol:null,wrapperCol:null,noDecorate:!0}},formProps:{hideRequiredMark:!0},onSubmit:n.onSubmit},r}return Object(g.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){return a.a.createElement(me,{model:this.model,form:this.props.form})}}]),t}(a.a.Component);kt.defaultProps={data:{}};var vt=Ee(ae.a.create()(kt),"Org"),yt=(r(445),function(e){function t(e){var r;return Object(m.a)(this,t),(r=Object(f.a)(this,Object(h.a)(t).call(this,e))).setCurrentOrg=function(e){r.setState({currentOrg:e})},r.toggleNewOrgForm=function(){r.setState(function(e){return{showNewOrgForm:!e.showNewOrgForm}})},r.onCreateOrg=function(e){r.props.blockHandlers.onAdd(e),r.toggleNewOrgForm()},r.state={currentOrg:null,showNewOrgForm:!1},r}return Object(g.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){var e=this,t=this.props,r=t.orgs,n=t.blockHandlers,o=t.user,l=this.state,s=l.currentOrg,c=l.showNewOrgForm;return s?a.a.createElement(mt,{rootBlock:r[s],onBack:function(){return e.setCurrentOrg(null)},blockHandlers:n,user:o}):a.a.createElement("div",{className:"sk-orgs"},a.a.createElement(vt,{visible:c,onSubmit:this.onCreateOrg,onClose:this.toggleNewOrgForm,existingOrgs:Object.keys(r).map(function(e){return r[e].name})}),a.a.createElement("div",{className:"sk-orgs-header"},a.a.createElement(S.a,{onClick:this.toggleNewOrgForm,icon:"plus"},"Create Org")),a.a.createElement("div",{className:"sk-orgs-content"},Object.keys(r).map(function(t){var n=r[t];return a.a.createElement(ht,{key:n.customId,org:n,onClick:function(){return e.setCurrentOrg(t)},className:"sk-orgs-thumbnail"})})))}}]),t}(a.a.Component)),Ct=function(e){function t(e){var r;return Object(m.a)(this,t),(r=Object(f.a)(this,Object(h.a)(t).call(this,e))).state={error:null},r}return Object(g.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){var e=Object(d.a)(p.a.mark(function e(){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.rootBlock){e.next=9;break}return e.prev=1,e.next=4,this.props.fetchRootData();case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),this.setState({error:e.t0});case 9:case"end":return e.stop()}},e,this,[[1,6]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.orgs,t=this.state.error;return e?t?"An error occurred":a.a.createElement(yt,this.props):"Loading"}}]),t}(a.a.Component);var Ot=Object(c.b)(function(e){return{state:e}},function(e){return{dispatch:e}},function(e,t){var r=e.state,n=t.dispatch;return{blockHandlers:J({dispatch:n,user:r.user.user}),rootBlock:r.rootBlock,user:r.user.user,orgs:r.orgs,fetchRootData:function(){var e=Object(d.a)(p.a.mark(function e(){var t,r,a,o,l;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_("block.getRoleBlocks");case 2:t=e.sent,r=t.blocks,a=null,o={},r.forEach(function(e){"root"===e.type?(a=e).path="rootBlock":"org"===e.type&&(o[e.customId]=e,e.path="orgs.".concat(e.customId))}),l=[$(a.path,a),$("orgs",o)],n(U(l));case 9:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()}})(Ct),jt=(r(446),function(e){function t(){return Object(m.a)(this,t),Object(f.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(b.a)(t,[{key:"getUserResponse",value:function(e){if(Array.isArray(e.statusHistory)){var t,r=(t={},Object(X.a)(t,"accepted",!0),Object(X.a)(t,"declined",!0),t);return e.statusHistory.find(function(e){var t=e.status;return r[t]})}return null}},{key:"render",value:function(){var e=this.props,t=e.notification,r=e.onRespond,n=this.getUserResponse(t);return a.a.createElement("div",{className:"notification-body"},a.a.createElement("div",{className:"notification-body-head"},a.a.createElement("h4",null,"Collaboration Request From ",t.from.blockName),a.a.createElement("span",null,new Date(t.createdAt).toDateString())),a.a.createElement("p",{className:"notification-body-body"},t.body),a.a.createElement("div",{className:"notification-body-btns"},n?a.a.createElement("p",null,"You -"," ",a.a.createElement("span",{style:{backgroundColor:"#ccc",padding:"8px",borderRadius:"4px"}},n.status)):a.a.createElement(a.a.Fragment,null,a.a.createElement(S.a,{type:"primary",onClick:function(){return r(t,"accepted")}},"Accept"),a.a.createElement(S.a,{type:"danger",onClick:function(){return r(t,"accepted")},style:{margin:"0 1em"}},"Decline"))))}}]),t}(a.a.Component));r(447);function Et(e){var t=e.notification,r=e.isSelected,n=e.onClick,o=r?{backgroundColor:"rgb(66,133,244)",color:"white"}:t.readAt>0?{color:"grey"}:null;return a.a.createElement("div",{onClick:n,className:"notifications-list-item",style:o},a.a.createElement("h5",null,"Collaboration Request From ",t.from.blockName),a.a.createElement("span",null,new Date(t.createdAt).toDateString()))}var wt=function(e){function t(e){var r;return Object(m.a)(this,t),(r=Object(f.a)(this,Object(h.a)(t).call(this,e))).onClickNotication=function(e){r.state.currentNotification!==e&&(r.setState({currentNotification:e}),r.props.onClickNotification(r.props.notifications[e]))},r.state={renderType:r.getRenderType(),currentNotification:null},r.setRenderType=je()(r.setRenderType,100,{leading:!0}),r}return Object(g.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.setRenderType)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.setRenderType)}},{key:"setRenderType",value:function(){var e=this.getRenderType();this.state.renderType!==e&&this.setRenderType({renderType:e})}},{key:"getRenderType",value:function(){return N()>500?"desktop":"mobile"}},{key:"renderCurrentNotification",value:function(){var e=this.props,t=e.notifications,r=e.onRespond,n=this.state.currentNotification;return a.a.createElement(jt,{notification:t[n],onRespond:r})}},{key:"renderNotifications",value:function(){var e=this,t=this.props.notifications,r=this.state.currentNotification;return a.a.createElement("div",{className:"notifications-list-list"},Object.keys(t).map(function(n){var o=t[n];return a.a.createElement(Et,{key:n,notification:o,onClick:function(){return e.onClickNotication(o.customId)},isSelected:r===o.customId})}))}},{key:"render",value:function(){var e=this.state,t=e.renderType,r=e.currentNotification;return"mobile"===t?r?this.renderCurrentNotification():this.renderNotifications():a.a.createElement(k.a,{style:{height:"100%"}},a.a.createElement(v.a,{style:{height:"100%"},span:8},this.renderNotifications()),a.a.createElement(v.a,{style:{height:"100%"},span:16},r?this.renderCurrentNotification():null))}}]),t}(a.a.Component),xt=function(e){function t(e){var r;return Object(m.a)(this,t),(r=Object(f.a)(this,Object(h.a)(t).call(this,e))).state={error:null},r}return Object(g.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){var e=Object(d.a)(p.a.mark(function e(){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.notifications){e.next=9;break}return e.prev=1,e.next=4,this.props.fetchNotifications();case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),this.setState({error:e.t0});case 9:case"end":return e.stop()}},e,this,[[1,6]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.notifications,r=e.onRespond,n=e.onClickNotification,o=this.state.error;return t?o?o.message||"An error occurred":a.a.createElement(wt,{notifications:t,onRespond:r,onClickNotification:n}):"Loading"}}]),t}(a.a.Component);var St=Object(c.b)(function(e){return{state:e}},function(e){return{dispatch:e}},function(e,t,r){var n=e.state,a=t.dispatch;return{notifications:n.notifications,onClickNotification:function(){var e=Object(d.a)(p.a.mark(function e(t){var r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.readAt||(r={readAt:Date.now()},a($("notifications.".concat(t.customId),r)),_("user.updateCollaborationRequest",t,r));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),onRespond:function(){var e=Object(d.a)(p.a.mark(function e(t,r){var n,o,l,s,c;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=function(e){var t={accepted:!0,declined:!0,revoked:!0};return!!Array.isArray(e)&&!e.find(function(e){var r=e.status;return t[r]})},o=t.statusHistory,!n(o)){e.next=10;break}return o.push({status:r,date:Date.now()}),l={statusHistory:o},a($("notifications.".concat(t.customId),l)),e.next=8,_("user.respondToCollaborationRequest",t,r);case 8:s=e.sent,"accepted"===r&&s&&s.block&&((c=s.block).path="orgs.".concat(c.customId),a(U([L(c.path,c),$("user.user.orgs",[c.customId])])));case 10:case"end":return e.stop()}},e)}));return function(t,r){return e.apply(this,arguments)}}(),fetchNotifications:function(){var e=Object(d.a)(p.a.mark(function e(){var t,r,n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_("user.getCollaborationRequests");case 2:t=e.sent,r=t.requests,n={},(r=r||[]).forEach(function(e){n[e.customId]=e}),a($("notifications",n));case 8:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()}})(xt),It=r(52),Rt=function(e){function t(e){var r;Object(m.a)(this,t),(r=Object(f.a)(this,Object(h.a)(t).call(this,e))).onSubmit=function(){var e=Object(d.a)(p.a.mark(function e(t){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r.props.onSubmit(t));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();var n=fe("password","confirmPassword",e.form,"password do not match"),a=fe("email","confirmEmail",e.form,"email does not match");return r.model={fields:{name:{component:se.a,label:"Name",props:{autoComplete:"name"},labelCol:null,wrapperCol:null,rules:It.userDescriptor.name},email:{component:se.a,label:"Email",props:{autoComplete:"email"},labelCol:null,wrapperCol:null,rules:It.userDescriptor.email},confirmEmail:{component:se.a,label:"Confirm Email",props:{autoComplete:"email"},labelCol:null,wrapperCol:null,rules:[{required:!0,type:"string",validator:a}]},password:{hasFeedback:!0,component:se.a,props:{type:"password",autoComplete:"new-password"},label:"Password",labelCol:null,wrapperCol:null,rules:[].concat(Object(oe.a)(It.userDescriptor.password),[{required:!0,type:"string",validator:n}]),extra:"min of 5 chars including an alphabet, a number, and a symbol"},confirmPassword:{hasFeedback:!0,component:se.a,props:{type:"password",autoComplete:"new-password"},label:"Confirm Password",labelCol:null,wrapperCol:null,rules:[{required:!0,type:"string",validator:n}]},submit:{component:S.a,props:{type:"primary",children:"Signup",block:!0,htmlType:"submit"},labelCol:null,wrapperCol:null,noDecorate:!0}},formProps:{hideRequiredMark:!0},onSubmit:r.onSubmit},r}return Object(g.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){return a.a.createElement(me,{model:this.model,form:this.props.form})}}]),t}(a.a.Component),At=ae.a.create()(Rt);var Nt=Object(c.b)(null,function(e){return{onSubmit:function(){var t=Object(d.a)(p.a.mark(function t(r){var n;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_("user.signup",r);case 2:if(!(n=t.sent).user||!n.token){t.next=7;break}e($("user",n)),t.next=8;break;case 7:throw new Error("an error occurred");case 8:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}})(At),Dt=(r(448),r(242)),Ft=function(e){function t(e){var r;Object(m.a)(this,t),(r=Object(f.a)(this,Object(h.a)(t).call(this,e))).onSubmit=function(){var e=Object(d.a)(p.a.mark(function e(t){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r.props.onSubmit(t));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();var n=Object(le.a)(r);return r.model={fields:{email:{component:se.a,props:{autoComplete:"email"},label:"Email",labelCol:null,wrapperCol:null,rules:It.userDescriptor.email},password:{component:se.a,props:{type:"password",autoComplete:"current-password"},label:"Password",labelCol:null,wrapperCol:null,rules:It.userDescriptor.password},remember:{component:Dt.a,valuePropName:"checked",props:{children:"Remember me"},initialValue:!0},submit:{component:S.a,props:{type:"primary",children:"Login",block:!0,htmlType:"submit"},labelCol:null,wrapperCol:null,noDecorate:!0}},formProps:{hideRequiredMark:!0},onSubmit:n.onSubmit},r}return Object(g.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){return a.a.createElement(me,{model:this.model,form:this.props.form})}}]),t}(a.a.Component),Bt=ae.a.create()(Ft);var qt=Object(c.b)(null,function(e){return{onSubmit:function(){var t=Object(d.a)(p.a.mark(function t(r){var n;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_("user.login",r);case 2:if(!((n=t.sent)&&n.user&&n.token)){t.next=7;break}e($("user",n)),t.next=8;break;case 7:throw new Error("an error occurred");case 8:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}})(Bt),Tt=(r(225),r(134)),Mt=function(e){function t(e){var r;Object(m.a)(this,t),(r=Object(f.a)(this,Object(h.a)(t).call(this,e))).onSubmit=function(){var e=Object(d.a)(p.a.mark(function e(t){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.props.onSubmit(t);case 2:Tt.a.success("request successful");case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();var n=fe("email","confirmEmail",e.form,"email does not match");return r.model={fields:{email:{component:se.a.Password,label:"Email",labelCol:null,wrapperCol:null,rules:[].concat(Object(oe.a)(It.userDescriptor.email),[{validator:n}])},confirmEmail:{component:se.a,label:"Confirm Email",labelCol:null,wrapperCol:null,rules:[].concat(Object(oe.a)(It.userDescriptor.email),[{validator:n}])},submit:{component:S.a,props:{type:"primary",children:"Submit",block:!0,htmlType:"submit"},labelCol:null,wrapperCol:null,noDecorate:!0}},formProps:{hideRequiredMark:!0},onSubmit:r.onSubmit},r}return Object(g.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){return a.a.createElement(me,{model:this.model,form:this.props.form})}}]),t}(a.a.Component),Pt=ae.a.create()(Mt);var Ut=Object(c.b)(null,function(e){return{onSubmit:function(){var e=Object(d.a)(p.a.mark(function e(t){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_("user.forgotPassword",t);case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}})(Pt),$t=function(e){function t(e){var r;Object(m.a)(this,t),(r=Object(f.a)(this,Object(h.a)(t).call(this,e))).onSubmit=function(){var e=Object(d.a)(p.a.mark(function e(t){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.props.onSubmit(t);case 2:Tt.a.success("change password succeeded");case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();var n=fe("password","confirmPassword",e.form,"password do not match");return r.model={fields:{password:{component:se.a.Password,props:{type:"password"},label:"Password",labelCol:null,wrapperCol:null,rules:[].concat(Object(oe.a)(It.userDescriptor.password),[{validator:n}])},confirmPassword:{component:se.a.Password,props:{type:"password"},label:"Confirm Password",labelCol:null,wrapperCol:null,rules:[].concat(Object(oe.a)(It.userDescriptor.password),[{validator:n}])},submit:{component:S.a,props:{type:"primary",children:"Submit",block:!0,htmlType:"submit"},labelCol:null,wrapperCol:null,noDecorate:!0}},formProps:{hideRequiredMark:!0},onSubmit:r.onSubmit},r}return Object(g.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){return a.a.createElement(me,{model:this.model,form:this.props.form})}}]),t}(a.a.Component),Lt=ae.a.create()($t);var Vt=Object(c.b)(null,function(e){return{onSubmit:function(){var t=Object(d.a)(p.a.mark(function t(r){var n;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_("user.changePasswordWithToken",r);case 2:if(!(n=t.sent).user||!n.token){t.next=7;break}e($("user",n)),t.next=8;break;case 7:throw new Error("an error occurred");case 8:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}})(Lt);var Ht=Object(c.b)(function(e,t){return Object(y.a)({},t)},function(e){return{onLogout:function(){e(V()),_("user.logout")}}})(function(e){var t=e.onLogout;return a.a.createElement(B,{currentItemKey:"orgs",menuItems:[{key:"notifications",label:"Notifications",component:St},{key:"personal",label:"Personal",component:ft},{key:"orgs",label:"Orgs",component:Ot},{key:"logout",label:"Logout",component:null}],onSelectMenu:function(e){"logout"===e&&t&&t()}})});function Wt(e){return function(){var t=e;return a.a.createElement(k.a,{type:"flex",justify:"center"},a.a.createElement(v.a,{sm:24,md:12,lg:8,style:{padding:"1em"}},a.a.createElement(t,null)))}}var Qt=function(e){function t(){return Object(m.a)(this,t),Object(f.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){var e=Object(d.a)(p.a.mark(function e(){var t,r,n,a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props,r=t.userIsLoggedIn,n=t.history,a=t.getSavedUserData,r?"/"===window.location.pathname&&n.push("/app"):(-1!==window.location.pathname.indexOf("app")&&(console.log("/"),n.push("/")),a());case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=this.props,t=e.userIsLoggedIn,r=e.history;t&&-1===window.location.pathname.indexOf("app")&&r.push("/app")}},{key:"componentDidCatch",value:function(e){i.a.error({title:"Error",message:"An error ocurred"})}},{key:"render",value:function(){return this.props.userIsLoggedIn||-1===window.location.pathname.indexOf("app")?a.a.createElement("div",{style:{height:"100%"},className:"app"},a.a.createElement(O.a,null,a.a.createElement(j.a,{path:"/signup",render:Wt(Nt)}),a.a.createElement(j.a,{path:"/login",render:Wt(qt)}),a.a.createElement(j.a,{path:"/forgot-password",render:Wt(Ut)}),a.a.createElement(j.a,{path:"/change-password",render:Wt(Vt)}),a.a.createElement(j.a,{path:"/app",component:Ht}),a.a.createElement(j.a,{path:"/",exact:!0,component:x}))):a.a.createElement(C.a,{to:"/"})}}]),t}(a.a.Component);var _t=Object(E.a)(Object(c.b)(function(e,t){return Object(y.a)({},t,{userIsLoggedIn:e.user&&!!e.user.token})},function(e){return{getSavedUserData:function(){var t=Object(d.a)(p.a.mark(function t(){var r;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_("user.getSavedUserData");case 2:(r=t.sent)&&e($("user",r));case 4:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()}})(Qt)),Yt=r(464);r(456),r(457);var zt=document.getElementById("root");l.a.render(a.a.createElement(c.a,{store:s.a},a.a.createElement(Yt.a,null,a.a.createElement(_t,null))),zt)},48:function(e,t,r){var n=r(358).errorFragment,a="\n  fragment blockFragment on Block {\n    customId\n    name\n    description\n    priority\n    expectedEndAt\n    createdAt\n    color\n    updatedAt\n    type\n    parents\n    createdBy\n    taskCollaborators {\n      userId\n      assignedAt\n      assignedBy\n      completedAt\n    }\n  }\n",o="\n  ".concat(a,"\n  ").concat(n,"\n  query GetRoleBlocksQuery {\n    block {\n      getRoleBlocks {\n        errors {\n          ...errorFragment\n        }\n        blocks {\n          ...blockFragment\n        }\n      }\n    }\n  }\n"),l="\n  ".concat(a,"\n  ").concat(n,"\n  query GetBlockChildrenQuery ($block: BlockParamInput!, $types: [String!]) {\n    block {\n      getBlockChildren (block: $block, types: $types) {\n        errors {\n          ...errorFragment\n        }\n        blocks {\n          ...blockFragment\n        }\n      }\n    }\n  }\n"),s="\n  ".concat(n,"\n  query GetCollaboratorsQuery ($block: BlockParamInput!) {\n    block {\n      getCollaborators (block: $block) {\n        errors {\n          ...errorFragment\n        }\n        collaborators {\n          name\n          email\n          customId\n        }\n      }\n    }\n  }\n"),c="\n  ".concat(n,"\n  query GetCollabRequestsQuery ($block: BlockParamInput!) {\n    block {\n      getCollabRequests (block: $block) {\n        errors {\n          ...errorFragment\n        }\n        requests {\n          customId\n          from {\n            userId\n            name\n            blockId\n            blockName\n            blockType\n          }\n          createdAt\n          body\n          readAt\n          to {\n            email\n            userId\n          }\n          statusHistory {\n            status\n            date\n          }\n          sentEmailHistory {\n            date\n          }\n          type\n          root\n        }\n      }\n    }\n  }\n"),i="\n  ".concat(n,"\n  mutation RemoveCollaboratorsMutation ($block: BlockParamInput!, $collaborator: String!) {\n    block {\n      removeCollaborator (block: $block, collaborator: $collaborator) {\n        errors {\n          ...errorFragment\n        }\n      }\n    }\n  }\n"),u="\n  ".concat(n,"\n  mutation ToggleTaskMutation ($block: BlockParamInput!,  $data: Boolean!) {\n    block {\n       toggleTask (block: $block, data: $data) {\n        errors {\n          ...errorFragment\n        }\n      }\n    }\n  }\n"),p="\n  ".concat(n,"\n  mutation RevokeRequestMutation ($block: BlockParamInput!, $request: String!) {\n    block {\n       revokeRequest (block: $block, request: $request) {\n        errors {\n          ...errorFragment\n        }\n      }\n    }\n  }\n  ");e.exports={addBlockMutation:"\n  mutation AddBlockMutation ($block: AddBlockInput!) {\n    block {\n      addBlock (block: $block) {\n        errors {\n          field\n          message\n        }\n      }\n    }\n  }\n",updateBlockMutation:"\n  mutation UpdateBlockMutation ($block: BlockParamInput!, $data: UpdateBlockInput!) {\n    block {\n      updateBlock (block: $block, data: $data) {\n        errors {\n          field\n          message\n        }\n      }\n    }\n  }\n",deleteBlockMutation:"\n  mutation DeleteBlockMutation ($block: BlockParamInput!) {\n    block {\n      deleteBlock (block: $block) {\n        errors {\n          field\n          message\n        }\n      }\n    }\n  }\n",getBlockChildrenQuery:l,blockFragment:a,addCollaboratorsMutation:"\n  mutation AddCollaborators (\n    $block: BlockParamInput!, \n    $collaborators: [AddCollaboratorInput!]!,\n    $body: String,\n    $expiresAt: Float\n  ) {\n    block {\n      addCollaborators (block: $block, collaborators: $collaborators, body: $body, expiresAt: $expiresAt) {\n        errors {\n          field\n          message\n        }\n      }\n    }\n  }\n",getCollabRequestsQuery:c,getCollaboratorsQuery:s,getRoleBlocksQuery:o,removeCollaboratorMutation:i,toggleTaskMutation:u,revokeRequestMutation:p}},52:function(e,t){function r(e){if(e.trim)return e.trim()}var n={name:[{type:"string",required:!0,max:50,transform:r},{pattern:/\w+/,message:"only alphanumeric characters allowed"}],email:[{type:"email",required:!0,max:250,transform:r}],password:[{required:!0,type:"string"},{max:50,message:"password is too long"},{pattern:/^[A-Za-z\d$@$!%*#?&]$/,message:"password is invalid"}]};e.exports={userDescriptor:n}},55:function(e,t,r){"use strict";r.d(t,"c",function(){return n}),r.d(t,"b",function(){return a}),r.d(t,"d",function(){return o}),r.d(t,"e",function(){return l}),r.d(t,"a",function(){return s});var n="MERGE",a="DELETE",o="MULTIPLE",l="SET",s="CLEAR_STATE"},73:function(e,t,r){"use strict";var n=r(7),a=r.n(n),o=r(29),l=r(15),s=r(95),c=r(50),i=r.n(c);function u(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(){}}function p(){u("error").apply(void 0,arguments)}r.d(t,"a",function(){return m});var d="/graphql";function m(e,t,r,n){return b.apply(this,arguments)}function b(){return(b=Object(l.a)(a.a.mark(function e(t,r,n,l){var c,u,m;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c=Object(o.a)({"Content-Type":"application/json"},t),e.next=4,fetch(d,{headers:c,body:JSON.stringify({query:r,variables:n}),method:"POST",mode:"cors"});case 4:if(!(u=e.sent).ok){e.next=13;break}return e.next=8,u.json();case 8:if(m=e.sent,!(m="string"===typeof l?i()(m,l):l(m))||!m.errors){e.next=12;break}throw new s.a(m.errors);case 12:return e.abrupt("return",m);case 13:throw new s.a(u.statusText||"an error occurred");case 16:if(e.prev=16,e.t0=e.catch(0),p(e.t0),"NetError"!==e.t0.name){e.next=21;break}throw e.t0;case 21:throw new s.a("an error occurred");case 22:case"end":return e.stop()}},e,null,[[0,16]])}))).apply(this,arguments)}},95:function(e,t,r){"use strict";r.d(t,"a",function(){return i});var n=r(12),a=r(8),o=r(11),l=r(243),s=r(9),c=function e(t,r){Object(s.a)(this,e),this.field=t,this.errors=Array.isArray(r)?r:[JSON.stringify(r)],this.name="NetFieldError"},i=function(e){function t(e){var r;return Object(s.a)(this,t),(r=Object(n.a)(this,Object(a.a)(t).call(this))).name="NetError",r.errors=[],Array.isArray(e)?r.errors=e.map(function(e){return new c(e.field,e.errors)}):"object"===typeof e?r.errors.push(new c(e.field,e.errors)):r.errors.push(new c("error",e)),r}return Object(o.a)(t,e),t}(Object(l.a)(Error))}},[[246,1,2]]]);
//# sourceMappingURL=main.cb7a968b.chunk.js.map